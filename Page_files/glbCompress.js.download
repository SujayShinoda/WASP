/*! For license information please see glbCompress.js.LICENSE.txt */
(()=>{var t,e,r,n,s={339:(t,e,r)=>{var n=r(367),s=r(1);t.exports={createEncoderModule:n,createDecoderModule:s}},1:function(t,e,r){var n=n||{};n.scope={},n.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},n.arrayIterator=function(t){return{next:n.arrayIteratorImpl(t)}},n.makeIterator=function(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):n.arrayIterator(t)},n.ASSUME_ES5=!1,n.ASSUME_NO_NATIVE_MAP=!1,n.ASSUME_NO_NATIVE_SET=!1,n.SIMPLE_FROUND_POLYFILL=!1,n.ISOLATE_POLYFILLS=!1,n.FORCE_POLYFILL_PROMISE=!1,n.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,n.getGlobal=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof r.g&&r.g];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},n.global=n.getGlobal(this),n.defineProperty=n.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,r){return t==Array.prototype||t==Object.prototype||(t[e]=r.value),t},n.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),n.TRUST_ES6_POLYFILLS=!n.ISOLATE_POLYFILLS||n.IS_SYMBOL_NATIVE,n.polyfills={},n.propertyToPolyfillSymbol={},n.POLYFILL_PREFIX="$jscp$";n.polyfill=function(t,e,r,s){e&&(n.ISOLATE_POLYFILLS?n.polyfillIsolated(t,e,r,s):n.polyfillUnisolated(t,e,r,s))},n.polyfillUnisolated=function(t,e,r,s){for(r=n.global,t=t.split("."),s=0;s<t.length-1;s++){var i=t[s];if(!(i in r))return;r=r[i]}(e=e(s=r[t=t[t.length-1]]))!=s&&null!=e&&n.defineProperty(r,t,{configurable:!0,writable:!0,value:e})},n.polyfillIsolated=function(t,e,r,s){var i=t.split(".");t=1===i.length,s=i[0],s=!t&&s in n.polyfills?n.polyfills:n.global;for(var o=0;o<i.length-1;o++){var a=i[o];if(!(a in s))return;s=s[a]}i=i[i.length-1],null!=(e=e(r=n.IS_SYMBOL_NATIVE&&"es6"===r?s[i]:null))&&(t?n.defineProperty(n.polyfills,i,{configurable:!0,writable:!0,value:e}):e!==r&&(void 0===n.propertyToPolyfillSymbol[i]&&(r=1e9*Math.random()>>>0,n.propertyToPolyfillSymbol[i]=n.IS_SYMBOL_NATIVE?n.global.Symbol(i):n.POLYFILL_PREFIX+r+"$"+i),n.defineProperty(s,n.propertyToPolyfillSymbol[i],{configurable:!0,writable:!0,value:e})))},n.polyfill("Promise",(function(t){function e(){this.batch_=null}function r(t){return t instanceof i?t:new i((function(e,r){e(t)}))}if(t&&(!(n.FORCE_POLYFILL_PROMISE||n.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&void 0===n.global.PromiseRejectionEvent)||!n.global.Promise||-1===n.global.Promise.toString().indexOf("[native code]")))return t;e.prototype.asyncExecute=function(t){if(null==this.batch_){this.batch_=[];var e=this;this.asyncExecuteFunction((function(){e.executeBatch_()}))}this.batch_.push(t)};var s=n.global.setTimeout;e.prototype.asyncExecuteFunction=function(t){s(t,0)},e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var t=this.batch_;this.batch_=[];for(var e=0;e<t.length;++e){var r=t[e];t[e]=null;try{r()}catch(t){this.asyncThrow_(t)}}}this.batch_=null},e.prototype.asyncThrow_=function(t){this.asyncExecuteFunction((function(){throw t}))};var i=function(t){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var e=this.createResolveAndReject_();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}};i.prototype.createResolveAndReject_=function(){function t(t){return function(n){r||(r=!0,t.call(e,n))}}var e=this,r=!1;return{resolve:t(this.resolveTo_),reject:t(this.reject_)}},i.prototype.resolveTo_=function(t){if(t===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof i)this.settleSameAsPromise_(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.resolveToNonPromiseObj_(t):this.fulfill_(t)}},i.prototype.resolveToNonPromiseObj_=function(t){var e=void 0;try{e=t.then}catch(t){return void this.reject_(t)}"function"==typeof e?this.settleSameAsThenable_(e,t):this.fulfill_(t)},i.prototype.reject_=function(t){this.settle_(2,t)},i.prototype.fulfill_=function(t){this.settle_(1,t)},i.prototype.settle_=function(t,e){if(0!=this.state_)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.state_);this.state_=t,this.result_=e,2===this.state_&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},i.prototype.scheduleUnhandledRejectionCheck_=function(){var t=this;s((function(){if(t.notifyUnhandledRejection_()){var e=n.global.console;void 0!==e&&e.error(t.result_)}}),1)},i.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var t=n.global.CustomEvent,e=n.global.Event,r=n.global.dispatchEvent;return void 0===r||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=n.global.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.result_,r(t))},i.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var t=0;t<this.onSettledCallbacks_.length;++t)o.asyncExecute(this.onSettledCallbacks_[t]);this.onSettledCallbacks_=null}};var o=new e;return i.prototype.settleSameAsPromise_=function(t){var e=this.createResolveAndReject_();t.callWhenSettled_(e.resolve,e.reject)},i.prototype.settleSameAsThenable_=function(t,e){var r=this.createResolveAndReject_();try{t.call(e,r.resolve,r.reject)}catch(t){r.reject(t)}},i.prototype.then=function(t,e){function r(t,e){return"function"==typeof t?function(e){try{n(t(e))}catch(t){s(t)}}:e}var n,s,o=new i((function(t,e){n=t,s=e}));return this.callWhenSettled_(r(t,n),r(e,s)),o},i.prototype.catch=function(t){return this.then(void 0,t)},i.prototype.callWhenSettled_=function(t,e){function r(){switch(n.state_){case 1:t(n.result_);break;case 2:e(n.result_);break;default:throw Error("Unexpected state: "+n.state_)}}var n=this;null==this.onSettledCallbacks_?o.asyncExecute(r):this.onSettledCallbacks_.push(r),this.isRejectionHandled_=!0},i.resolve=r,i.reject=function(t){return new i((function(e,r){r(t)}))},i.race=function(t){return new i((function(e,s){for(var i=n.makeIterator(t),o=i.next();!o.done;o=i.next())r(o.value).callWhenSettled_(e,s)}))},i.all=function(t){var e=n.makeIterator(t),s=e.next();return s.done?r([]):new i((function(t,n){function i(e){return function(r){o[e]=r,0==--a&&t(o)}}var o=[],a=0;do{o.push(void 0),a++,r(s.value).callWhenSettled_(i(o.length-1),n),s=e.next()}while(!s.done)}))},i}),"es6","es3"),n.owns=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.assign=n.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(t,e){for(var r=1;r<arguments.length;r++){var s=arguments[r];if(s)for(var i in s)n.owns(s,i)&&(t[i]=s[i])}return t},n.polyfill("Object.assign",(function(t){return t||n.assign}),"es6","es3"),n.checkStringArgs=function(t,e,r){if(null==t)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return t+""},n.polyfill("String.prototype.startsWith",(function(t){return t||function(t,e){var r=n.checkStringArgs(this,t,"startsWith");t+="";var s=r.length,i=t.length;e=Math.max(0,Math.min(0|e,r.length));for(var o=0;o<i&&e<s;)if(r[e++]!=t[o++])return!1;return o>=i}}),"es6","es3"),n.polyfill("Array.prototype.copyWithin",(function(t){function e(t){return 1/0===(t=Number(t))||-1/0===t?t:0|t}return t||function(t,r,n){var s=this.length;if(t=e(t),r=e(r),n=void 0===n?s:e(n),t=0>t?Math.max(s+t,0):Math.min(t,s),r=0>r?Math.max(s+r,0):Math.min(r,s),n=0>n?Math.max(s+n,0):Math.min(n,s),t<r)for(;r<n;)r in this?this[t++]=this[r++]:(delete this[t++],r++);else for(t+=(n=Math.min(n,s+r-t))-r;n>r;)--n in this?this[--t]=this[n]:delete this[--t];return this}}),"es6","es3"),n.typedArrayCopyWithin=function(t){return t||Array.prototype.copyWithin},n.polyfill("Int8Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Uint8Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Uint8ClampedArray.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Int16Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Uint16Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Int32Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Uint32Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Float32Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Float64Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5");var s,i=(s=(s="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(t,e){if(t){var r=tt,n=t+e;for(e=t;r[e]&&!(e>=n);)++e;if(16<e-t&&r.buffer&&it)r=it.decode(r.subarray(t,e));else{for(n="";t<e;){var s=r[t++];if(128&s){var i=63&r[t++];if(192==(224&s))n+=String.fromCharCode((31&s)<<6|i);else{var o=63&r[t++];65536>(s=224==(240&s)?(15&s)<<12|i<<6|o:(7&s)<<18|i<<12|o<<6|63&r[t++])?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else n+=String.fromCharCode(s)}r=n}}else r="";return r}function n(){var t=J.buffer;P.HEAP8=Z=new Int8Array(t),P.HEAP16=new Int16Array(t),P.HEAP32=et=new Int32Array(t),P.HEAPU8=tt=new Uint8Array(t),P.HEAPU16=new Uint16Array(t),P.HEAPU32=rt=new Uint32Array(t),P.HEAPF32=new Float32Array(t),P.HEAPF64=new Float64Array(t)}function i(t){throw P.onAbort&&P.onAbort(t),$(t="Aborted("+t+")"),st=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),U(t),t}function o(t){try{if(t==ft&&Q)return new Uint8Array(Q);if(q)return q(t);throw"both async and sync fetching of the wasm failed"}catch(t){i(t)}}function a(t){for(;0<t.length;)t.shift()(P)}function c(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(t){rt[this.ptr+4>>2]=t},this.get_type=function(){return rt[this.ptr+4>>2]},this.set_destructor=function(t){rt[this.ptr+8>>2]=t},this.get_destructor=function(){return rt[this.ptr+8>>2]},this.set_refcount=function(t){et[this.ptr>>2]=t},this.set_caught=function(t){Z[this.ptr+12>>0]=t?1:0},this.get_caught=function(){return 0!=Z[this.ptr+12>>0]},this.set_rethrown=function(t){Z[this.ptr+13>>0]=t?1:0},this.get_rethrown=function(){return 0!=Z[this.ptr+13>>0]},this.init=function(t,e){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){et[this.ptr>>2]+=1},this.release_ref=function(){var t=et[this.ptr>>2];return et[this.ptr>>2]=t-1,1===t},this.set_adjusted_ptr=function(t){rt[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return rt[this.ptr+16>>2]},this.get_exception_ptr=function(){if($r(this.get_type()))return rt[this.excPtr>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.excPtr}}function u(){function t(){if(!Qr&&(Qr=!0,P.calledRun=!0,!st)){if(ut=!0,a(at),F(P),P.onRuntimeInitialized&&P.onRuntimeInitialized(),P.postRun)for("function"==typeof P.postRun&&(P.postRun=[P.postRun]);P.postRun.length;)ct.unshift(P.postRun.shift());a(ct)}}if(!(0<pt)){if(P.preRun)for("function"==typeof P.preRun&&(P.preRun=[P.preRun]);P.preRun.length;)ot.unshift(P.preRun.shift());a(ot),0<pt||(P.setStatus?(P.setStatus("Running..."),setTimeout((function(){setTimeout((function(){P.setStatus("")}),1),t()}),1)):t())}}function p(){}function l(t){return(t||p).__cache__}function _(t,e){var r=l(e),n=r[t];return n||((n=Object.create((e||p).prototype)).ptr=t,r[t]=n)}function f(t){if("string"==typeof t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);127>=n?e++:2047>=n?e+=2:55296<=n&&57343>=n?(e+=4,++r):e+=3}if(r=0,0<(n=(e=Array(e+1)).length)){n=r+n-1;for(var s=0;s<t.length;++s){var i=t.charCodeAt(s);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++s)),127>=i){if(r>=n)break;e[r++]=i}else{if(2047>=i){if(r+1>=n)break;e[r++]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;e[r++]=224|i>>12}else{if(r+3>=n)break;e[r++]=240|i>>18,e[r++]=128|i>>12&63}e[r++]=128|i>>6&63}e[r++]=128|63&i}}e[r]=0}return t=Jr.alloc(e,Z),Jr.copy(e,Z,t),t}return t}function h(t){if("object"==typeof t){var e=Jr.alloc(t,Z);return Jr.copy(t,Z,e),e}return t}function d(){throw"cannot construct a VoidPtr, no constructor in IDL"}function y(){this.ptr=yt(),l(y)[this.ptr]=this}function m(){this.ptr=bt(),l(m)[this.ptr]=this}function g(){this.ptr=At(),l(g)[this.ptr]=this}function b(){this.ptr=It(),l(b)[this.ptr]=this}function T(){this.ptr=Ft(),l(T)[this.ptr]=this}function E(){this.ptr=Vt(),l(E)[this.ptr]=this}function A(){this.ptr=Wt(),l(A)[this.ptr]=this}function x(){this.ptr=Kt(),l(x)[this.ptr]=this}function I(){this.ptr=te(),l(I)[this.ptr]=this}function R(){throw"cannot construct a Status, no constructor in IDL"}function M(){this.ptr=oe(),l(M)[this.ptr]=this}function S(){this.ptr=pe(),l(S)[this.ptr]=this}function v(){this.ptr=he(),l(v)[this.ptr]=this}function N(){this.ptr=ge(),l(N)[this.ptr]=this}function w(){this.ptr=Ae(),l(w)[this.ptr]=this}function O(){this.ptr=Me(),l(O)[this.ptr]=this}function D(){this.ptr=we(),l(D)[this.ptr]=this}function C(){this.ptr=je(),l(C)[this.ptr]=this}function j(){this.ptr=ze(),l(j)[this.ptr]=this}var F,U,P=void 0!==(t=void 0===t?{}:t)?t:{};P.ready=new Promise((function(t,e){F=t,U=e}));var L=!1,B=!1;P.onRuntimeInitialized=function(){L=!0,B&&"function"==typeof P.onModuleLoaded&&P.onModuleLoaded(P)},P.onModuleParsed=function(){B=!0,L&&"function"==typeof P.onModuleLoaded&&P.onModuleLoaded(P)},P.isVersionSupported=function(t){return"string"==typeof t&&!(2>(t=t.split(".")).length||3<t.length)&&(1==t[0]&&0<=t[1]&&5>=t[1]||!(0!=t[0]||10<t[1]))};var G=Object.assign({},P),V="object"==typeof window,k="function"==typeof importScripts,z="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,H="";if(z){var W=r(Object(function(){var t=new Error("Cannot find module 'fs'");throw t.code="MODULE_NOT_FOUND",t}())),Y=r(66);H=k?Y.dirname(H)+"/":"//";var X=function(t,e){return t=t.startsWith("file://")?new URL(t):Y.normalize(t),W.readFileSync(t,e?void 0:"utf8")},q=function(t){return(t=X(t,!0)).buffer||(t=new Uint8Array(t)),t},K=function(t,e,r){t=t.startsWith("file://")?new URL(t):Y.normalize(t),W.readFile(t,(function(t,n){t?r(t):e(n.buffer)}))};1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),P.inspect=function(){return"[Emscripten Module object]"}}else(V||k)&&(k?H=self.location.href:"undefined"!=typeof document&&document.currentScript&&(H=document.currentScript.src),s&&(H=s),H=0!==H.indexOf("blob:")?H.substr(0,H.replace(/[?#].*/,"").lastIndexOf("/")+1):"",X=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},k&&(q=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),K=function(t,e,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?e(n.response):r()},n.onerror=r,n.send(null)});P.print||console.log.bind(console);var Q,$=P.printErr||console.warn.bind(console);Object.assign(P,G),G=null,P.wasmBinary&&(Q=P.wasmBinary),"object"!=typeof WebAssembly&&i("no native wasm support detected");var J,Z,tt,et,rt,nt,st=!1,it="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,ot=[],at=[],ct=[],ut=!1,pt=0,lt=null,_t=null,ft="draco_decoder_gltf.wasm";ft.startsWith("data:application/octet-stream;base64,")||(nt=ft,ft=P.locateFile?P.locateFile(nt,H):H+nt);var ht={b:function(t,e,r){throw new c(t).init(e,r),t},a:function(){i("")},d:function(t,e,r){tt.copyWithin(t,e,e+r)},c:function(t){var e=tt.length;if(2147483648<(t>>>=0))return!1;for(var r=1;4>=r;r*=2){var s=e*(1+.2/r);s=Math.min(s,t+100663296);var i=Math;s=Math.max(t,s),i=i.min.call(i,2147483648,s+(65536-s%65536)%65536);t:{s=J.buffer;try{J.grow(i-s.byteLength+65535>>>16),n();var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1}};!function(){function t(t,e){P.asm=t.exports,J=P.asm.e,n(),at.unshift(P.asm.f),pt--,P.monitorRunDependencies&&P.monitorRunDependencies(pt),0==pt&&(null!==lt&&(clearInterval(lt),lt=null),_t&&(t=_t,_t=null,t()))}function e(e){t(e.instance)}function r(t){return function(){if(!Q&&(V||k)){if("function"==typeof fetch&&!ft.startsWith("file://"))return fetch(ft,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+ft+"'";return t.arrayBuffer()})).catch((function(){return o(ft)}));if(K)return new Promise((function(t,e){K(ft,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return o(ft)}))}().then((function(t){return WebAssembly.instantiate(t,s)})).then((function(t){return t})).then(t,(function(t){$("failed to asynchronously prepare wasm: "+t),i(t)}))}var s={a:ht};if(pt++,P.monitorRunDependencies&&P.monitorRunDependencies(pt),P.instantiateWasm)try{return P.instantiateWasm(s,t)}catch(t){$("Module.instantiateWasm callback failed with error: "+t),U(t)}(Q||"function"!=typeof WebAssembly.instantiateStreaming||ft.startsWith("data:application/octet-stream;base64,")||ft.startsWith("file://")||z||"function"!=typeof fetch?r(e):fetch(ft,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,s).then(e,(function(t){return $("wasm streaming compile failed: "+t),$("falling back to ArrayBuffer instantiation"),r(e)}))}))).catch(U)}();var dt=P._emscripten_bind_VoidPtr___destroy___0=function(){return(dt=P._emscripten_bind_VoidPtr___destroy___0=P.asm.h).apply(null,arguments)},yt=P._emscripten_bind_DecoderBuffer_DecoderBuffer_0=function(){return(yt=P._emscripten_bind_DecoderBuffer_DecoderBuffer_0=P.asm.i).apply(null,arguments)},mt=P._emscripten_bind_DecoderBuffer_Init_2=function(){return(mt=P._emscripten_bind_DecoderBuffer_Init_2=P.asm.j).apply(null,arguments)},gt=P._emscripten_bind_DecoderBuffer___destroy___0=function(){return(gt=P._emscripten_bind_DecoderBuffer___destroy___0=P.asm.k).apply(null,arguments)},bt=P._emscripten_bind_AttributeTransformData_AttributeTransformData_0=function(){return(bt=P._emscripten_bind_AttributeTransformData_AttributeTransformData_0=P.asm.l).apply(null,arguments)},Tt=P._emscripten_bind_AttributeTransformData_transform_type_0=function(){return(Tt=P._emscripten_bind_AttributeTransformData_transform_type_0=P.asm.m).apply(null,arguments)},Et=P._emscripten_bind_AttributeTransformData___destroy___0=function(){return(Et=P._emscripten_bind_AttributeTransformData___destroy___0=P.asm.n).apply(null,arguments)},At=P._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return(At=P._emscripten_bind_GeometryAttribute_GeometryAttribute_0=P.asm.o).apply(null,arguments)},xt=P._emscripten_bind_GeometryAttribute___destroy___0=function(){return(xt=P._emscripten_bind_GeometryAttribute___destroy___0=P.asm.p).apply(null,arguments)},It=P._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(It=P._emscripten_bind_PointAttribute_PointAttribute_0=P.asm.q).apply(null,arguments)},Rt=P._emscripten_bind_PointAttribute_size_0=function(){return(Rt=P._emscripten_bind_PointAttribute_size_0=P.asm.r).apply(null,arguments)},Mt=P._emscripten_bind_PointAttribute_GetAttributeTransformData_0=function(){return(Mt=P._emscripten_bind_PointAttribute_GetAttributeTransformData_0=P.asm.s).apply(null,arguments)},St=P._emscripten_bind_PointAttribute_attribute_type_0=function(){return(St=P._emscripten_bind_PointAttribute_attribute_type_0=P.asm.t).apply(null,arguments)},vt=P._emscripten_bind_PointAttribute_data_type_0=function(){return(vt=P._emscripten_bind_PointAttribute_data_type_0=P.asm.u).apply(null,arguments)},Nt=P._emscripten_bind_PointAttribute_num_components_0=function(){return(Nt=P._emscripten_bind_PointAttribute_num_components_0=P.asm.v).apply(null,arguments)},wt=P._emscripten_bind_PointAttribute_normalized_0=function(){return(wt=P._emscripten_bind_PointAttribute_normalized_0=P.asm.w).apply(null,arguments)},Ot=P._emscripten_bind_PointAttribute_byte_stride_0=function(){return(Ot=P._emscripten_bind_PointAttribute_byte_stride_0=P.asm.x).apply(null,arguments)},Dt=P._emscripten_bind_PointAttribute_byte_offset_0=function(){return(Dt=P._emscripten_bind_PointAttribute_byte_offset_0=P.asm.y).apply(null,arguments)},Ct=P._emscripten_bind_PointAttribute_unique_id_0=function(){return(Ct=P._emscripten_bind_PointAttribute_unique_id_0=P.asm.z).apply(null,arguments)},jt=P._emscripten_bind_PointAttribute___destroy___0=function(){return(jt=P._emscripten_bind_PointAttribute___destroy___0=P.asm.A).apply(null,arguments)},Ft=P._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=function(){return(Ft=P._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=P.asm.B).apply(null,arguments)},Ut=P._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=function(){return(Ut=P._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=P.asm.C).apply(null,arguments)},Pt=P._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=function(){return(Pt=P._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=P.asm.D).apply(null,arguments)},Lt=P._emscripten_bind_AttributeQuantizationTransform_min_value_1=function(){return(Lt=P._emscripten_bind_AttributeQuantizationTransform_min_value_1=P.asm.E).apply(null,arguments)},Bt=P._emscripten_bind_AttributeQuantizationTransform_range_0=function(){return(Bt=P._emscripten_bind_AttributeQuantizationTransform_range_0=P.asm.F).apply(null,arguments)},Gt=P._emscripten_bind_AttributeQuantizationTransform___destroy___0=function(){return(Gt=P._emscripten_bind_AttributeQuantizationTransform___destroy___0=P.asm.G).apply(null,arguments)},Vt=P._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=function(){return(Vt=P._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=P.asm.H).apply(null,arguments)},kt=P._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=function(){return(kt=P._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=P.asm.I).apply(null,arguments)},zt=P._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=function(){return(zt=P._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=P.asm.J).apply(null,arguments)},Ht=P._emscripten_bind_AttributeOctahedronTransform___destroy___0=function(){return(Ht=P._emscripten_bind_AttributeOctahedronTransform___destroy___0=P.asm.K).apply(null,arguments)},Wt=P._emscripten_bind_PointCloud_PointCloud_0=function(){return(Wt=P._emscripten_bind_PointCloud_PointCloud_0=P.asm.L).apply(null,arguments)},Yt=P._emscripten_bind_PointCloud_num_attributes_0=function(){return(Yt=P._emscripten_bind_PointCloud_num_attributes_0=P.asm.M).apply(null,arguments)},Xt=P._emscripten_bind_PointCloud_num_points_0=function(){return(Xt=P._emscripten_bind_PointCloud_num_points_0=P.asm.N).apply(null,arguments)},qt=P._emscripten_bind_PointCloud___destroy___0=function(){return(qt=P._emscripten_bind_PointCloud___destroy___0=P.asm.O).apply(null,arguments)},Kt=P._emscripten_bind_Mesh_Mesh_0=function(){return(Kt=P._emscripten_bind_Mesh_Mesh_0=P.asm.P).apply(null,arguments)},Qt=P._emscripten_bind_Mesh_num_faces_0=function(){return(Qt=P._emscripten_bind_Mesh_num_faces_0=P.asm.Q).apply(null,arguments)},$t=P._emscripten_bind_Mesh_num_attributes_0=function(){return($t=P._emscripten_bind_Mesh_num_attributes_0=P.asm.R).apply(null,arguments)},Jt=P._emscripten_bind_Mesh_num_points_0=function(){return(Jt=P._emscripten_bind_Mesh_num_points_0=P.asm.S).apply(null,arguments)},Zt=P._emscripten_bind_Mesh___destroy___0=function(){return(Zt=P._emscripten_bind_Mesh___destroy___0=P.asm.T).apply(null,arguments)},te=P._emscripten_bind_Metadata_Metadata_0=function(){return(te=P._emscripten_bind_Metadata_Metadata_0=P.asm.U).apply(null,arguments)},ee=P._emscripten_bind_Metadata___destroy___0=function(){return(ee=P._emscripten_bind_Metadata___destroy___0=P.asm.V).apply(null,arguments)},re=P._emscripten_bind_Status_code_0=function(){return(re=P._emscripten_bind_Status_code_0=P.asm.W).apply(null,arguments)},ne=P._emscripten_bind_Status_ok_0=function(){return(ne=P._emscripten_bind_Status_ok_0=P.asm.X).apply(null,arguments)},se=P._emscripten_bind_Status_error_msg_0=function(){return(se=P._emscripten_bind_Status_error_msg_0=P.asm.Y).apply(null,arguments)},ie=P._emscripten_bind_Status___destroy___0=function(){return(ie=P._emscripten_bind_Status___destroy___0=P.asm.Z).apply(null,arguments)},oe=P._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=function(){return(oe=P._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=P.asm._).apply(null,arguments)},ae=P._emscripten_bind_DracoFloat32Array_GetValue_1=function(){return(ae=P._emscripten_bind_DracoFloat32Array_GetValue_1=P.asm.$).apply(null,arguments)},ce=P._emscripten_bind_DracoFloat32Array_size_0=function(){return(ce=P._emscripten_bind_DracoFloat32Array_size_0=P.asm.aa).apply(null,arguments)},ue=P._emscripten_bind_DracoFloat32Array___destroy___0=function(){return(ue=P._emscripten_bind_DracoFloat32Array___destroy___0=P.asm.ba).apply(null,arguments)},pe=P._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(pe=P._emscripten_bind_DracoInt8Array_DracoInt8Array_0=P.asm.ca).apply(null,arguments)},le=P._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(le=P._emscripten_bind_DracoInt8Array_GetValue_1=P.asm.da).apply(null,arguments)},_e=P._emscripten_bind_DracoInt8Array_size_0=function(){return(_e=P._emscripten_bind_DracoInt8Array_size_0=P.asm.ea).apply(null,arguments)},fe=P._emscripten_bind_DracoInt8Array___destroy___0=function(){return(fe=P._emscripten_bind_DracoInt8Array___destroy___0=P.asm.fa).apply(null,arguments)},he=P._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=function(){return(he=P._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=P.asm.ga).apply(null,arguments)},de=P._emscripten_bind_DracoUInt8Array_GetValue_1=function(){return(de=P._emscripten_bind_DracoUInt8Array_GetValue_1=P.asm.ha).apply(null,arguments)},ye=P._emscripten_bind_DracoUInt8Array_size_0=function(){return(ye=P._emscripten_bind_DracoUInt8Array_size_0=P.asm.ia).apply(null,arguments)},me=P._emscripten_bind_DracoUInt8Array___destroy___0=function(){return(me=P._emscripten_bind_DracoUInt8Array___destroy___0=P.asm.ja).apply(null,arguments)},ge=P._emscripten_bind_DracoInt16Array_DracoInt16Array_0=function(){return(ge=P._emscripten_bind_DracoInt16Array_DracoInt16Array_0=P.asm.ka).apply(null,arguments)},be=P._emscripten_bind_DracoInt16Array_GetValue_1=function(){return(be=P._emscripten_bind_DracoInt16Array_GetValue_1=P.asm.la).apply(null,arguments)},Te=P._emscripten_bind_DracoInt16Array_size_0=function(){return(Te=P._emscripten_bind_DracoInt16Array_size_0=P.asm.ma).apply(null,arguments)},Ee=P._emscripten_bind_DracoInt16Array___destroy___0=function(){return(Ee=P._emscripten_bind_DracoInt16Array___destroy___0=P.asm.na).apply(null,arguments)},Ae=P._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=function(){return(Ae=P._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=P.asm.oa).apply(null,arguments)},xe=P._emscripten_bind_DracoUInt16Array_GetValue_1=function(){return(xe=P._emscripten_bind_DracoUInt16Array_GetValue_1=P.asm.pa).apply(null,arguments)},Ie=P._emscripten_bind_DracoUInt16Array_size_0=function(){return(Ie=P._emscripten_bind_DracoUInt16Array_size_0=P.asm.qa).apply(null,arguments)},Re=P._emscripten_bind_DracoUInt16Array___destroy___0=function(){return(Re=P._emscripten_bind_DracoUInt16Array___destroy___0=P.asm.ra).apply(null,arguments)},Me=P._emscripten_bind_DracoInt32Array_DracoInt32Array_0=function(){return(Me=P._emscripten_bind_DracoInt32Array_DracoInt32Array_0=P.asm.sa).apply(null,arguments)},Se=P._emscripten_bind_DracoInt32Array_GetValue_1=function(){return(Se=P._emscripten_bind_DracoInt32Array_GetValue_1=P.asm.ta).apply(null,arguments)},ve=P._emscripten_bind_DracoInt32Array_size_0=function(){return(ve=P._emscripten_bind_DracoInt32Array_size_0=P.asm.ua).apply(null,arguments)},Ne=P._emscripten_bind_DracoInt32Array___destroy___0=function(){return(Ne=P._emscripten_bind_DracoInt32Array___destroy___0=P.asm.va).apply(null,arguments)},we=P._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=function(){return(we=P._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=P.asm.wa).apply(null,arguments)},Oe=P._emscripten_bind_DracoUInt32Array_GetValue_1=function(){return(Oe=P._emscripten_bind_DracoUInt32Array_GetValue_1=P.asm.xa).apply(null,arguments)},De=P._emscripten_bind_DracoUInt32Array_size_0=function(){return(De=P._emscripten_bind_DracoUInt32Array_size_0=P.asm.ya).apply(null,arguments)},Ce=P._emscripten_bind_DracoUInt32Array___destroy___0=function(){return(Ce=P._emscripten_bind_DracoUInt32Array___destroy___0=P.asm.za).apply(null,arguments)},je=P._emscripten_bind_MetadataQuerier_MetadataQuerier_0=function(){return(je=P._emscripten_bind_MetadataQuerier_MetadataQuerier_0=P.asm.Aa).apply(null,arguments)},Fe=P._emscripten_bind_MetadataQuerier_HasEntry_2=function(){return(Fe=P._emscripten_bind_MetadataQuerier_HasEntry_2=P.asm.Ba).apply(null,arguments)},Ue=P._emscripten_bind_MetadataQuerier_GetIntEntry_2=function(){return(Ue=P._emscripten_bind_MetadataQuerier_GetIntEntry_2=P.asm.Ca).apply(null,arguments)},Pe=P._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=function(){return(Pe=P._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=P.asm.Da).apply(null,arguments)},Le=P._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=function(){return(Le=P._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=P.asm.Ea).apply(null,arguments)},Be=P._emscripten_bind_MetadataQuerier_GetStringEntry_2=function(){return(Be=P._emscripten_bind_MetadataQuerier_GetStringEntry_2=P.asm.Fa).apply(null,arguments)},Ge=P._emscripten_bind_MetadataQuerier_NumEntries_1=function(){return(Ge=P._emscripten_bind_MetadataQuerier_NumEntries_1=P.asm.Ga).apply(null,arguments)},Ve=P._emscripten_bind_MetadataQuerier_GetEntryName_2=function(){return(Ve=P._emscripten_bind_MetadataQuerier_GetEntryName_2=P.asm.Ha).apply(null,arguments)},ke=P._emscripten_bind_MetadataQuerier___destroy___0=function(){return(ke=P._emscripten_bind_MetadataQuerier___destroy___0=P.asm.Ia).apply(null,arguments)},ze=P._emscripten_bind_Decoder_Decoder_0=function(){return(ze=P._emscripten_bind_Decoder_Decoder_0=P.asm.Ja).apply(null,arguments)},He=P._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=function(){return(He=P._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=P.asm.Ka).apply(null,arguments)},We=P._emscripten_bind_Decoder_DecodeArrayToMesh_3=function(){return(We=P._emscripten_bind_Decoder_DecodeArrayToMesh_3=P.asm.La).apply(null,arguments)},Ye=P._emscripten_bind_Decoder_GetAttributeId_2=function(){return(Ye=P._emscripten_bind_Decoder_GetAttributeId_2=P.asm.Ma).apply(null,arguments)},Xe=P._emscripten_bind_Decoder_GetAttributeIdByName_2=function(){return(Xe=P._emscripten_bind_Decoder_GetAttributeIdByName_2=P.asm.Na).apply(null,arguments)},qe=P._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=function(){return(qe=P._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=P.asm.Oa).apply(null,arguments)},Ke=P._emscripten_bind_Decoder_GetAttribute_2=function(){return(Ke=P._emscripten_bind_Decoder_GetAttribute_2=P.asm.Pa).apply(null,arguments)},Qe=P._emscripten_bind_Decoder_GetAttributeByUniqueId_2=function(){return(Qe=P._emscripten_bind_Decoder_GetAttributeByUniqueId_2=P.asm.Qa).apply(null,arguments)},$e=P._emscripten_bind_Decoder_GetMetadata_1=function(){return($e=P._emscripten_bind_Decoder_GetMetadata_1=P.asm.Ra).apply(null,arguments)},Je=P._emscripten_bind_Decoder_GetAttributeMetadata_2=function(){return(Je=P._emscripten_bind_Decoder_GetAttributeMetadata_2=P.asm.Sa).apply(null,arguments)},Ze=P._emscripten_bind_Decoder_GetFaceFromMesh_3=function(){return(Ze=P._emscripten_bind_Decoder_GetFaceFromMesh_3=P.asm.Ta).apply(null,arguments)},tr=P._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=function(){return(tr=P._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=P.asm.Ua).apply(null,arguments)},er=P._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=function(){return(er=P._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=P.asm.Va).apply(null,arguments)},rr=P._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=function(){return(rr=P._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=P.asm.Wa).apply(null,arguments)},nr=P._emscripten_bind_Decoder_GetAttributeFloat_3=function(){return(nr=P._emscripten_bind_Decoder_GetAttributeFloat_3=P.asm.Xa).apply(null,arguments)},sr=P._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=function(){return(sr=P._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=P.asm.Ya).apply(null,arguments)},ir=P._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=function(){return(ir=P._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=P.asm.Za).apply(null,arguments)},or=P._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=function(){return(or=P._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=P.asm._a).apply(null,arguments)},ar=P._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=function(){return(ar=P._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=P.asm.$a).apply(null,arguments)},cr=P._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=function(){return(cr=P._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=P.asm.ab).apply(null,arguments)},ur=P._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=function(){return(ur=P._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=P.asm.bb).apply(null,arguments)},pr=P._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=function(){return(pr=P._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=P.asm.cb).apply(null,arguments)},lr=P._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=function(){return(lr=P._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=P.asm.db).apply(null,arguments)},_r=P._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=function(){return(_r=P._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=P.asm.eb).apply(null,arguments)},fr=P._emscripten_bind_Decoder_SkipAttributeTransform_1=function(){return(fr=P._emscripten_bind_Decoder_SkipAttributeTransform_1=P.asm.fb).apply(null,arguments)},hr=P._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=function(){return(hr=P._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=P.asm.gb).apply(null,arguments)},dr=P._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=function(){return(dr=P._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=P.asm.hb).apply(null,arguments)},yr=P._emscripten_bind_Decoder_DecodeBufferToMesh_2=function(){return(yr=P._emscripten_bind_Decoder_DecodeBufferToMesh_2=P.asm.ib).apply(null,arguments)},mr=P._emscripten_bind_Decoder___destroy___0=function(){return(mr=P._emscripten_bind_Decoder___destroy___0=P.asm.jb).apply(null,arguments)},gr=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=function(){return(gr=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=P.asm.kb).apply(null,arguments)},br=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=function(){return(br=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=P.asm.lb).apply(null,arguments)},Tr=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=function(){return(Tr=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=P.asm.mb).apply(null,arguments)},Er=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=function(){return(Er=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=P.asm.nb).apply(null,arguments)},Ar=P._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(Ar=P._emscripten_enum_draco_GeometryAttribute_Type_INVALID=P.asm.ob).apply(null,arguments)},xr=P._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(xr=P._emscripten_enum_draco_GeometryAttribute_Type_POSITION=P.asm.pb).apply(null,arguments)},Ir=P._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(Ir=P._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=P.asm.qb).apply(null,arguments)},Rr=P._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(Rr=P._emscripten_enum_draco_GeometryAttribute_Type_COLOR=P.asm.rb).apply(null,arguments)},Mr=P._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(Mr=P._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=P.asm.sb).apply(null,arguments)},Sr=P._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(Sr=P._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=P.asm.tb).apply(null,arguments)},vr=P._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return(vr=P._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=P.asm.ub).apply(null,arguments)},Nr=P._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(Nr=P._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=P.asm.vb).apply(null,arguments)},wr=P._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(wr=P._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=P.asm.wb).apply(null,arguments)},Or=P._emscripten_enum_draco_DataType_DT_INVALID=function(){return(Or=P._emscripten_enum_draco_DataType_DT_INVALID=P.asm.xb).apply(null,arguments)},Dr=P._emscripten_enum_draco_DataType_DT_INT8=function(){return(Dr=P._emscripten_enum_draco_DataType_DT_INT8=P.asm.yb).apply(null,arguments)},Cr=P._emscripten_enum_draco_DataType_DT_UINT8=function(){return(Cr=P._emscripten_enum_draco_DataType_DT_UINT8=P.asm.zb).apply(null,arguments)},jr=P._emscripten_enum_draco_DataType_DT_INT16=function(){return(jr=P._emscripten_enum_draco_DataType_DT_INT16=P.asm.Ab).apply(null,arguments)},Fr=P._emscripten_enum_draco_DataType_DT_UINT16=function(){return(Fr=P._emscripten_enum_draco_DataType_DT_UINT16=P.asm.Bb).apply(null,arguments)},Ur=P._emscripten_enum_draco_DataType_DT_INT32=function(){return(Ur=P._emscripten_enum_draco_DataType_DT_INT32=P.asm.Cb).apply(null,arguments)},Pr=P._emscripten_enum_draco_DataType_DT_UINT32=function(){return(Pr=P._emscripten_enum_draco_DataType_DT_UINT32=P.asm.Db).apply(null,arguments)},Lr=P._emscripten_enum_draco_DataType_DT_INT64=function(){return(Lr=P._emscripten_enum_draco_DataType_DT_INT64=P.asm.Eb).apply(null,arguments)},Br=P._emscripten_enum_draco_DataType_DT_UINT64=function(){return(Br=P._emscripten_enum_draco_DataType_DT_UINT64=P.asm.Fb).apply(null,arguments)},Gr=P._emscripten_enum_draco_DataType_DT_FLOAT32=function(){return(Gr=P._emscripten_enum_draco_DataType_DT_FLOAT32=P.asm.Gb).apply(null,arguments)},Vr=P._emscripten_enum_draco_DataType_DT_FLOAT64=function(){return(Vr=P._emscripten_enum_draco_DataType_DT_FLOAT64=P.asm.Hb).apply(null,arguments)},kr=P._emscripten_enum_draco_DataType_DT_BOOL=function(){return(kr=P._emscripten_enum_draco_DataType_DT_BOOL=P.asm.Ib).apply(null,arguments)},zr=P._emscripten_enum_draco_DataType_DT_TYPES_COUNT=function(){return(zr=P._emscripten_enum_draco_DataType_DT_TYPES_COUNT=P.asm.Jb).apply(null,arguments)},Hr=P._emscripten_enum_draco_StatusCode_OK=function(){return(Hr=P._emscripten_enum_draco_StatusCode_OK=P.asm.Kb).apply(null,arguments)},Wr=P._emscripten_enum_draco_StatusCode_DRACO_ERROR=function(){return(Wr=P._emscripten_enum_draco_StatusCode_DRACO_ERROR=P.asm.Lb).apply(null,arguments)},Yr=P._emscripten_enum_draco_StatusCode_IO_ERROR=function(){return(Yr=P._emscripten_enum_draco_StatusCode_IO_ERROR=P.asm.Mb).apply(null,arguments)},Xr=P._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=function(){return(Xr=P._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=P.asm.Nb).apply(null,arguments)},qr=P._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=function(){return(qr=P._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=P.asm.Ob).apply(null,arguments)},Kr=P._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=function(){return(Kr=P._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=P.asm.Pb).apply(null,arguments)};P._malloc=function(){return(P._malloc=P.asm.Qb).apply(null,arguments)},P._free=function(){return(P._free=P.asm.Rb).apply(null,arguments)};var Qr,$r=function(){return($r=P.asm.Sb).apply(null,arguments)};if(P.___start_em_js=11660,P.___stop_em_js=11758,_t=function t(){Qr||u(),Qr||(_t=t)},P.preInit)for("function"==typeof P.preInit&&(P.preInit=[P.preInit]);0<P.preInit.length;)P.preInit.pop()();u(),p.prototype=Object.create(p.prototype),p.prototype.constructor=p,p.prototype.__class__=p,p.__cache__={},P.WrapperObject=p,P.getCache=l,P.wrapPointer=_,P.castObject=function(t,e){return _(t.ptr,e)},P.NULL=_(0),P.destroy=function(t){if(!t.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";t.__destroy__(),delete l(t.__class__)[t.ptr]},P.compare=function(t,e){return t.ptr===e.ptr},P.getPointer=function(t){return t.ptr},P.getClass=function(t){return t.__class__};var Jr={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Jr.needed){for(var t=0;t<Jr.temps.length;t++)P._free(Jr.temps[t]);Jr.temps.length=0,P._free(Jr.buffer),Jr.buffer=0,Jr.size+=Jr.needed,Jr.needed=0}Jr.buffer||(Jr.size+=128,Jr.buffer=P._malloc(Jr.size),Jr.buffer||i(void 0)),Jr.pos=0},alloc:function(t,e){return Jr.buffer||i(void 0),t=7+(t=t.length*e.BYTES_PER_ELEMENT)&-8,Jr.pos+t>=Jr.size?(0<t||i(void 0),Jr.needed+=t,e=P._malloc(t),Jr.temps.push(e)):(e=Jr.buffer+Jr.pos,Jr.pos+=t),e},copy:function(t,e,r){switch(r>>>=0,e.BYTES_PER_ELEMENT){case 2:r>>>=1;break;case 4:r>>>=2;break;case 8:r>>>=3}for(var n=0;n<t.length;n++)e[r+n]=t[n]}};return d.prototype=Object.create(p.prototype),d.prototype.constructor=d,d.prototype.__class__=d,d.__cache__={},P.VoidPtr=d,d.prototype.__destroy__=d.prototype.__destroy__=function(){dt(this.ptr)},y.prototype=Object.create(p.prototype),y.prototype.constructor=y,y.prototype.__class__=y,y.__cache__={},P.DecoderBuffer=y,y.prototype.Init=y.prototype.Init=function(t,e){var r=this.ptr;Jr.prepare(),"object"==typeof t&&(t=h(t)),e&&"object"==typeof e&&(e=e.ptr),mt(r,t,e)},y.prototype.__destroy__=y.prototype.__destroy__=function(){gt(this.ptr)},m.prototype=Object.create(p.prototype),m.prototype.constructor=m,m.prototype.__class__=m,m.__cache__={},P.AttributeTransformData=m,m.prototype.transform_type=m.prototype.transform_type=function(){return Tt(this.ptr)},m.prototype.__destroy__=m.prototype.__destroy__=function(){Et(this.ptr)},g.prototype=Object.create(p.prototype),g.prototype.constructor=g,g.prototype.__class__=g,g.__cache__={},P.GeometryAttribute=g,g.prototype.__destroy__=g.prototype.__destroy__=function(){xt(this.ptr)},b.prototype=Object.create(p.prototype),b.prototype.constructor=b,b.prototype.__class__=b,b.__cache__={},P.PointAttribute=b,b.prototype.size=b.prototype.size=function(){return Rt(this.ptr)},b.prototype.GetAttributeTransformData=b.prototype.GetAttributeTransformData=function(){return _(Mt(this.ptr),m)},b.prototype.attribute_type=b.prototype.attribute_type=function(){return St(this.ptr)},b.prototype.data_type=b.prototype.data_type=function(){return vt(this.ptr)},b.prototype.num_components=b.prototype.num_components=function(){return Nt(this.ptr)},b.prototype.normalized=b.prototype.normalized=function(){return!!wt(this.ptr)},b.prototype.byte_stride=b.prototype.byte_stride=function(){return Ot(this.ptr)},b.prototype.byte_offset=b.prototype.byte_offset=function(){return Dt(this.ptr)},b.prototype.unique_id=b.prototype.unique_id=function(){return Ct(this.ptr)},b.prototype.__destroy__=b.prototype.__destroy__=function(){jt(this.ptr)},T.prototype=Object.create(p.prototype),T.prototype.constructor=T,T.prototype.__class__=T,T.__cache__={},P.AttributeQuantizationTransform=T,T.prototype.InitFromAttribute=T.prototype.InitFromAttribute=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),!!Ut(e,t)},T.prototype.quantization_bits=T.prototype.quantization_bits=function(){return Pt(this.ptr)},T.prototype.min_value=T.prototype.min_value=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),Lt(e,t)},T.prototype.range=T.prototype.range=function(){return Bt(this.ptr)},T.prototype.__destroy__=T.prototype.__destroy__=function(){Gt(this.ptr)},E.prototype=Object.create(p.prototype),E.prototype.constructor=E,E.prototype.__class__=E,E.__cache__={},P.AttributeOctahedronTransform=E,E.prototype.InitFromAttribute=E.prototype.InitFromAttribute=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),!!kt(e,t)},E.prototype.quantization_bits=E.prototype.quantization_bits=function(){return zt(this.ptr)},E.prototype.__destroy__=E.prototype.__destroy__=function(){Ht(this.ptr)},A.prototype=Object.create(p.prototype),A.prototype.constructor=A,A.prototype.__class__=A,A.__cache__={},P.PointCloud=A,A.prototype.num_attributes=A.prototype.num_attributes=function(){return Yt(this.ptr)},A.prototype.num_points=A.prototype.num_points=function(){return Xt(this.ptr)},A.prototype.__destroy__=A.prototype.__destroy__=function(){qt(this.ptr)},x.prototype=Object.create(p.prototype),x.prototype.constructor=x,x.prototype.__class__=x,x.__cache__={},P.Mesh=x,x.prototype.num_faces=x.prototype.num_faces=function(){return Qt(this.ptr)},x.prototype.num_attributes=x.prototype.num_attributes=function(){return $t(this.ptr)},x.prototype.num_points=x.prototype.num_points=function(){return Jt(this.ptr)},x.prototype.__destroy__=x.prototype.__destroy__=function(){Zt(this.ptr)},I.prototype=Object.create(p.prototype),I.prototype.constructor=I,I.prototype.__class__=I,I.__cache__={},P.Metadata=I,I.prototype.__destroy__=I.prototype.__destroy__=function(){ee(this.ptr)},R.prototype=Object.create(p.prototype),R.prototype.constructor=R,R.prototype.__class__=R,R.__cache__={},P.Status=R,R.prototype.code=R.prototype.code=function(){return re(this.ptr)},R.prototype.ok=R.prototype.ok=function(){return!!ne(this.ptr)},R.prototype.error_msg=R.prototype.error_msg=function(){return e(se(this.ptr))},R.prototype.__destroy__=R.prototype.__destroy__=function(){ie(this.ptr)},M.prototype=Object.create(p.prototype),M.prototype.constructor=M,M.prototype.__class__=M,M.__cache__={},P.DracoFloat32Array=M,M.prototype.GetValue=M.prototype.GetValue=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),ae(e,t)},M.prototype.size=M.prototype.size=function(){return ce(this.ptr)},M.prototype.__destroy__=M.prototype.__destroy__=function(){ue(this.ptr)},S.prototype=Object.create(p.prototype),S.prototype.constructor=S,S.prototype.__class__=S,S.__cache__={},P.DracoInt8Array=S,S.prototype.GetValue=S.prototype.GetValue=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),le(e,t)},S.prototype.size=S.prototype.size=function(){return _e(this.ptr)},S.prototype.__destroy__=S.prototype.__destroy__=function(){fe(this.ptr)},v.prototype=Object.create(p.prototype),v.prototype.constructor=v,v.prototype.__class__=v,v.__cache__={},P.DracoUInt8Array=v,v.prototype.GetValue=v.prototype.GetValue=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),de(e,t)},v.prototype.size=v.prototype.size=function(){return ye(this.ptr)},v.prototype.__destroy__=v.prototype.__destroy__=function(){me(this.ptr)},N.prototype=Object.create(p.prototype),N.prototype.constructor=N,N.prototype.__class__=N,N.__cache__={},P.DracoInt16Array=N,N.prototype.GetValue=N.prototype.GetValue=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),be(e,t)},N.prototype.size=N.prototype.size=function(){return Te(this.ptr)},N.prototype.__destroy__=N.prototype.__destroy__=function(){Ee(this.ptr)},w.prototype=Object.create(p.prototype),w.prototype.constructor=w,w.prototype.__class__=w,w.__cache__={},P.DracoUInt16Array=w,w.prototype.GetValue=w.prototype.GetValue=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),xe(e,t)},w.prototype.size=w.prototype.size=function(){return Ie(this.ptr)},w.prototype.__destroy__=w.prototype.__destroy__=function(){Re(this.ptr)},O.prototype=Object.create(p.prototype),O.prototype.constructor=O,O.prototype.__class__=O,O.__cache__={},P.DracoInt32Array=O,O.prototype.GetValue=O.prototype.GetValue=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),Se(e,t)},O.prototype.size=O.prototype.size=function(){return ve(this.ptr)},O.prototype.__destroy__=O.prototype.__destroy__=function(){Ne(this.ptr)},D.prototype=Object.create(p.prototype),D.prototype.constructor=D,D.prototype.__class__=D,D.__cache__={},P.DracoUInt32Array=D,D.prototype.GetValue=D.prototype.GetValue=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),Oe(e,t)},D.prototype.size=D.prototype.size=function(){return De(this.ptr)},D.prototype.__destroy__=D.prototype.__destroy__=function(){Ce(this.ptr)},C.prototype=Object.create(p.prototype),C.prototype.constructor=C,C.prototype.__class__=C,C.__cache__={},P.MetadataQuerier=C,C.prototype.HasEntry=C.prototype.HasEntry=function(t,e){var r=this.ptr;return Jr.prepare(),t&&"object"==typeof t&&(t=t.ptr),e=e&&"object"==typeof e?e.ptr:f(e),!!Fe(r,t,e)},C.prototype.GetIntEntry=C.prototype.GetIntEntry=function(t,e){var r=this.ptr;return Jr.prepare(),t&&"object"==typeof t&&(t=t.ptr),e=e&&"object"==typeof e?e.ptr:f(e),Ue(r,t,e)},C.prototype.GetIntEntryArray=C.prototype.GetIntEntryArray=function(t,e,r){var n=this.ptr;Jr.prepare(),t&&"object"==typeof t&&(t=t.ptr),e=e&&"object"==typeof e?e.ptr:f(e),r&&"object"==typeof r&&(r=r.ptr),Pe(n,t,e,r)},C.prototype.GetDoubleEntry=C.prototype.GetDoubleEntry=function(t,e){var r=this.ptr;return Jr.prepare(),t&&"object"==typeof t&&(t=t.ptr),e=e&&"object"==typeof e?e.ptr:f(e),Le(r,t,e)},C.prototype.GetStringEntry=C.prototype.GetStringEntry=function(t,r){var n=this.ptr;return Jr.prepare(),t&&"object"==typeof t&&(t=t.ptr),r=r&&"object"==typeof r?r.ptr:f(r),e(Be(n,t,r))},C.prototype.NumEntries=C.prototype.NumEntries=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),Ge(e,t)},C.prototype.GetEntryName=C.prototype.GetEntryName=function(t,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),r&&"object"==typeof r&&(r=r.ptr),e(Ve(n,t,r))},C.prototype.__destroy__=C.prototype.__destroy__=function(){ke(this.ptr)},j.prototype=Object.create(p.prototype),j.prototype.constructor=j,j.prototype.__class__=j,j.__cache__={},P.Decoder=j,j.prototype.DecodeArrayToPointCloud=j.prototype.DecodeArrayToPointCloud=function(t,e,r){var n=this.ptr;return Jr.prepare(),"object"==typeof t&&(t=h(t)),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),_(He(n,t,e,r),R)},j.prototype.DecodeArrayToMesh=j.prototype.DecodeArrayToMesh=function(t,e,r){var n=this.ptr;return Jr.prepare(),"object"==typeof t&&(t=h(t)),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),_(We(n,t,e,r),R)},j.prototype.GetAttributeId=j.prototype.GetAttributeId=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),Ye(r,t,e)},j.prototype.GetAttributeIdByName=j.prototype.GetAttributeIdByName=function(t,e){var r=this.ptr;return Jr.prepare(),t&&"object"==typeof t&&(t=t.ptr),e=e&&"object"==typeof e?e.ptr:f(e),Xe(r,t,e)},j.prototype.GetAttributeIdByMetadataEntry=j.prototype.GetAttributeIdByMetadataEntry=function(t,e,r){var n=this.ptr;return Jr.prepare(),t&&"object"==typeof t&&(t=t.ptr),e=e&&"object"==typeof e?e.ptr:f(e),r=r&&"object"==typeof r?r.ptr:f(r),qe(n,t,e,r)},j.prototype.GetAttribute=j.prototype.GetAttribute=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),_(Ke(r,t,e),b)},j.prototype.GetAttributeByUniqueId=j.prototype.GetAttributeByUniqueId=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),_(Qe(r,t,e),b)},j.prototype.GetMetadata=j.prototype.GetMetadata=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),_($e(e,t),I)},j.prototype.GetAttributeMetadata=j.prototype.GetAttributeMetadata=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),_(Je(r,t,e),I)},j.prototype.GetFaceFromMesh=j.prototype.GetFaceFromMesh=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!Ze(n,t,e,r)},j.prototype.GetTriangleStripsFromMesh=j.prototype.GetTriangleStripsFromMesh=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),tr(r,t,e)},j.prototype.GetTrianglesUInt16Array=j.prototype.GetTrianglesUInt16Array=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!er(n,t,e,r)},j.prototype.GetTrianglesUInt32Array=j.prototype.GetTrianglesUInt32Array=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!rr(n,t,e,r)},j.prototype.GetAttributeFloat=j.prototype.GetAttributeFloat=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!nr(n,t,e,r)},j.prototype.GetAttributeFloatForAllPoints=j.prototype.GetAttributeFloatForAllPoints=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!sr(n,t,e,r)},j.prototype.GetAttributeIntForAllPoints=j.prototype.GetAttributeIntForAllPoints=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!ir(n,t,e,r)},j.prototype.GetAttributeInt8ForAllPoints=j.prototype.GetAttributeInt8ForAllPoints=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!or(n,t,e,r)},j.prototype.GetAttributeUInt8ForAllPoints=j.prototype.GetAttributeUInt8ForAllPoints=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!ar(n,t,e,r)},j.prototype.GetAttributeInt16ForAllPoints=j.prototype.GetAttributeInt16ForAllPoints=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!cr(n,t,e,r)},j.prototype.GetAttributeUInt16ForAllPoints=j.prototype.GetAttributeUInt16ForAllPoints=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!ur(n,t,e,r)},j.prototype.GetAttributeInt32ForAllPoints=j.prototype.GetAttributeInt32ForAllPoints=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!pr(n,t,e,r)},j.prototype.GetAttributeUInt32ForAllPoints=j.prototype.GetAttributeUInt32ForAllPoints=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!lr(n,t,e,r)},j.prototype.GetAttributeDataArrayForAllPoints=j.prototype.GetAttributeDataArrayForAllPoints=function(t,e,r,n,s){var i=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),s&&"object"==typeof s&&(s=s.ptr),!!_r(i,t,e,r,n,s)},j.prototype.SkipAttributeTransform=j.prototype.SkipAttributeTransform=function(t){var e=this.ptr;t&&"object"==typeof t&&(t=t.ptr),fr(e,t)},j.prototype.GetEncodedGeometryType_Deprecated=j.prototype.GetEncodedGeometryType_Deprecated=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),hr(e,t)},j.prototype.DecodeBufferToPointCloud=j.prototype.DecodeBufferToPointCloud=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),_(dr(r,t,e),R)},j.prototype.DecodeBufferToMesh=j.prototype.DecodeBufferToMesh=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),_(yr(r,t,e),R)},j.prototype.__destroy__=j.prototype.__destroy__=function(){mr(this.ptr)},function(){function t(){P.ATTRIBUTE_INVALID_TRANSFORM=gr(),P.ATTRIBUTE_NO_TRANSFORM=br(),P.ATTRIBUTE_QUANTIZATION_TRANSFORM=Tr(),P.ATTRIBUTE_OCTAHEDRON_TRANSFORM=Er(),P.INVALID=Ar(),P.POSITION=xr(),P.NORMAL=Ir(),P.COLOR=Rr(),P.TEX_COORD=Mr(),P.GENERIC=Sr(),P.INVALID_GEOMETRY_TYPE=vr(),P.POINT_CLOUD=Nr(),P.TRIANGULAR_MESH=wr(),P.DT_INVALID=Or(),P.DT_INT8=Dr(),P.DT_UINT8=Cr(),P.DT_INT16=jr(),P.DT_UINT16=Fr(),P.DT_INT32=Ur(),P.DT_UINT32=Pr(),P.DT_INT64=Lr(),P.DT_UINT64=Br(),P.DT_FLOAT32=Gr(),P.DT_FLOAT64=Vr(),P.DT_BOOL=kr(),P.DT_TYPES_COUNT=zr(),P.OK=Hr(),P.DRACO_ERROR=Wr(),P.IO_ERROR=Yr(),P.INVALID_PARAMETER=Xr(),P.UNSUPPORTED_VERSION=qr(),P.UNKNOWN_VERSION=Kr()}ut?t():at.unshift(t)}(),"function"==typeof P.onModuleParsed&&P.onModuleParsed(),P.Decoder.prototype.GetEncodedGeometryType=function(t){if(t.__class__&&t.__class__===P.DecoderBuffer)return P.Decoder.prototype.GetEncodedGeometryType_Deprecated(t);if(8>t.byteLength)return P.INVALID_GEOMETRY_TYPE;switch(t[7]){case 0:return P.POINT_CLOUD;case 1:return P.TRIANGULAR_MESH;default:return P.INVALID_GEOMETRY_TYPE}},t.ready});t.exports=i},367:function(t,e,r){var n=n||{};n.scope={},n.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},n.arrayIterator=function(t){return{next:n.arrayIteratorImpl(t)}},n.makeIterator=function(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):n.arrayIterator(t)},n.ASSUME_ES5=!1,n.ASSUME_NO_NATIVE_MAP=!1,n.ASSUME_NO_NATIVE_SET=!1,n.SIMPLE_FROUND_POLYFILL=!1,n.ISOLATE_POLYFILLS=!1,n.FORCE_POLYFILL_PROMISE=!1,n.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,n.getGlobal=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof r.g&&r.g];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},n.global=n.getGlobal(this),n.defineProperty=n.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,r){return t==Array.prototype||t==Object.prototype||(t[e]=r.value),t},n.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),n.TRUST_ES6_POLYFILLS=!n.ISOLATE_POLYFILLS||n.IS_SYMBOL_NATIVE,n.polyfills={},n.propertyToPolyfillSymbol={},n.POLYFILL_PREFIX="$jscp$";n.polyfill=function(t,e,r,s){e&&(n.ISOLATE_POLYFILLS?n.polyfillIsolated(t,e,r,s):n.polyfillUnisolated(t,e,r,s))},n.polyfillUnisolated=function(t,e,r,s){for(r=n.global,t=t.split("."),s=0;s<t.length-1;s++){var i=t[s];if(!(i in r))return;r=r[i]}(e=e(s=r[t=t[t.length-1]]))!=s&&null!=e&&n.defineProperty(r,t,{configurable:!0,writable:!0,value:e})},n.polyfillIsolated=function(t,e,r,s){var i=t.split(".");t=1===i.length,s=i[0],s=!t&&s in n.polyfills?n.polyfills:n.global;for(var o=0;o<i.length-1;o++){var a=i[o];if(!(a in s))return;s=s[a]}i=i[i.length-1],null!=(e=e(r=n.IS_SYMBOL_NATIVE&&"es6"===r?s[i]:null))&&(t?n.defineProperty(n.polyfills,i,{configurable:!0,writable:!0,value:e}):e!==r&&(void 0===n.propertyToPolyfillSymbol[i]&&(r=1e9*Math.random()>>>0,n.propertyToPolyfillSymbol[i]=n.IS_SYMBOL_NATIVE?n.global.Symbol(i):n.POLYFILL_PREFIX+r+"$"+i),n.defineProperty(s,n.propertyToPolyfillSymbol[i],{configurable:!0,writable:!0,value:e})))},n.polyfill("Promise",(function(t){function e(){this.batch_=null}function r(t){return t instanceof i?t:new i((function(e,r){e(t)}))}if(t&&(!(n.FORCE_POLYFILL_PROMISE||n.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&void 0===n.global.PromiseRejectionEvent)||!n.global.Promise||-1===n.global.Promise.toString().indexOf("[native code]")))return t;e.prototype.asyncExecute=function(t){if(null==this.batch_){this.batch_=[];var e=this;this.asyncExecuteFunction((function(){e.executeBatch_()}))}this.batch_.push(t)};var s=n.global.setTimeout;e.prototype.asyncExecuteFunction=function(t){s(t,0)},e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var t=this.batch_;this.batch_=[];for(var e=0;e<t.length;++e){var r=t[e];t[e]=null;try{r()}catch(t){this.asyncThrow_(t)}}}this.batch_=null},e.prototype.asyncThrow_=function(t){this.asyncExecuteFunction((function(){throw t}))};var i=function(t){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var e=this.createResolveAndReject_();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}};i.prototype.createResolveAndReject_=function(){function t(t){return function(n){r||(r=!0,t.call(e,n))}}var e=this,r=!1;return{resolve:t(this.resolveTo_),reject:t(this.reject_)}},i.prototype.resolveTo_=function(t){if(t===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof i)this.settleSameAsPromise_(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.resolveToNonPromiseObj_(t):this.fulfill_(t)}},i.prototype.resolveToNonPromiseObj_=function(t){var e=void 0;try{e=t.then}catch(t){return void this.reject_(t)}"function"==typeof e?this.settleSameAsThenable_(e,t):this.fulfill_(t)},i.prototype.reject_=function(t){this.settle_(2,t)},i.prototype.fulfill_=function(t){this.settle_(1,t)},i.prototype.settle_=function(t,e){if(0!=this.state_)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.state_);this.state_=t,this.result_=e,2===this.state_&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},i.prototype.scheduleUnhandledRejectionCheck_=function(){var t=this;s((function(){if(t.notifyUnhandledRejection_()){var e=n.global.console;void 0!==e&&e.error(t.result_)}}),1)},i.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var t=n.global.CustomEvent,e=n.global.Event,r=n.global.dispatchEvent;return void 0===r||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=n.global.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.result_,r(t))},i.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var t=0;t<this.onSettledCallbacks_.length;++t)o.asyncExecute(this.onSettledCallbacks_[t]);this.onSettledCallbacks_=null}};var o=new e;return i.prototype.settleSameAsPromise_=function(t){var e=this.createResolveAndReject_();t.callWhenSettled_(e.resolve,e.reject)},i.prototype.settleSameAsThenable_=function(t,e){var r=this.createResolveAndReject_();try{t.call(e,r.resolve,r.reject)}catch(t){r.reject(t)}},i.prototype.then=function(t,e){function r(t,e){return"function"==typeof t?function(e){try{n(t(e))}catch(t){s(t)}}:e}var n,s,o=new i((function(t,e){n=t,s=e}));return this.callWhenSettled_(r(t,n),r(e,s)),o},i.prototype.catch=function(t){return this.then(void 0,t)},i.prototype.callWhenSettled_=function(t,e){function r(){switch(n.state_){case 1:t(n.result_);break;case 2:e(n.result_);break;default:throw Error("Unexpected state: "+n.state_)}}var n=this;null==this.onSettledCallbacks_?o.asyncExecute(r):this.onSettledCallbacks_.push(r),this.isRejectionHandled_=!0},i.resolve=r,i.reject=function(t){return new i((function(e,r){r(t)}))},i.race=function(t){return new i((function(e,s){for(var i=n.makeIterator(t),o=i.next();!o.done;o=i.next())r(o.value).callWhenSettled_(e,s)}))},i.all=function(t){var e=n.makeIterator(t),s=e.next();return s.done?r([]):new i((function(t,n){function i(e){return function(r){o[e]=r,0==--a&&t(o)}}var o=[],a=0;do{o.push(void 0),a++,r(s.value).callWhenSettled_(i(o.length-1),n),s=e.next()}while(!s.done)}))},i}),"es6","es3"),n.owns=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.assign=n.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(t,e){for(var r=1;r<arguments.length;r++){var s=arguments[r];if(s)for(var i in s)n.owns(s,i)&&(t[i]=s[i])}return t},n.polyfill("Object.assign",(function(t){return t||n.assign}),"es6","es3"),n.checkStringArgs=function(t,e,r){if(null==t)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return t+""},n.polyfill("String.prototype.startsWith",(function(t){return t||function(t,e){var r=n.checkStringArgs(this,t,"startsWith");t+="";var s=r.length,i=t.length;e=Math.max(0,Math.min(0|e,r.length));for(var o=0;o<i&&e<s;)if(r[e++]!=t[o++])return!1;return o>=i}}),"es6","es3"),n.polyfill("Array.prototype.copyWithin",(function(t){function e(t){return 1/0===(t=Number(t))||-1/0===t?t:0|t}return t||function(t,r,n){var s=this.length;if(t=e(t),r=e(r),n=void 0===n?s:e(n),t=0>t?Math.max(s+t,0):Math.min(t,s),r=0>r?Math.max(s+r,0):Math.min(r,s),n=0>n?Math.max(s+n,0):Math.min(n,s),t<r)for(;r<n;)r in this?this[t++]=this[r++]:(delete this[t++],r++);else for(t+=(n=Math.min(n,s+r-t))-r;n>r;)--n in this?this[--t]=this[n]:delete this[--t];return this}}),"es6","es3"),n.typedArrayCopyWithin=function(t){return t||Array.prototype.copyWithin},n.polyfill("Int8Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Uint8Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Uint8ClampedArray.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Int16Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Uint16Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Int32Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Uint32Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Float32Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5"),n.polyfill("Float64Array.prototype.copyWithin",n.typedArrayCopyWithin,"es6","es5");var s,i=(s=(s="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){var t=Y.buffer;O.HEAP8=X=new Int8Array(t),O.HEAP16=K=new Int16Array(t),O.HEAP32=Q=new Int32Array(t),O.HEAPU8=q=new Uint8Array(t),O.HEAPU16=new Uint16Array(t),O.HEAPU32=$=new Uint32Array(t),O.HEAPF32=J=new Float32Array(t),O.HEAPF64=new Float64Array(t)}function n(t){throw O.onAbort&&O.onAbort(t),W(t="Aborted("+t+")"),tt=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),w(t),t}function i(t){try{if(t==ct&&H)return new Uint8Array(H);if(k)return k(t);throw"both async and sync fetching of the wasm failed"}catch(t){n(t)}}function o(t){for(;0<t.length;)t.shift()(O)}function a(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(t){$[this.ptr+4>>2]=t},this.get_type=function(){return $[this.ptr+4>>2]},this.set_destructor=function(t){$[this.ptr+8>>2]=t},this.get_destructor=function(){return $[this.ptr+8>>2]},this.set_refcount=function(t){Q[this.ptr>>2]=t},this.set_caught=function(t){X[this.ptr+12>>0]=t?1:0},this.get_caught=function(){return 0!=X[this.ptr+12>>0]},this.set_rethrown=function(t){X[this.ptr+13>>0]=t?1:0},this.get_rethrown=function(){return 0!=X[this.ptr+13>>0]},this.init=function(t,e){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){Q[this.ptr>>2]+=1},this.release_ref=function(){var t=Q[this.ptr>>2];return Q[this.ptr>>2]=t-1,1===t},this.set_adjusted_ptr=function(t){$[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return $[this.ptr+16>>2]},this.get_exception_ptr=function(){if(Qe(this.get_type()))return $[this.excPtr>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.excPtr}}function c(){function t(){if(!Ke&&(Ke=!0,O.calledRun=!0,!tt)){if(st=!0,o(rt),N(O),O.onRuntimeInitialized&&O.onRuntimeInitialized(),O.postRun)for("function"==typeof O.postRun&&(O.postRun=[O.postRun]);O.postRun.length;)nt.unshift(O.postRun.shift());o(nt)}}if(!(0<it)){if(O.preRun)for("function"==typeof O.preRun&&(O.preRun=[O.preRun]);O.preRun.length;)et.unshift(O.preRun.shift());o(et),0<it||(O.setStatus?(O.setStatus("Running..."),setTimeout((function(){setTimeout((function(){O.setStatus("")}),1),t()}),1)):t())}}function u(){}function p(t){return(t||u).__cache__}function l(t,e){var r=p(e),n=r[t];return n||((n=Object.create((e||u).prototype)).ptr=t,r[t]=n)}function _(t){if("string"==typeof t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);127>=n?e++:2047>=n?e+=2:55296<=n&&57343>=n?(e+=4,++r):e+=3}if(r=0,0<(n=(e=Array(e+1)).length)){n=r+n-1;for(var s=0;s<t.length;++s){var i=t.charCodeAt(s);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++s)),127>=i){if(r>=n)break;e[r++]=i}else{if(2047>=i){if(r+1>=n)break;e[r++]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;e[r++]=224|i>>12}else{if(r+3>=n)break;e[r++]=240|i>>18,e[r++]=128|i>>12&63}e[r++]=128|i>>6&63}e[r++]=128|63&i}}e[r]=0}return t=$e.alloc(e,X),$e.copy(e,X,t),t}return t}function f(t){if("object"==typeof t){var e=$e.alloc(t,X);return $e.copy(t,X,e),e}return t}function h(t){if("object"==typeof t){var e=$e.alloc(t,K);return $e.copy(t,K,e),e}return t}function d(t){if("object"==typeof t){var e=$e.alloc(t,Q);return $e.copy(t,Q,e),e}return t}function y(t){if("object"==typeof t){var e=$e.alloc(t,J);return $e.copy(t,J,e),e}return t}function m(){throw"cannot construct a VoidPtr, no constructor in IDL"}function g(){this.ptr=lt(),p(g)[this.ptr]=this}function b(){this.ptr=ft(),p(b)[this.ptr]=this}function T(){this.ptr=xt(),p(T)[this.ptr]=this}function E(){this.ptr=St(),p(E)[this.ptr]=this}function A(){this.ptr=Ct(),p(A)[this.ptr]=this}function x(){this.ptr=Ft(),p(x)[this.ptr]=this}function I(){this.ptr=Bt(),p(I)[this.ptr]=this}function R(){this.ptr=Wt(),p(R)[this.ptr]=this}function M(){this.ptr=re(),p(M)[this.ptr]=this}function S(){this.ptr=me(),p(S)[this.ptr]=this}function v(t){t&&"object"==typeof t&&(t=t.ptr),this.ptr=ve(t),p(v)[this.ptr]=this}var N,w,O=void 0!==(t=void 0===t?{}:t)?t:{};O.ready=new Promise((function(t,e){N=t,w=e}));var D=!1,C=!1;O.onRuntimeInitialized=function(){D=!0,C&&"function"==typeof O.onModuleLoaded&&O.onModuleLoaded(O)},O.onModuleParsed=function(){C=!0,D&&"function"==typeof O.onModuleLoaded&&O.onModuleLoaded(O)},O.isVersionSupported=function(t){return"string"==typeof t&&!(2>(t=t.split(".")).length||3<t.length)&&(1==t[0]&&0<=t[1]&&5>=t[1]||!(0!=t[0]||10<t[1]))};var j=Object.assign({},O),F="object"==typeof window,U="function"==typeof importScripts,P="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,L="";if(P){var B=r(Object(function(){var t=new Error("Cannot find module 'fs'");throw t.code="MODULE_NOT_FOUND",t}())),G=r(66);L=U?G.dirname(L)+"/":"//";var V=function(t,e){return t=t.startsWith("file://")?new URL(t):G.normalize(t),B.readFileSync(t,e?void 0:"utf8")},k=function(t){return(t=V(t,!0)).buffer||(t=new Uint8Array(t)),t},z=function(t,e,r){t=t.startsWith("file://")?new URL(t):G.normalize(t),B.readFile(t,(function(t,n){t?r(t):e(n.buffer)}))};1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),O.inspect=function(){return"[Emscripten Module object]"}}else(F||U)&&(U?L=self.location.href:"undefined"!=typeof document&&document.currentScript&&(L=document.currentScript.src),s&&(L=s),L=0!==L.indexOf("blob:")?L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1):"",V=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},U&&(k=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),z=function(t,e,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?e(n.response):r()},n.onerror=r,n.send(null)});O.print||console.log.bind(console);var H,W=O.printErr||console.warn.bind(console);Object.assign(O,j),j=null,O.wasmBinary&&(H=O.wasmBinary),"object"!=typeof WebAssembly&&n("no native wasm support detected");var Y,X,q,K,Q,$,J,Z,tt=!1,et=[],rt=[],nt=[],st=!1,it=0,ot=null,at=null,ct="draco_encoder.wasm";ct.startsWith("data:application/octet-stream;base64,")||(Z=ct,ct=O.locateFile?O.locateFile(Z,L):L+Z);var ut={b:function(t,e,r){throw new a(t).init(e,r),t},a:function(){n("")},d:function(t,e,r){q.copyWithin(t,e,e+r)},c:function(t){var r=q.length;if(2147483648<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var s=r*(1+.2/n);s=Math.min(s,t+100663296);var i=Math;s=Math.max(t,s),i=i.min.call(i,2147483648,s+(65536-s%65536)%65536);t:{s=Y.buffer;try{Y.grow(i-s.byteLength+65535>>>16),e();var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1}};!function(){function t(t,r){O.asm=t.exports,Y=O.asm.e,e(),rt.unshift(O.asm.f),it--,O.monitorRunDependencies&&O.monitorRunDependencies(it),0==it&&(null!==ot&&(clearInterval(ot),ot=null),at&&(t=at,at=null,t()))}function r(e){t(e.instance)}function s(t){return function(){if(!H&&(F||U)){if("function"==typeof fetch&&!ct.startsWith("file://"))return fetch(ct,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+ct+"'";return t.arrayBuffer()})).catch((function(){return i(ct)}));if(z)return new Promise((function(t,e){z(ct,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return i(ct)}))}().then((function(t){return WebAssembly.instantiate(t,o)})).then((function(t){return t})).then(t,(function(t){W("failed to asynchronously prepare wasm: "+t),n(t)}))}var o={a:ut};if(it++,O.monitorRunDependencies&&O.monitorRunDependencies(it),O.instantiateWasm)try{return O.instantiateWasm(o,t)}catch(t){W("Module.instantiateWasm callback failed with error: "+t),w(t)}(H||"function"!=typeof WebAssembly.instantiateStreaming||ct.startsWith("data:application/octet-stream;base64,")||ct.startsWith("file://")||P||"function"!=typeof fetch?s(r):fetch(ct,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,o).then(r,(function(t){return W("wasm streaming compile failed: "+t),W("falling back to ArrayBuffer instantiation"),s(r)}))}))).catch(w)}();var pt=O._emscripten_bind_VoidPtr___destroy___0=function(){return(pt=O._emscripten_bind_VoidPtr___destroy___0=O.asm.h).apply(null,arguments)},lt=O._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return(lt=O._emscripten_bind_GeometryAttribute_GeometryAttribute_0=O.asm.i).apply(null,arguments)},_t=O._emscripten_bind_GeometryAttribute___destroy___0=function(){return(_t=O._emscripten_bind_GeometryAttribute___destroy___0=O.asm.j).apply(null,arguments)},ft=O._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(ft=O._emscripten_bind_PointAttribute_PointAttribute_0=O.asm.k).apply(null,arguments)},ht=O._emscripten_bind_PointAttribute_size_0=function(){return(ht=O._emscripten_bind_PointAttribute_size_0=O.asm.l).apply(null,arguments)},dt=O._emscripten_bind_PointAttribute_attribute_type_0=function(){return(dt=O._emscripten_bind_PointAttribute_attribute_type_0=O.asm.m).apply(null,arguments)},yt=O._emscripten_bind_PointAttribute_data_type_0=function(){return(yt=O._emscripten_bind_PointAttribute_data_type_0=O.asm.n).apply(null,arguments)},mt=O._emscripten_bind_PointAttribute_num_components_0=function(){return(mt=O._emscripten_bind_PointAttribute_num_components_0=O.asm.o).apply(null,arguments)},gt=O._emscripten_bind_PointAttribute_normalized_0=function(){return(gt=O._emscripten_bind_PointAttribute_normalized_0=O.asm.p).apply(null,arguments)},bt=O._emscripten_bind_PointAttribute_byte_stride_0=function(){return(bt=O._emscripten_bind_PointAttribute_byte_stride_0=O.asm.q).apply(null,arguments)},Tt=O._emscripten_bind_PointAttribute_byte_offset_0=function(){return(Tt=O._emscripten_bind_PointAttribute_byte_offset_0=O.asm.r).apply(null,arguments)},Et=O._emscripten_bind_PointAttribute_unique_id_0=function(){return(Et=O._emscripten_bind_PointAttribute_unique_id_0=O.asm.s).apply(null,arguments)},At=O._emscripten_bind_PointAttribute___destroy___0=function(){return(At=O._emscripten_bind_PointAttribute___destroy___0=O.asm.t).apply(null,arguments)},xt=O._emscripten_bind_PointCloud_PointCloud_0=function(){return(xt=O._emscripten_bind_PointCloud_PointCloud_0=O.asm.u).apply(null,arguments)},It=O._emscripten_bind_PointCloud_num_attributes_0=function(){return(It=O._emscripten_bind_PointCloud_num_attributes_0=O.asm.v).apply(null,arguments)},Rt=O._emscripten_bind_PointCloud_num_points_0=function(){return(Rt=O._emscripten_bind_PointCloud_num_points_0=O.asm.w).apply(null,arguments)},Mt=O._emscripten_bind_PointCloud___destroy___0=function(){return(Mt=O._emscripten_bind_PointCloud___destroy___0=O.asm.x).apply(null,arguments)},St=O._emscripten_bind_Mesh_Mesh_0=function(){return(St=O._emscripten_bind_Mesh_Mesh_0=O.asm.y).apply(null,arguments)},vt=O._emscripten_bind_Mesh_num_faces_0=function(){return(vt=O._emscripten_bind_Mesh_num_faces_0=O.asm.z).apply(null,arguments)},Nt=O._emscripten_bind_Mesh_num_attributes_0=function(){return(Nt=O._emscripten_bind_Mesh_num_attributes_0=O.asm.A).apply(null,arguments)},wt=O._emscripten_bind_Mesh_num_points_0=function(){return(wt=O._emscripten_bind_Mesh_num_points_0=O.asm.B).apply(null,arguments)},Ot=O._emscripten_bind_Mesh_set_num_points_1=function(){return(Ot=O._emscripten_bind_Mesh_set_num_points_1=O.asm.C).apply(null,arguments)},Dt=O._emscripten_bind_Mesh___destroy___0=function(){return(Dt=O._emscripten_bind_Mesh___destroy___0=O.asm.D).apply(null,arguments)},Ct=O._emscripten_bind_Metadata_Metadata_0=function(){return(Ct=O._emscripten_bind_Metadata_Metadata_0=O.asm.E).apply(null,arguments)},jt=O._emscripten_bind_Metadata___destroy___0=function(){return(jt=O._emscripten_bind_Metadata___destroy___0=O.asm.F).apply(null,arguments)},Ft=O._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(Ft=O._emscripten_bind_DracoInt8Array_DracoInt8Array_0=O.asm.G).apply(null,arguments)},Ut=O._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(Ut=O._emscripten_bind_DracoInt8Array_GetValue_1=O.asm.H).apply(null,arguments)},Pt=O._emscripten_bind_DracoInt8Array_size_0=function(){return(Pt=O._emscripten_bind_DracoInt8Array_size_0=O.asm.I).apply(null,arguments)},Lt=O._emscripten_bind_DracoInt8Array___destroy___0=function(){return(Lt=O._emscripten_bind_DracoInt8Array___destroy___0=O.asm.J).apply(null,arguments)},Bt=O._emscripten_bind_MetadataBuilder_MetadataBuilder_0=function(){return(Bt=O._emscripten_bind_MetadataBuilder_MetadataBuilder_0=O.asm.K).apply(null,arguments)},Gt=O._emscripten_bind_MetadataBuilder_AddStringEntry_3=function(){return(Gt=O._emscripten_bind_MetadataBuilder_AddStringEntry_3=O.asm.L).apply(null,arguments)},Vt=O._emscripten_bind_MetadataBuilder_AddIntEntry_3=function(){return(Vt=O._emscripten_bind_MetadataBuilder_AddIntEntry_3=O.asm.M).apply(null,arguments)},kt=O._emscripten_bind_MetadataBuilder_AddIntEntryArray_4=function(){return(kt=O._emscripten_bind_MetadataBuilder_AddIntEntryArray_4=O.asm.N).apply(null,arguments)},zt=O._emscripten_bind_MetadataBuilder_AddDoubleEntry_3=function(){return(zt=O._emscripten_bind_MetadataBuilder_AddDoubleEntry_3=O.asm.O).apply(null,arguments)},Ht=O._emscripten_bind_MetadataBuilder___destroy___0=function(){return(Ht=O._emscripten_bind_MetadataBuilder___destroy___0=O.asm.P).apply(null,arguments)},Wt=O._emscripten_bind_PointCloudBuilder_PointCloudBuilder_0=function(){return(Wt=O._emscripten_bind_PointCloudBuilder_PointCloudBuilder_0=O.asm.Q).apply(null,arguments)},Yt=O._emscripten_bind_PointCloudBuilder_AddFloatAttribute_5=function(){return(Yt=O._emscripten_bind_PointCloudBuilder_AddFloatAttribute_5=O.asm.R).apply(null,arguments)},Xt=O._emscripten_bind_PointCloudBuilder_AddInt8Attribute_5=function(){return(Xt=O._emscripten_bind_PointCloudBuilder_AddInt8Attribute_5=O.asm.S).apply(null,arguments)},qt=O._emscripten_bind_PointCloudBuilder_AddUInt8Attribute_5=function(){return(qt=O._emscripten_bind_PointCloudBuilder_AddUInt8Attribute_5=O.asm.T).apply(null,arguments)},Kt=O._emscripten_bind_PointCloudBuilder_AddInt16Attribute_5=function(){return(Kt=O._emscripten_bind_PointCloudBuilder_AddInt16Attribute_5=O.asm.U).apply(null,arguments)},Qt=O._emscripten_bind_PointCloudBuilder_AddUInt16Attribute_5=function(){return(Qt=O._emscripten_bind_PointCloudBuilder_AddUInt16Attribute_5=O.asm.V).apply(null,arguments)},$t=O._emscripten_bind_PointCloudBuilder_AddInt32Attribute_5=function(){return($t=O._emscripten_bind_PointCloudBuilder_AddInt32Attribute_5=O.asm.W).apply(null,arguments)},Jt=O._emscripten_bind_PointCloudBuilder_AddUInt32Attribute_5=function(){return(Jt=O._emscripten_bind_PointCloudBuilder_AddUInt32Attribute_5=O.asm.X).apply(null,arguments)},Zt=O._emscripten_bind_PointCloudBuilder_AddMetadata_2=function(){return(Zt=O._emscripten_bind_PointCloudBuilder_AddMetadata_2=O.asm.Y).apply(null,arguments)},te=O._emscripten_bind_PointCloudBuilder_SetMetadataForAttribute_3=function(){return(te=O._emscripten_bind_PointCloudBuilder_SetMetadataForAttribute_3=O.asm.Z).apply(null,arguments)},ee=O._emscripten_bind_PointCloudBuilder___destroy___0=function(){return(ee=O._emscripten_bind_PointCloudBuilder___destroy___0=O.asm._).apply(null,arguments)},re=O._emscripten_bind_MeshBuilder_MeshBuilder_0=function(){return(re=O._emscripten_bind_MeshBuilder_MeshBuilder_0=O.asm.$).apply(null,arguments)},ne=O._emscripten_bind_MeshBuilder_AddFacesToMesh_3=function(){return(ne=O._emscripten_bind_MeshBuilder_AddFacesToMesh_3=O.asm.aa).apply(null,arguments)},se=O._emscripten_bind_MeshBuilder_AddFloatAttributeToMesh_5=function(){return(se=O._emscripten_bind_MeshBuilder_AddFloatAttributeToMesh_5=O.asm.ba).apply(null,arguments)},ie=O._emscripten_bind_MeshBuilder_AddInt32AttributeToMesh_5=function(){return(ie=O._emscripten_bind_MeshBuilder_AddInt32AttributeToMesh_5=O.asm.ca).apply(null,arguments)},oe=O._emscripten_bind_MeshBuilder_AddMetadataToMesh_2=function(){return(oe=O._emscripten_bind_MeshBuilder_AddMetadataToMesh_2=O.asm.da).apply(null,arguments)},ae=O._emscripten_bind_MeshBuilder_AddFloatAttribute_5=function(){return(ae=O._emscripten_bind_MeshBuilder_AddFloatAttribute_5=O.asm.ea).apply(null,arguments)},ce=O._emscripten_bind_MeshBuilder_AddInt8Attribute_5=function(){return(ce=O._emscripten_bind_MeshBuilder_AddInt8Attribute_5=O.asm.fa).apply(null,arguments)},ue=O._emscripten_bind_MeshBuilder_AddUInt8Attribute_5=function(){return(ue=O._emscripten_bind_MeshBuilder_AddUInt8Attribute_5=O.asm.ga).apply(null,arguments)},pe=O._emscripten_bind_MeshBuilder_AddInt16Attribute_5=function(){return(pe=O._emscripten_bind_MeshBuilder_AddInt16Attribute_5=O.asm.ha).apply(null,arguments)},le=O._emscripten_bind_MeshBuilder_AddUInt16Attribute_5=function(){return(le=O._emscripten_bind_MeshBuilder_AddUInt16Attribute_5=O.asm.ia).apply(null,arguments)},_e=O._emscripten_bind_MeshBuilder_AddInt32Attribute_5=function(){return(_e=O._emscripten_bind_MeshBuilder_AddInt32Attribute_5=O.asm.ja).apply(null,arguments)},fe=O._emscripten_bind_MeshBuilder_AddUInt32Attribute_5=function(){return(fe=O._emscripten_bind_MeshBuilder_AddUInt32Attribute_5=O.asm.ka).apply(null,arguments)},he=O._emscripten_bind_MeshBuilder_AddMetadata_2=function(){return(he=O._emscripten_bind_MeshBuilder_AddMetadata_2=O.asm.la).apply(null,arguments)},de=O._emscripten_bind_MeshBuilder_SetMetadataForAttribute_3=function(){return(de=O._emscripten_bind_MeshBuilder_SetMetadataForAttribute_3=O.asm.ma).apply(null,arguments)},ye=O._emscripten_bind_MeshBuilder___destroy___0=function(){return(ye=O._emscripten_bind_MeshBuilder___destroy___0=O.asm.na).apply(null,arguments)},me=O._emscripten_bind_Encoder_Encoder_0=function(){return(me=O._emscripten_bind_Encoder_Encoder_0=O.asm.oa).apply(null,arguments)},ge=O._emscripten_bind_Encoder_SetEncodingMethod_1=function(){return(ge=O._emscripten_bind_Encoder_SetEncodingMethod_1=O.asm.pa).apply(null,arguments)},be=O._emscripten_bind_Encoder_SetAttributeQuantization_2=function(){return(be=O._emscripten_bind_Encoder_SetAttributeQuantization_2=O.asm.qa).apply(null,arguments)},Te=O._emscripten_bind_Encoder_SetAttributeExplicitQuantization_5=function(){return(Te=O._emscripten_bind_Encoder_SetAttributeExplicitQuantization_5=O.asm.ra).apply(null,arguments)},Ee=O._emscripten_bind_Encoder_SetSpeedOptions_2=function(){return(Ee=O._emscripten_bind_Encoder_SetSpeedOptions_2=O.asm.sa).apply(null,arguments)},Ae=O._emscripten_bind_Encoder_SetTrackEncodedProperties_1=function(){return(Ae=O._emscripten_bind_Encoder_SetTrackEncodedProperties_1=O.asm.ta).apply(null,arguments)},xe=O._emscripten_bind_Encoder_EncodeMeshToDracoBuffer_2=function(){return(xe=O._emscripten_bind_Encoder_EncodeMeshToDracoBuffer_2=O.asm.ua).apply(null,arguments)},Ie=O._emscripten_bind_Encoder_EncodePointCloudToDracoBuffer_3=function(){return(Ie=O._emscripten_bind_Encoder_EncodePointCloudToDracoBuffer_3=O.asm.va).apply(null,arguments)},Re=O._emscripten_bind_Encoder_GetNumberOfEncodedPoints_0=function(){return(Re=O._emscripten_bind_Encoder_GetNumberOfEncodedPoints_0=O.asm.wa).apply(null,arguments)},Me=O._emscripten_bind_Encoder_GetNumberOfEncodedFaces_0=function(){return(Me=O._emscripten_bind_Encoder_GetNumberOfEncodedFaces_0=O.asm.xa).apply(null,arguments)},Se=O._emscripten_bind_Encoder___destroy___0=function(){return(Se=O._emscripten_bind_Encoder___destroy___0=O.asm.ya).apply(null,arguments)},ve=O._emscripten_bind_ExpertEncoder_ExpertEncoder_1=function(){return(ve=O._emscripten_bind_ExpertEncoder_ExpertEncoder_1=O.asm.za).apply(null,arguments)},Ne=O._emscripten_bind_ExpertEncoder_SetEncodingMethod_1=function(){return(Ne=O._emscripten_bind_ExpertEncoder_SetEncodingMethod_1=O.asm.Aa).apply(null,arguments)},we=O._emscripten_bind_ExpertEncoder_SetAttributeQuantization_2=function(){return(we=O._emscripten_bind_ExpertEncoder_SetAttributeQuantization_2=O.asm.Ba).apply(null,arguments)},Oe=O._emscripten_bind_ExpertEncoder_SetAttributeExplicitQuantization_5=function(){return(Oe=O._emscripten_bind_ExpertEncoder_SetAttributeExplicitQuantization_5=O.asm.Ca).apply(null,arguments)},De=O._emscripten_bind_ExpertEncoder_SetSpeedOptions_2=function(){return(De=O._emscripten_bind_ExpertEncoder_SetSpeedOptions_2=O.asm.Da).apply(null,arguments)},Ce=O._emscripten_bind_ExpertEncoder_SetTrackEncodedProperties_1=function(){return(Ce=O._emscripten_bind_ExpertEncoder_SetTrackEncodedProperties_1=O.asm.Ea).apply(null,arguments)},je=O._emscripten_bind_ExpertEncoder_EncodeToDracoBuffer_2=function(){return(je=O._emscripten_bind_ExpertEncoder_EncodeToDracoBuffer_2=O.asm.Fa).apply(null,arguments)},Fe=O._emscripten_bind_ExpertEncoder_GetNumberOfEncodedPoints_0=function(){return(Fe=O._emscripten_bind_ExpertEncoder_GetNumberOfEncodedPoints_0=O.asm.Ga).apply(null,arguments)},Ue=O._emscripten_bind_ExpertEncoder_GetNumberOfEncodedFaces_0=function(){return(Ue=O._emscripten_bind_ExpertEncoder_GetNumberOfEncodedFaces_0=O.asm.Ha).apply(null,arguments)},Pe=O._emscripten_bind_ExpertEncoder___destroy___0=function(){return(Pe=O._emscripten_bind_ExpertEncoder___destroy___0=O.asm.Ia).apply(null,arguments)},Le=O._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(Le=O._emscripten_enum_draco_GeometryAttribute_Type_INVALID=O.asm.Ja).apply(null,arguments)},Be=O._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(Be=O._emscripten_enum_draco_GeometryAttribute_Type_POSITION=O.asm.Ka).apply(null,arguments)},Ge=O._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(Ge=O._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=O.asm.La).apply(null,arguments)},Ve=O._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(Ve=O._emscripten_enum_draco_GeometryAttribute_Type_COLOR=O.asm.Ma).apply(null,arguments)},ke=O._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(ke=O._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=O.asm.Na).apply(null,arguments)},ze=O._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(ze=O._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=O.asm.Oa).apply(null,arguments)},He=O._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return(He=O._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=O.asm.Pa).apply(null,arguments)},We=O._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(We=O._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=O.asm.Qa).apply(null,arguments)},Ye=O._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(Ye=O._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=O.asm.Ra).apply(null,arguments)},Xe=O._emscripten_enum_draco_MeshEncoderMethod_MESH_SEQUENTIAL_ENCODING=function(){return(Xe=O._emscripten_enum_draco_MeshEncoderMethod_MESH_SEQUENTIAL_ENCODING=O.asm.Sa).apply(null,arguments)},qe=O._emscripten_enum_draco_MeshEncoderMethod_MESH_EDGEBREAKER_ENCODING=function(){return(qe=O._emscripten_enum_draco_MeshEncoderMethod_MESH_EDGEBREAKER_ENCODING=O.asm.Ta).apply(null,arguments)};O._malloc=function(){return(O._malloc=O.asm.Ua).apply(null,arguments)},O._free=function(){return(O._free=O.asm.Va).apply(null,arguments)};var Ke,Qe=function(){return(Qe=O.asm.Wa).apply(null,arguments)};if(O.___start_em_js=19116,O.___stop_em_js=19214,at=function t(){Ke||c(),Ke||(at=t)},O.preInit)for("function"==typeof O.preInit&&(O.preInit=[O.preInit]);0<O.preInit.length;)O.preInit.pop()();c(),u.prototype=Object.create(u.prototype),u.prototype.constructor=u,u.prototype.__class__=u,u.__cache__={},O.WrapperObject=u,O.getCache=p,O.wrapPointer=l,O.castObject=function(t,e){return l(t.ptr,e)},O.NULL=l(0),O.destroy=function(t){if(!t.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";t.__destroy__(),delete p(t.__class__)[t.ptr]},O.compare=function(t,e){return t.ptr===e.ptr},O.getPointer=function(t){return t.ptr},O.getClass=function(t){return t.__class__};var $e={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if($e.needed){for(var t=0;t<$e.temps.length;t++)O._free($e.temps[t]);$e.temps.length=0,O._free($e.buffer),$e.buffer=0,$e.size+=$e.needed,$e.needed=0}$e.buffer||($e.size+=128,$e.buffer=O._malloc($e.size),$e.buffer||n(void 0)),$e.pos=0},alloc:function(t,e){return $e.buffer||n(void 0),t=7+(t=t.length*e.BYTES_PER_ELEMENT)&-8,$e.pos+t>=$e.size?(0<t||n(void 0),$e.needed+=t,e=O._malloc(t),$e.temps.push(e)):(e=$e.buffer+$e.pos,$e.pos+=t),e},copy:function(t,e,r){switch(r>>>=0,e.BYTES_PER_ELEMENT){case 2:r>>>=1;break;case 4:r>>>=2;break;case 8:r>>>=3}for(var n=0;n<t.length;n++)e[r+n]=t[n]}};return m.prototype=Object.create(u.prototype),m.prototype.constructor=m,m.prototype.__class__=m,m.__cache__={},O.VoidPtr=m,m.prototype.__destroy__=m.prototype.__destroy__=function(){pt(this.ptr)},g.prototype=Object.create(u.prototype),g.prototype.constructor=g,g.prototype.__class__=g,g.__cache__={},O.GeometryAttribute=g,g.prototype.__destroy__=g.prototype.__destroy__=function(){_t(this.ptr)},b.prototype=Object.create(u.prototype),b.prototype.constructor=b,b.prototype.__class__=b,b.__cache__={},O.PointAttribute=b,b.prototype.size=b.prototype.size=function(){return ht(this.ptr)},b.prototype.attribute_type=b.prototype.attribute_type=function(){return dt(this.ptr)},b.prototype.data_type=b.prototype.data_type=function(){return yt(this.ptr)},b.prototype.num_components=b.prototype.num_components=function(){return mt(this.ptr)},b.prototype.normalized=b.prototype.normalized=function(){return!!gt(this.ptr)},b.prototype.byte_stride=b.prototype.byte_stride=function(){return bt(this.ptr)},b.prototype.byte_offset=b.prototype.byte_offset=function(){return Tt(this.ptr)},b.prototype.unique_id=b.prototype.unique_id=function(){return Et(this.ptr)},b.prototype.__destroy__=b.prototype.__destroy__=function(){At(this.ptr)},T.prototype=Object.create(u.prototype),T.prototype.constructor=T,T.prototype.__class__=T,T.__cache__={},O.PointCloud=T,T.prototype.num_attributes=T.prototype.num_attributes=function(){return It(this.ptr)},T.prototype.num_points=T.prototype.num_points=function(){return Rt(this.ptr)},T.prototype.__destroy__=T.prototype.__destroy__=function(){Mt(this.ptr)},E.prototype=Object.create(u.prototype),E.prototype.constructor=E,E.prototype.__class__=E,E.__cache__={},O.Mesh=E,E.prototype.num_faces=E.prototype.num_faces=function(){return vt(this.ptr)},E.prototype.num_attributes=E.prototype.num_attributes=function(){return Nt(this.ptr)},E.prototype.num_points=E.prototype.num_points=function(){return wt(this.ptr)},E.prototype.set_num_points=E.prototype.set_num_points=function(t){var e=this.ptr;t&&"object"==typeof t&&(t=t.ptr),Ot(e,t)},E.prototype.__destroy__=E.prototype.__destroy__=function(){Dt(this.ptr)},A.prototype=Object.create(u.prototype),A.prototype.constructor=A,A.prototype.__class__=A,A.__cache__={},O.Metadata=A,A.prototype.__destroy__=A.prototype.__destroy__=function(){jt(this.ptr)},x.prototype=Object.create(u.prototype),x.prototype.constructor=x,x.prototype.__class__=x,x.__cache__={},O.DracoInt8Array=x,x.prototype.GetValue=x.prototype.GetValue=function(t){var e=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),Ut(e,t)},x.prototype.size=x.prototype.size=function(){return Pt(this.ptr)},x.prototype.__destroy__=x.prototype.__destroy__=function(){Lt(this.ptr)},I.prototype=Object.create(u.prototype),I.prototype.constructor=I,I.prototype.__class__=I,I.__cache__={},O.MetadataBuilder=I,I.prototype.AddStringEntry=I.prototype.AddStringEntry=function(t,e,r){var n=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e=e&&"object"==typeof e?e.ptr:_(e),r=r&&"object"==typeof r?r.ptr:_(r),!!Gt(n,t,e,r)},I.prototype.AddIntEntry=I.prototype.AddIntEntry=function(t,e,r){var n=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e=e&&"object"==typeof e?e.ptr:_(e),r&&"object"==typeof r&&(r=r.ptr),!!Vt(n,t,e,r)},I.prototype.AddIntEntryArray=I.prototype.AddIntEntryArray=function(t,e,r,n){var s=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e=e&&"object"==typeof e?e.ptr:_(e),"object"==typeof r&&(r=d(r)),n&&"object"==typeof n&&(n=n.ptr),!!kt(s,t,e,r,n)},I.prototype.AddDoubleEntry=I.prototype.AddDoubleEntry=function(t,e,r){var n=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e=e&&"object"==typeof e?e.ptr:_(e),r&&"object"==typeof r&&(r=r.ptr),!!zt(n,t,e,r)},I.prototype.__destroy__=I.prototype.__destroy__=function(){Ht(this.ptr)},R.prototype=Object.create(u.prototype),R.prototype.constructor=R,R.prototype.__class__=R,R.__cache__={},O.PointCloudBuilder=R,R.prototype.AddFloatAttribute=R.prototype.AddFloatAttribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=y(s)),Yt(i,t,e,r,n,s)},R.prototype.AddInt8Attribute=R.prototype.AddInt8Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=f(s)),Xt(i,t,e,r,n,s)},R.prototype.AddUInt8Attribute=R.prototype.AddUInt8Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=f(s)),qt(i,t,e,r,n,s)},R.prototype.AddInt16Attribute=R.prototype.AddInt16Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=h(s)),Kt(i,t,e,r,n,s)},R.prototype.AddUInt16Attribute=R.prototype.AddUInt16Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=h(s)),Qt(i,t,e,r,n,s)},R.prototype.AddInt32Attribute=R.prototype.AddInt32Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=d(s)),$t(i,t,e,r,n,s)},R.prototype.AddUInt32Attribute=R.prototype.AddUInt32Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=d(s)),Jt(i,t,e,r,n,s)},R.prototype.AddMetadata=R.prototype.AddMetadata=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),!!Zt(r,t,e)},R.prototype.SetMetadataForAttribute=R.prototype.SetMetadataForAttribute=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!te(n,t,e,r)},R.prototype.__destroy__=R.prototype.__destroy__=function(){ee(this.ptr)},M.prototype=Object.create(u.prototype),M.prototype.constructor=M,M.prototype.__class__=M,M.__cache__={},O.MeshBuilder=M,M.prototype.AddFacesToMesh=M.prototype.AddFacesToMesh=function(t,e,r){var n=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),"object"==typeof r&&(r=d(r)),!!ne(n,t,e,r)},M.prototype.AddFloatAttributeToMesh=M.prototype.AddFloatAttributeToMesh=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=y(s)),se(i,t,e,r,n,s)},M.prototype.AddInt32AttributeToMesh=M.prototype.AddInt32AttributeToMesh=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=d(s)),ie(i,t,e,r,n,s)},M.prototype.AddMetadataToMesh=M.prototype.AddMetadataToMesh=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),!!oe(r,t,e)},M.prototype.AddFloatAttribute=M.prototype.AddFloatAttribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=y(s)),ae(i,t,e,r,n,s)},M.prototype.AddInt8Attribute=M.prototype.AddInt8Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=f(s)),ce(i,t,e,r,n,s)},M.prototype.AddUInt8Attribute=M.prototype.AddUInt8Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=f(s)),ue(i,t,e,r,n,s)},M.prototype.AddInt16Attribute=M.prototype.AddInt16Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=h(s)),pe(i,t,e,r,n,s)},M.prototype.AddUInt16Attribute=M.prototype.AddUInt16Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=h(s)),le(i,t,e,r,n,s)},M.prototype.AddInt32Attribute=M.prototype.AddInt32Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=d(s)),_e(i,t,e,r,n,s)},M.prototype.AddUInt32Attribute=M.prototype.AddUInt32Attribute=function(t,e,r,n,s){var i=this.ptr;return $e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof s&&(s=d(s)),fe(i,t,e,r,n,s)},M.prototype.AddMetadata=M.prototype.AddMetadata=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),!!he(r,t,e)},M.prototype.SetMetadataForAttribute=M.prototype.SetMetadataForAttribute=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),!!de(n,t,e,r)},M.prototype.__destroy__=M.prototype.__destroy__=function(){ye(this.ptr)},S.prototype=Object.create(u.prototype),S.prototype.constructor=S,S.prototype.__class__=S,S.__cache__={},O.Encoder=S,S.prototype.SetEncodingMethod=S.prototype.SetEncodingMethod=function(t){var e=this.ptr;t&&"object"==typeof t&&(t=t.ptr),ge(e,t)},S.prototype.SetAttributeQuantization=S.prototype.SetAttributeQuantization=function(t,e){var r=this.ptr;t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),be(r,t,e)},S.prototype.SetAttributeExplicitQuantization=S.prototype.SetAttributeExplicitQuantization=function(t,e,r,n,s){var i=this.ptr;$e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof n&&(n=y(n)),s&&"object"==typeof s&&(s=s.ptr),Te(i,t,e,r,n,s)},S.prototype.SetSpeedOptions=S.prototype.SetSpeedOptions=function(t,e){var r=this.ptr;t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),Ee(r,t,e)},S.prototype.SetTrackEncodedProperties=S.prototype.SetTrackEncodedProperties=function(t){var e=this.ptr;t&&"object"==typeof t&&(t=t.ptr),Ae(e,t)},S.prototype.EncodeMeshToDracoBuffer=S.prototype.EncodeMeshToDracoBuffer=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),xe(r,t,e)},S.prototype.EncodePointCloudToDracoBuffer=S.prototype.EncodePointCloudToDracoBuffer=function(t,e,r){var n=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),Ie(n,t,e,r)},S.prototype.GetNumberOfEncodedPoints=S.prototype.GetNumberOfEncodedPoints=function(){return Re(this.ptr)},S.prototype.GetNumberOfEncodedFaces=S.prototype.GetNumberOfEncodedFaces=function(){return Me(this.ptr)},S.prototype.__destroy__=S.prototype.__destroy__=function(){Se(this.ptr)},v.prototype=Object.create(u.prototype),v.prototype.constructor=v,v.prototype.__class__=v,v.__cache__={},O.ExpertEncoder=v,v.prototype.SetEncodingMethod=v.prototype.SetEncodingMethod=function(t){var e=this.ptr;t&&"object"==typeof t&&(t=t.ptr),Ne(e,t)},v.prototype.SetAttributeQuantization=v.prototype.SetAttributeQuantization=function(t,e){var r=this.ptr;t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),we(r,t,e)},v.prototype.SetAttributeExplicitQuantization=v.prototype.SetAttributeExplicitQuantization=function(t,e,r,n,s){var i=this.ptr;$e.prepare(),t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof n&&(n=y(n)),s&&"object"==typeof s&&(s=s.ptr),Oe(i,t,e,r,n,s)},v.prototype.SetSpeedOptions=v.prototype.SetSpeedOptions=function(t,e){var r=this.ptr;t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),De(r,t,e)},v.prototype.SetTrackEncodedProperties=v.prototype.SetTrackEncodedProperties=function(t){var e=this.ptr;t&&"object"==typeof t&&(t=t.ptr),Ce(e,t)},v.prototype.EncodeToDracoBuffer=v.prototype.EncodeToDracoBuffer=function(t,e){var r=this.ptr;return t&&"object"==typeof t&&(t=t.ptr),e&&"object"==typeof e&&(e=e.ptr),je(r,t,e)},v.prototype.GetNumberOfEncodedPoints=v.prototype.GetNumberOfEncodedPoints=function(){return Fe(this.ptr)},v.prototype.GetNumberOfEncodedFaces=v.prototype.GetNumberOfEncodedFaces=function(){return Ue(this.ptr)},v.prototype.__destroy__=v.prototype.__destroy__=function(){Pe(this.ptr)},function(){function t(){O.INVALID=Le(),O.POSITION=Be(),O.NORMAL=Ge(),O.COLOR=Ve(),O.TEX_COORD=ke(),O.GENERIC=ze(),O.INVALID_GEOMETRY_TYPE=He(),O.POINT_CLOUD=We(),O.TRIANGULAR_MESH=Ye(),O.MESH_SEQUENTIAL_ENCODING=Xe(),O.MESH_EDGEBREAKER_ENCODING=qe()}st?t():rt.unshift(t)}(),"function"==typeof O.onModuleParsed&&O.onModuleParsed(),t.ready});t.exports=i},480:()=>{},66:()=>{}},i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={exports:{}};return s[t].call(r.exports,r,r.exports,o),r.exports}o.m=s,o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var s=Object.create(null);o.r(s);var i={};t=t||[null,e({}),e([]),e(e)];for(var a=2&n&&r;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>r[t]));return i.default=()=>r,o.d(s,i),s},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((e,r)=>(o.f[r](t,e),e)),[])),o.u=t=>"chunk.bundle.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r={},n="editor:",o.l=(t,e,s,i)=>{if(r[t])r[t].push(e);else{var a,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),p=0;p<u.length;p++){var l=u[p];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==n+s){a=l;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",n+s),a.src=t),r[t]=[e];var _=(e,n)=>{a.onerror=a.onload=null,clearTimeout(f);var s=r[t];if(delete r[t],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((t=>t(n))),e)return e(n)},f=setTimeout(_.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=_.bind(null,a.onerror),a.onload=_.bind(null,a.onload),c&&document.head.appendChild(a)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.j=151,(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&!t;)t=r[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={151:0};o.f.j=(e,r)=>{var n=o.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise(((r,s)=>n=t[e]=[r,s]));r.push(n[2]=s);var i=o.p+o.u(e),a=new Error;o.l(i,(r=>{if(o.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+i+")",a.name="ChunkLoadError",a.type=s,a.request=i,n[1](a)}}),"chunk-"+e,e)}};var e=(e,r)=>{var n,s,[i,a,c]=r,u=0;if(i.some((e=>0!==t[e]))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(c)c(o)}for(e&&e(r);u<i.length;u++)s=i[u],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0},r=self.webpackChunkeditor=self.webpackChunkeditor||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),(()=>{"use strict";class t{constructor(){this._listeners={}}addEventListener(t,e){const r=this._listeners;return void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e),this}removeEventListener(t,e){if(void 0===this._listeners)return this;const r=this._listeners[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}return this}dispatchEvent(t){if(void 0===this._listeners)return this;const e=this._listeners[t.type];if(void 0!==e){const r=e.slice(0);for(let e=0,n=r.length;e<n;e++)r[e].call(this,t)}return this}dispose(){for(const t in this._listeners)delete this._listeners[t]}}class e extends t{constructor(t,e,r,n={}){if(super(),this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=t,this._parent=e,this._child=r,this._attributes=n,!e.isOnGraph(r))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(t){return this._child=t,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._disposed=!0,this.dispatchEvent({type:"dispose",target:this}),super.dispose())}isDisposed(){return this._disposed}}class r extends t{constructor(...t){super(...t),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(t){return Array.from(this._childEdges.get(t)||this._emptySet)}listParents(t){return this.listParentEdges(t).map((t=>t.getParent()))}listChildEdges(t){return Array.from(this._parentEdges.get(t)||this._emptySet)}listChildren(t){return this.listChildEdges(t).map((t=>t.getChild()))}disconnectParents(t,e){let r=this.listParentEdges(t);return e&&(r=r.filter((t=>e(t.getParent())))),r.forEach((t=>t.dispose())),this}createEdge(t,r,n,s){return this._registerEdge(new e(t,r,n,s))}_registerEdge(t){this._edges.add(t);const e=t.getParent();this._parentEdges.has(e)||this._parentEdges.set(e,new Set),this._parentEdges.get(e).add(t);const r=t.getChild();return this._childEdges.has(r)||this._childEdges.set(r,new Set),this._childEdges.get(r).add(t),t.addEventListener("dispose",(()=>this._removeEdge(t))),t}_removeEdge(t){return this._edges.delete(t),this._parentEdges.get(t.getParent()).delete(t),this._childEdges.get(t.getChild()).delete(t),this}}function n(){return n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n.apply(this,arguments)}function s(t){return t instanceof e}function i(t){return Array.isArray(t)&&t[0]instanceof e}function a(t){return!!(function(t){return Boolean(t)&&Object.getPrototypeOf(t)===Object.prototype}(t)&&function(t){for(const e in t)return t[e]}(t)instanceof e)}const c=Symbol("attributes"),u=Symbol("immutableKeys");class p extends t{constructor(t){super(),this._disposed=!1,this.graph=void 0,this[c]=void 0,this[u]=void 0,this.graph=t,this[u]=new Set,this[c]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const t=this.getDefaults(),e={};for(const r in t){const n=t[r];if(n instanceof p){const t=this.graph.createEdge(r,this,n);t.addEventListener("dispose",(()=>n.dispose())),this[u].add(r),e[r]=t}else e[r]=n}return e}isOnGraph(t){return this.graph===t.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach((t=>t.dispose())),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(t,e){for(const r in this[c]){const n=this[c][r];if(s(n)){const s=n;s.getChild()===t&&this.setRef(r,e,s.getAttributes())}else if(i(n)){const s=n.find((e=>e.getChild()===t));if(s){const n=s.getAttributes();this.removeRef(r,t).addRef(r,e,n)}}else if(a(n)){const s=n;for(const n in s){const i=s[n];i.getChild()===t&&this.setRefMap(r,n,e,i.getAttributes())}}}return this}get(t){return this[c][t]}set(t,e){return this[c][t]=e,this.dispatchEvent({type:"change",attribute:t})}getRef(t){const e=this[c][t];return e?e.getChild():null}setRef(t,e,r){if(this[u].has(t))throw new Error(`Cannot overwrite immutable attribute, "${t}".`);const n=this[c][t];if(n&&n.dispose(),!e)return this;const s=this.graph.createEdge(t,this,e,r);return s.addEventListener("dispose",(()=>{delete this[c][t],this.dispatchEvent({type:"change",attribute:t})})),this[c][t]=s,this.dispatchEvent({type:"change",attribute:t})}listRefs(t){return this[c][t].map((t=>t.getChild()))}addRef(t,e,r){const n=this.graph.createEdge(t,this,e,r),s=this[c][t];return s.push(n),n.addEventListener("dispose",(()=>{const e=s.filter((t=>t!==n));s.length=0;for(const t of e)s.push(t);this.dispatchEvent({type:"change",attribute:t})})),this.dispatchEvent({type:"change",attribute:t})}removeRef(t,e){return this[c][t].filter((t=>t.getChild()===e)).forEach((t=>t.dispose())),this}listRefMapKeys(t){return Object.keys(this[c][t])}listRefMapValues(t){return Object.values(this[c][t]).map((t=>t.getChild()))}getRefMap(t,e){const r=this[c][t];return r[e]?r[e].getChild():null}setRefMap(t,e,r,s){const i=this[c][t],o=i[e];if(o&&o.dispose(),!r)return this;s=Object.assign(s||{},{key:e});const a=this.graph.createEdge(t,this,r,n({},s,{key:e}));return a.addEventListener("dispose",(()=>{delete i[e],this.dispatchEvent({type:"change",attribute:t,key:e})})),i[e]=a,this.dispatchEvent({type:"change",attribute:t,key:e})}dispatchEvent(t){return super.dispatchEvent(n({},t,{target:this})),this.graph.dispatchEvent(n({},t,{target:this,type:`node:${t.type}`})),this}}const l="v3.0.0-alpha.4";var _,f,h,d,y;!function(t){t.ACCESSOR="Accessor",t.ANIMATION="Animation",t.ANIMATION_CHANNEL="AnimationChannel",t.ANIMATION_SAMPLER="AnimationSampler",t.BUFFER="Buffer",t.CAMERA="Camera",t.MATERIAL="Material",t.MESH="Mesh",t.PRIMITIVE="Primitive",t.PRIMITIVE_TARGET="PrimitiveTarget",t.NODE="Node",t.ROOT="Root",t.SCENE="Scene",t.SKIN="Skin",t.TEXTURE="Texture",t.TEXTURE_INFO="TextureInfo"}(_||(_={})),function(t){t.INTERLEAVED="interleaved",t.SEPARATE="separate"}(f||(f={})),function(t){t.ARRAY_BUFFER="ARRAY_BUFFER",t.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",t.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",t.OTHER="OTHER",t.SPARSE="SPARSE"}(h||(h={})),function(t){t[t.R=4096]="R",t[t.G=256]="G",t[t.B=16]="B",t[t.A=1]="A"}(d||(d={})),function(t){t.GLTF="GLTF",t.GLB="GLB"}(y||(y={}));const m={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};var g,b="undefined"!=typeof Float32Array?Float32Array:Array;function T(t){return Math.hypot(t[0],t[1],t[2])}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),g=new b(3),b!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0);class E{static createBufferFromDataURI(t){if("undefined"==typeof Buffer){const e=atob(t.split(",")[1]),r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}{const e=t.split(",")[1],r=t.indexOf("base64")>=0;return Buffer.from(e,r?"base64":"utf8")}}static encodeText(t){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(t):Buffer.from(t)}static decodeText(t){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):Buffer.from(t).toString("utf8")}static concat(t){let e=0;for(const r of t)e+=r.byteLength;const r=new Uint8Array(e);let n=0;for(const e of t)r.set(e,n),n+=e.byteLength;return r}static pad(t,e=0){const r=this.padNumber(t.byteLength);if(r===t.byteLength)return t;const n=new Uint8Array(r);if(n.set(t),0!==e)for(let s=t.byteLength;s<r;s++)n[s]=e;return n}static padNumber(t){return 4*Math.ceil(t/4)}static equals(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;let r=t.byteLength;for(;r--;)if(t[r]!==e[r])return!1;return!0}static toView(t,e=0,r=1/0){return new Uint8Array(t.buffer,t.byteOffset+e,Math.min(t.byteLength,r))}static assertView(t){if(t&&!ArrayBuffer.isView(t))throw new Error(`Method requires Uint8Array parameter; received "${typeof t}".`);return t}}class A{static hexToFactor(t,e){t=Math.floor(t);const r=e;return r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,this.convertSRGBToLinear(e,e)}static factorToHex(t){const e=[...t],[r,n,s]=this.convertLinearToSRGB(t,e);return 255*r<<16^255*n<<8^255*s<<0}static convertSRGBToLinear(t,e){const r=t,n=e;for(let t=0;t<3;t++)n[t]=r[t]<.04045?.0773993808*r[t]:Math.pow(.9478672986*r[t]+.0521327014,2.4);return e}static convertLinearToSRGB(t,e){const r=t,n=e;for(let t=0;t<3;t++)n[t]=r[t]<.0031308?12.92*r[t]:1.055*Math.pow(r[t],.41666)-.055;return e}}class x{match(t){return t.length>=8&&137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]}getSize(t){const e=new DataView(t.buffer,t.byteOffset);return E.decodeText(t.slice(12,16))===x.PNG_FRIED_CHUNK_NAME?[e.getUint32(32,!1),e.getUint32(36,!1)]:[e.getUint32(16,!1),e.getUint32(20,!1)]}getChannels(t){return 4}}x.PNG_FRIED_CHUNK_NAME="CgBI";class I{static registerFormat(t,e){this.impls[t]=e}static getMimeType(t){for(const e in this.impls)if(this.impls[e].match(t))return e;return null}static getSize(t,e){return this.impls[e]?this.impls[e].getSize(t):null}static getChannels(t,e){return this.impls[e]?this.impls[e].getChannels(t):null}static getGPUByteLength(t,e){if(!this.impls[e])return null;if(this.impls[e].getGPUByteLength)return this.impls[e].getGPUByteLength(t);let r=0;const n=this.getSize(t,e);if(!n)return null;for(;n[0]>1||n[1]>1;)r+=n[0]*n[1]*4,n[0]=Math.max(Math.floor(n[0]/2),1),n[1]=Math.max(Math.floor(n[1]/2),1);return r+=4,r}static mimeTypeToExtension(t){return"image/jpeg"===t?"jpg":t.split("/").pop()}static extensionToMimeType(t){return"jpg"===t?"image/jpeg":t?`image/${t}`:""}}function R(t,e){if(e>t.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==t.getUint8(e))throw new TypeError("Invalid JPG, marker table corrupted");return t}I.impls={"image/jpeg":new class{match(t){return t.length>=3&&255===t[0]&&216===t[1]&&255===t[2]}getSize(t){let e,r,n=new DataView(t.buffer,t.byteOffset+4);for(;n.byteLength;){if(e=n.getUint16(0,!1),R(n,e),r=n.getUint8(e+1),192===r||193===r||194===r)return[n.getUint16(e+7,!1),n.getUint16(e+5,!1)];n=new DataView(t.buffer,n.byteOffset+e+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(t){return 3}},"image/png":new x};class M{static basename(t){const e=t.split(/[\\/]/).pop();return e.substring(0,e.lastIndexOf("."))}static extension(t){if(t.startsWith("data:image/")){const e=t.match(/data:(image\/\w+)/)[1];return I.mimeTypeToExtension(e)}return t.startsWith("data:model/gltf+json")?"gltf":t.startsWith("data:model/gltf-binary")?"glb":t.startsWith("data:application/")?"bin":t.split(/[\\/]/).pop().split(/[.]/).pop()}}function S(t){return"[object Object]"===Object.prototype.toString.call(t)}function v(t){if(!1===S(t))return!1;const e=t.constructor;if(void 0===e)return!0;const r=e.prototype;return!1!==S(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}var N;!function(t){t[t.SILENT=4]="SILENT",t[t.ERROR=3]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=1]="INFO",t[t.DEBUG=0]="DEBUG"}(N||(N={}));class w{constructor(t){this.verbosity=t}debug(t){this.verbosity<=w.Verbosity.DEBUG&&console.debug(t)}info(t){this.verbosity<=w.Verbosity.INFO&&console.info(t)}warn(t){this.verbosity<=w.Verbosity.WARN&&console.warn(t)}error(t){this.verbosity<=w.Verbosity.ERROR&&console.error(t)}}function O(t,e,r){var n=e[0],s=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],p=e[7],l=e[8],_=e[9],f=e[10],h=e[11],d=e[12],y=e[13],m=e[14],g=e[15],b=r[0],T=r[1],E=r[2],A=r[3];return t[0]=b*n+T*a+E*l+A*d,t[1]=b*s+T*c+E*_+A*y,t[2]=b*i+T*u+E*f+A*m,t[3]=b*o+T*p+E*h+A*g,t[4]=(b=r[4])*n+(T=r[5])*a+(E=r[6])*l+(A=r[7])*d,t[5]=b*s+T*c+E*_+A*y,t[6]=b*i+T*u+E*f+A*m,t[7]=b*o+T*p+E*h+A*g,t[8]=(b=r[8])*n+(T=r[9])*a+(E=r[10])*l+(A=r[11])*d,t[9]=b*s+T*c+E*_+A*y,t[10]=b*i+T*u+E*f+A*m,t[11]=b*o+T*p+E*h+A*g,t[12]=(b=r[12])*n+(T=r[13])*a+(E=r[14])*l+(A=r[15])*d,t[13]=b*s+T*c+E*_+A*y,t[14]=b*i+T*u+E*f+A*m,t[15]=b*o+T*p+E*h+A*g,t}w.Verbosity=N,w.DEFAULT_INSTANCE=new w(w.Verbosity.INFO);class D{static identity(t){return t}static eq(t,e,r=1e-5){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(Math.abs(t[n]-e[n])>r)return!1;return!0}static decodeNormalizedInt(t,e){switch(e){case 5126:return t;case 5123:return t/65535;case 5121:return t/255;case 5122:return Math.max(t/32767,-1);case 5120:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}static denormalize(t,e){return D.decodeNormalizedInt(t,e)}static encodeNormalizedInt(t,e){switch(e){case 5126:return t;case 5123:return Math.round(65535*t);case 5121:return Math.round(255*t);case 5122:return Math.round(32767*t);case 5120:return Math.round(127*t);default:throw new Error("Invalid component type.")}}static normalize(t,e){return D.encodeNormalizedInt(t,e)}static decompose(t,e,r,n){let s=T([t[0],t[1],t[2]]);const i=T([t[4],t[5],t[6]]),o=T([t[8],t[9],t[10]]);var a,c,u,p,l,_,f,h,d,y,m,g,E,A,x,I,R;((c=(a=t)[0])*(f=a[5])-(u=a[1])*(_=a[4]))*((g=a[10])*(R=a[15])-(E=a[11])*(I=a[14]))-(c*(h=a[6])-(p=a[2])*_)*((m=a[9])*R-E*(x=a[13]))+(c*(d=a[7])-(l=a[3])*_)*(m*I-g*x)+(u*h-p*f)*((y=a[8])*R-E*(A=a[12]))-(u*d-l*f)*(y*I-g*A)+(p*d-l*h)*(y*x-m*A)<0&&(s=-s),e[0]=t[12],e[1]=t[13],e[2]=t[14];const M=t.slice(),S=1/s,v=1/i,N=1/o;M[0]*=S,M[1]*=S,M[2]*=S,M[4]*=v,M[5]*=v,M[6]*=v,M[8]*=N,M[9]*=N,M[10]*=N,function(t,e){var r=new b(3);!function(t,e){var r=e[4],n=e[5],s=e[6],i=e[8],o=e[9],a=e[10];t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(r,n,s),t[2]=Math.hypot(i,o,a)}(r,e);var n=1/r[0],s=1/r[1],i=1/r[2],o=e[0]*n,a=e[1]*s,c=e[2]*i,u=e[4]*n,p=e[5]*s,l=e[6]*i,_=e[8]*n,f=e[9]*s,h=e[10]*i,d=o+p+h,y=0;d>0?(y=2*Math.sqrt(d+1),t[3]=.25*y,t[0]=(l-f)/y,t[1]=(_-c)/y,t[2]=(a-u)/y):o>p&&o>h?(y=2*Math.sqrt(1+o-p-h),t[3]=(l-f)/y,t[0]=.25*y,t[1]=(a+u)/y,t[2]=(_+c)/y):p>h?(y=2*Math.sqrt(1+p-o-h),t[3]=(_-c)/y,t[0]=(a+u)/y,t[1]=.25*y,t[2]=(l+f)/y):(y=2*Math.sqrt(1+h-o-p),t[3]=(a-u)/y,t[0]=(_+c)/y,t[1]=(l+f)/y,t[2]=.25*y)}(r,M),n[0]=s,n[1]=i,n[2]=o}static compose(t,e,r,n){const s=n,i=e[0],o=e[1],a=e[2],c=e[3],u=i+i,p=o+o,l=a+a,_=i*u,f=i*p,h=i*l,d=o*p,y=o*l,m=a*l,g=c*u,b=c*p,T=c*l,E=r[0],A=r[1],x=r[2];return s[0]=(1-(d+m))*E,s[1]=(f+T)*E,s[2]=(h-b)*E,s[3]=0,s[4]=(f-T)*A,s[5]=(1-(_+m))*A,s[6]=(y+g)*A,s[7]=0,s[8]=(h+b)*x,s[9]=(y-g)*x,s[10]=(1-(_+d))*x,s[11]=0,s[12]=t[0],s[13]=t[1],s[14]=t[2],s[15]=1,s}}function C(t,e){if(!!t!=!!e)return!1;const r=t.getChild(),n=e.getChild();return r===n||r.equals(n)}function j(t,e){if(!!t!=!!e)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const n=t[r],s=e[r];if(n.getChild()!==s.getChild()&&!n.getChild().equals(s.getChild()))return!1}return!0}function F(t,e){if(!!t!=!!e)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const r in t){const n=t[r],s=e[r];if(!!n!=!!s)return!1;const i=n.getChild(),o=s.getChild();if(i!==o&&!i.equals(o))return!1}return!0}function U(t,e){if(t===e)return!0;if(!!t!=!!e||!t||!e)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function P(t,e){if(t===e)return!0;if(!!t!=!!e)return!1;if(!v(t)||!v(e))return t===e;const r=t,n=e;let s,i=0,o=0;for(s in r)i++;for(s in n)o++;if(i!==o)return!1;for(s in r){const t=r[s],e=n[s];if(L(t)&&L(e)){if(!U(t,e))return!1}else if(v(t)&&v(e)){if(!P(t,e))return!1}else if(t!==e)return!1}return!0}function L(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const B="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",G=new Set,V=function(){let t="";for(let e=0;e<6;e++)t+=B.charAt(Math.floor(42*Math.random()));return t};class k{static dirname(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substring(0,e+1)}static basename(t){return M.basename(new URL(t,"https://null.example").pathname)}static extension(t){return M.extension(new URL(t,"https://null.example").pathname)}static resolve(t,e){if(!this.isRelativePath(e))return e;const r=t.split("/"),n=e.split("/");r.pop();for(let t=0;t<n.length;t++)"."!==n[t]&&(".."===n[t]?r.pop():r.push(n[t]));return r.join("/")}static isAbsoluteURL(t){return this.PROTOCOL_REGEXP.test(t)}static isRelativePath(t){return!/^(?:[a-zA-Z]+:)?\//.test(t)}}k.DEFAULT_INIT={},k.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;const z=t=>t,H=new Set;class W extends p{constructor(t,e=""){super(t),this[c].name=e,this.init(),this.dispatchEvent({type:"create"})}getGraph(){return this.graph}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}set(t,e){return Array.isArray(e)&&(e=e.slice()),super.set(t,e)}getName(){return this.get("name")}setName(t){return this.set("name",t)}getExtras(){return this.get("extras")}setExtras(t){return this.set("extras",t)}clone(){return new(0,this.constructor)(this.graph).copy(this,z)}copy(t,r=z){for(const t in this[c]){const r=this[c][t];if(r instanceof e)this[u].has(t)||r.dispose();else if(i(r))for(const t of r)t.dispose();else if(a(r))for(const t in r)r[t].dispose()}for(const n in t[c]){const s=this[c][n],o=t[c][n];if(o instanceof e)this[u].has(n)?s.getChild().copy(r(o.getChild()),r):this.setRef(n,r(o.getChild()),o.getAttributes());else if(i(o))for(const t of o)this.addRef(n,r(t.getChild()),t.getAttributes());else if(a(o))for(const t in o){const e=o[t];this.setRefMap(n,t,r(e.getChild()),e.getAttributes())}else this[c][n]=v(o)?JSON.parse(JSON.stringify(o)):Array.isArray(o)||o instanceof ArrayBuffer||ArrayBuffer.isView(o)?o.slice():o}return this}equals(t,e=H){if(this===t)return!0;if(this.propertyType!==t.propertyType)return!1;for(const r in this[c]){if(e.has(r))continue;const n=this[c][r],o=t[c][r];if(s(n)||s(o)){if(!C(n,o))return!1}else if(i(n)||i(o)){if(!j(n,o))return!1}else if(a(n)||a(o)){if(!F(n,o))return!1}else if(v(n)||v(o)){if(!P(n,o))return!1}else if(L(n)||L(o)){if(!U(n,o))return!1}else if(n!==o)return!1}return!0}detach(){return this.graph.disconnectParents(this,(t=>"Root"!==t.propertyType)),this}listParents(){return this.graph.listParents(this)}}class Y extends W{getDefaults(){return Object.assign(super.getDefaults(),{extensions:{}})}getExtension(t){return this.getRefMap("extensions",t)}setExtension(t,e){return e&&e.t(this),this.setRefMap("extensions",t,e)}listExtensions(){return this.listRefMapValues("extensions")}}class X extends Y{constructor(){super(...arguments),this.i=D.identity,this.o=D.identity}init(){this.propertyType=_.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:X.Type.SCALAR,componentType:X.ComponentType.FLOAT,normalized:!1,sparse:!1,buffer:null})}copy(t,e=z){return super.copy(t,e),this.i=t.i,this.o=t.o,this}static getElementSize(t){switch(t){case X.Type.SCALAR:return 1;case X.Type.VEC2:return 2;case X.Type.VEC3:return 3;case X.Type.VEC4:case X.Type.MAT2:return 4;case X.Type.MAT3:return 9;case X.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+t)}}static getComponentSize(t){switch(t){case X.ComponentType.BYTE:case X.ComponentType.UNSIGNED_BYTE:return 1;case X.ComponentType.SHORT:case X.ComponentType.UNSIGNED_SHORT:return 2;case X.ComponentType.UNSIGNED_INT:case X.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+t)}}getMinNormalized(t){const e=this.getElementSize();this.getMin(t);for(let r=0;r<e;r++)t[r]=this.o(t[r]);return t}getMin(t){const e=this.get("array"),r=this.getCount(),n=this.getElementSize();for(let e=0;e<n;e++)t[e]=1/0;for(let s=0;s<r*n;s+=n)for(let r=0;r<n;r++){const n=e[s+r];Number.isFinite(n)&&(t[r]=Math.min(t[r],n))}return t}getMaxNormalized(t){const e=this.getElementSize();this.getMax(t);for(let r=0;r<e;r++)t[r]=this.o(t[r]);return t}getMax(t){const e=this.get("array"),r=this.getCount(),n=this.getElementSize();for(let e=0;e<n;e++)t[e]=-1/0;for(let s=0;s<r*n;s+=n)for(let r=0;r<n;r++){const n=e[s+r];Number.isFinite(n)&&(t[r]=Math.max(t[r],n))}return t}getCount(){const t=this.get("array");return t?t.length/this.getElementSize():0}getType(){return this.get("type")}setType(t){return this.set("type",t)}getElementSize(){return X.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(t){return this.set("normalized",t),t?(this.o=t=>D.decodeNormalizedInt(t,this.get("componentType")),this.i=t=>D.encodeNormalizedInt(t,this.get("componentType"))):(this.o=D.identity,this.i=D.identity),this}getScalar(t){const e=this.getElementSize();return this.o(this.get("array")[t*e])}setScalar(t,e){return this.get("array")[t*this.getElementSize()]=this.i(e),this}getElement(t,e){const r=this.getElementSize(),n=this.get("array");for(let s=0;s<r;s++)e[s]=this.o(n[t*r+s]);return e}setElement(t,e){const r=this.getElementSize(),n=this.get("array");for(let s=0;s<r;s++)n[t*r+s]=this.i(e[s]);return this}getSparse(){return this.get("sparse")}setSparse(t){return this.set("sparse",t)}getBuffer(){return this.getRef("buffer")}setBuffer(t){return this.setRef("buffer",t)}getArray(){return this.get("array")}setArray(t){return this.set("componentType",t?function(t){switch(t.constructor){case Float32Array:return X.ComponentType.FLOAT;case Uint32Array:return X.ComponentType.UNSIGNED_INT;case Uint16Array:return X.ComponentType.UNSIGNED_SHORT;case Uint8Array:return X.ComponentType.UNSIGNED_BYTE;case Int16Array:return X.ComponentType.SHORT;case Int8Array:return X.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(t):X.ComponentType.FLOAT),this.set("array",t),this}getByteLength(){const t=this.get("array");return t?t.byteLength:0}}X.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},X.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};class q extends Y{init(){this.propertyType=_.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:[],samplers:[],uuid:null})}addChannel(t){return this.addRef("channels",t)}removeChannel(t){return this.removeRef("channels",t)}listChannels(){return this.listRefs("channels")}addSampler(t){return this.addRef("samplers",t)}removeSampler(t){return this.removeRef("samplers",t)}listSamplers(){return this.listRefs("samplers")}getUuid(){return this.get("uuid")}setUuid(t){return this.set("uuid",t)}}class K extends Y{init(){this.propertyType=_.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(t){return this.set("targetPath",t)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(t){return this.setRef("targetNode",t)}getSampler(){return this.getRef("sampler")}setSampler(t){return this.setRef("sampler",t)}}K.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class Q extends Y{init(){this.propertyType=_.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:Q.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(t){return this.set("interpolation",t)}getInput(){return this.getRef("input")}setInput(t){return this.setRef("input",t,{usage:h.OTHER})}getOutput(){return this.getRef("output")}setOutput(t){return this.setRef("output",t,{usage:h.OTHER})}}Q.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class $ extends Y{init(){this.propertyType=_.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(t){return this.set("uri",t)}}class J extends Y{init(){this.propertyType=_.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:J.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:2*Math.PI*50/360,xmag:1,ymag:1,uuid:null})}getType(){return this.get("type")}setType(t){return this.set("type",t)}getZNear(){return this.get("znear")}setZNear(t){return this.set("znear",t)}getZFar(){return this.get("zfar")}setZFar(t){return this.set("zfar",t)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(t){return this.set("aspectRatio",t)}getYFov(){return this.get("yfov")}setYFov(t){return this.set("yfov",t)}getXMag(){return this.get("xmag")}setXMag(t){return this.set("xmag",t)}getYMag(){return this.get("ymag")}setYMag(t){return this.set("ymag",t)}getUuid(){return this.get("uuid")}setUuid(t){return this.set("uuid",t)}}J.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class Z extends Y{init(){this.propertyType=_.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:Z.WrapMode.REPEAT,wrapT:Z.WrapMode.REPEAT,uuid:null})}getTexCoord(){return this.get("texCoord")}setTexCoord(t){return this.set("texCoord",t)}getMagFilter(){return this.get("magFilter")}setMagFilter(t){return this.set("magFilter",t)}getMinFilter(){return this.get("minFilter")}setMinFilter(t){return this.set("minFilter",t)}getWrapS(){return this.get("wrapS")}setWrapS(t){return this.set("wrapS",t)}getWrapT(){return this.get("wrapT")}setWrapT(t){return this.set("wrapT",t)}getUuid(){return this.get("uuid")}setUuid(t){return this.set("uuid",t)}}Z.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Z.MagFilter={NEAREST:9728,LINEAR:9729},Z.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:tt,G:et,B:rt,A:nt}=d;class st extends Y{init(){this.propertyType=_.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:st.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new Z(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new Z(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new Z(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new Z(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new Z(this.graph,"metallicRoughnessTextureInfo"),uuid:null})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(t){return this.set("doubleSided",t)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(t){const e=this.get("baseColorFactor").slice();return e[3]=t,this.set("baseColorFactor",e)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(t){return this.set("alphaMode",t)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(t){return this.set("alphaCutoff",t)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(t){return this.set("baseColorFactor",t)}getBaseColorHex(){return A.factorToHex(this.get("baseColorFactor"))}setBaseColorHex(t){const e=this.get("baseColorFactor").slice();return this.set("baseColorFactor",A.hexToFactor(t,e))}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(t){return this.setRef("baseColorTexture",t,{channels:tt|et|rt|nt})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(t){return this.set("emissiveFactor",t)}getEmissiveHex(){return A.factorToHex(this.get("emissiveFactor"))}setEmissiveHex(t){const e=this.get("emissiveFactor").slice();return this.set("emissiveFactor",A.hexToFactor(t,e))}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(t){return this.setRef("emissiveTexture",t,{channels:tt|et|rt})}getNormalScale(){return this.get("normalScale")}setNormalScale(t){return this.set("normalScale",t)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(t){return this.setRef("normalTexture",t,{channels:tt|et|rt})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(t){return this.set("occlusionStrength",t)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(t){return this.setRef("occlusionTexture",t,{channels:tt})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(t){return this.set("roughnessFactor",t)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(t){return this.set("metallicFactor",t)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(t){return this.setRef("metallicRoughnessTexture",t,{channels:et|rt})}getUuid(){return this.get("uuid")}setUuid(t){return this.set("uuid",t)}}st.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class it extends Y{init(){this.propertyType=_.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:[],uuid:null})}addPrimitive(t){return this.addRef("primitives",t)}removePrimitive(t){return this.removeRef("primitives",t)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(t){return this.set("weights",t)}getUuid(){return this.get("uuid")}setUuid(t){return this.set("uuid",t)}}class ot extends Y{constructor(){super(...arguments),this.u=null}init(){this.propertyType=_.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:[],uuid:null})}copy(t,e=z){if(e===z)throw new Error("Node cannot be copied.");return super.copy(t,e)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(t){return this.set("translation",t)}setRotation(t){return this.set("rotation",t)}setScale(t){return this.set("scale",t)}getMatrix(){return D.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(t){const e=this.get("translation").slice(),r=this.get("rotation").slice(),n=this.get("scale").slice();return D.decompose(t,e,r,n),this.set("translation",e).set("rotation",r).set("scale",n)}getWorldTranslation(){const t=[0,0,0];return D.decompose(this.getWorldMatrix(),t,[0,0,0,1],[1,1,1]),t}getWorldRotation(){const t=[0,0,0,1];return D.decompose(this.getWorldMatrix(),[0,0,0],t,[1,1,1]),t}getWorldScale(){const t=[1,1,1];return D.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],t),t}getWorldMatrix(){const t=[];for(let e=this;e instanceof ot;e=e.u)t.push(e);let e;const r=t.pop().getMatrix();for(;e=t.pop();)O(r,r,e.getMatrix());return r}addChild(t){t.u&&t.u.removeChild(t),this.addRef("children",t),t.u=this;const e=this[c].children;return e[e.length-1].addEventListener("dispose",(()=>t.u=null)),this}removeChild(t){return this.removeRef("children",t)}listChildren(){return this.listRefs("children")}getParent(){return this.u}getMesh(){return this.getRef("mesh")}setMesh(t){return this.setRef("mesh",t)}getCamera(){return this.getRef("camera")}setCamera(t){return this.setRef("camera",t)}getSkin(){return this.getRef("skin")}setSkin(t){return this.setRef("skin",t)}getWeights(){return this.get("weights")}setWeights(t){return this.set("weights",t)}getUuid(){return this.get("uuid")}setUuid(t){return this.set("uuid",t)}traverse(t){t(this);for(const e of this.listChildren())e.traverse(t);return this}}class at extends Y{init(){this.propertyType=_.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:at.Mode.TRIANGLES,material:null,indices:null,attributes:{},targets:[],uuid:null})}getIndices(){return this.getRef("indices")}setIndices(t){return this.setRef("indices",t,{usage:h.ELEMENT_ARRAY_BUFFER})}getAttribute(t){return this.getRefMap("attributes",t)}setAttribute(t,e){return this.setRefMap("attributes",t,e,{usage:h.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(t){return this.setRef("material",t)}getMode(){return this.get("mode")}setMode(t){return this.set("mode",t)}listTargets(){return this.listRefs("targets")}addTarget(t){return this.addRef("targets",t)}removeTarget(t){return this.removeRef("targets",t)}getUuid(){return this.get("uuid")}setUuid(t){return this.set("uuid",t)}}at.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class ct extends W{init(){this.propertyType=_.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:{}})}getAttribute(t){return this.getRefMap("attributes",t)}setAttribute(t,e){return this.setRefMap("attributes",t,e,{usage:h.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}function ut(){return(ut=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}class pt extends Y{init(){this.propertyType=_.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:[],uuid:null})}copy(t,e=z){if(e===z)throw new Error("Scene cannot be copied.");return super.copy(t,e)}addChild(t){t.u&&t.u.removeChild(t),this.addRef("children",t),t.u=this;const e=this[c].children;return e[e.length-1].addEventListener("dispose",(()=>t.u=null)),this}removeChild(t){return this.removeRef("children",t)}listChildren(){return this.listRefs("children")}traverse(t){for(const e of this.listChildren())e.traverse(t);return this}getUuid(){return this.get("uuid")}setUuid(t){return this.set("uuid",t)}}class lt extends Y{init(){this.propertyType=_.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:[],uuid:null})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(t){return this.setRef("skeleton",t)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(t){return this.setRef("inverseBindMatrices",t,{usage:h.INVERSE_BIND_MATRICES})}addJoint(t){return this.addRef("joints",t)}removeJoint(t){return this.removeRef("joints",t)}listJoints(){return this.listRefs("joints")}getUuid(){return this.get("uuid")}setUuid(t){return this.set("uuid",t)}}class _t extends Y{init(){this.propertyType=_.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:"",uuid:null})}getMimeType(){return this.get("mimeType")||I.extensionToMimeType(M.extension(this.get("uri")))}setMimeType(t){return this.set("mimeType",t)}getURI(){return this.get("uri")}setURI(t){this.set("uri",t);const e=I.extensionToMimeType(M.extension(t));return e&&this.set("mimeType",e),this}getImage(){return this.get("image")}setImage(t){return this.set("image",E.assertView(t))}getSize(){const t=this.get("image");return t?I.getSize(t,this.getMimeType()):null}getUuid(){return this.get("uuid")}setUuid(t){return this.set("uuid",t)}}class ft extends Y{init(){this.propertyType=_.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:`glTF-Transform ${l}`,version:"2.0"},defaultScene:null,accessors:[],animations:[],buffers:[],cameras:[],materials:[],meshes:[],nodes:[],scenes:[],skins:[],textures:[]})}constructor(t){super(t),this.h=new Set,t.addEventListener("node:create",(t=>{this.l(t.target)}))}clone(){throw new Error("Root cannot be cloned.")}copy(t,e=z){if(e===z)throw new Error("Root cannot be copied.");this.set("asset",ut({},t.get("asset"))),this.setName(t.getName()),this.setExtras(ut({},t.getExtras())),this.setDefaultScene(t.getDefaultScene()?e(t.getDefaultScene()):null);for(const r of t.listRefMapKeys("extensions")){const n=t.getExtension(r);this.setExtension(r,e(n))}return this}l(t){return t instanceof pt?this.addRef("scenes",t):t instanceof ot?this.addRef("nodes",t):t instanceof J?this.addRef("cameras",t):t instanceof lt?this.addRef("skins",t):t instanceof it?this.addRef("meshes",t):t instanceof st?this.addRef("materials",t):t instanceof _t?this.addRef("textures",t):t instanceof q?this.addRef("animations",t):t instanceof X?this.addRef("accessors",t):t instanceof $&&this.addRef("buffers",t),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this.h)}listExtensionsRequired(){return this.listExtensionsUsed().filter((t=>t.isRequired()))}g(t){return this.h.add(t),this}p(t){return this.h.delete(t),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(t){return this.setRef("defaultScene",t)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}class ht{static fromGraph(t){return ht.m.get(t)||null}constructor(){this.T=new r,this.v=new ft(this.T),this.S=w.DEFAULT_INSTANCE,ht.m.set(this.T,this)}getRoot(){return this.v}getGraph(){return this.T}getLogger(){return this.S}setLogger(t){return this.S=t,this}clone(){return(new ht).setLogger(this.S).merge(this)}merge(t){for(const e of t.getRoot().listExtensionsUsed()){const t=this.createExtension(e.constructor);e.isRequired()&&t.setRequired(!0)}const e=new Set,r=new Map;e.add(t.v),r.set(t.v,this.v);for(const n of t.T.listEdges())for(const t of[n.getParent(),n.getChild()]){if(e.has(t))continue;let n;n=t.propertyType===_.TEXTURE_INFO?t:new(0,t.constructor)(this.T),r.set(t,n),e.add(t)}const n=t=>{const e=r.get(t);if(!e)throw new Error("Could resolve property.");return e};for(const t of e){const e=r.get(t);if(!e)throw new Error("Could resolve property.");e.propertyType!==_.TEXTURE_INFO&&e.copy(t,n)}return this}async transform(...t){const e=t.map((t=>t.name));for(const r of t)await r(this,{stack:e});return this}createExtension(t){const e=t.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find((t=>t.extensionName===e))||new t(this)}createScene(t=""){return new pt(this.T,t)}createNode(t=""){return new ot(this.T,t)}createCamera(t=""){return new J(this.T,t)}createSkin(t=""){return new lt(this.T,t)}createMesh(t=""){return new it(this.T,t)}createPrimitive(){return new at(this.T)}createPrimitiveTarget(t=""){return new ct(this.T,t)}createMaterial(t=""){return new st(this.T,t)}createTexture(t=""){return new _t(this.T,t)}createAnimation(t=""){return new q(this.T,t)}createAnimationChannel(t=""){return new K(this.T,t)}createAnimationSampler(t=""){return new Q(this.T,t)}createAccessor(t="",e=null){return e||(e=this.getRoot().listBuffers()[0]),new X(this.T,t).setBuffer(e)}createBuffer(t=""){return new $(this.T,t)}}ht.m=new WeakMap;class dt{constructor(t){this.jsonDoc=t,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[]}setTextureInfo(t,e){this.textureInfos.set(t,e),void 0!==e.texCoord&&t.setTexCoord(e.texCoord),void 0!==e.extras&&t.setExtras(e.extras),null!=e.uuid&&t.setUuid(e.uuid);const r=this.jsonDoc.json.textures[e.index];if(void 0===r.sampler)return;const n=this.jsonDoc.json.samplers[r.sampler];void 0!==n.magFilter&&t.setMagFilter(n.magFilter),void 0!==n.minFilter&&t.setMinFilter(n.minFilter),void 0!==n.wrapS&&t.setWrapS(n.wrapS),void 0!==n.wrapT&&t.setWrapT(n.wrapT)}}const yt={logger:w.DEFAULT_INSTANCE,extensions:[],dependencies:{}};function mt(t,e){const r=e.bufferViews[t.bufferView],n=e.jsonDoc.json.bufferViews[t.bufferView],s=m[t.componentType],i=X.getElementSize(t.type),o=s.BYTES_PER_ELEMENT;if(void 0!==n.byteStride&&n.byteStride!==i*o)return function(t,e){const r=e.bufferViews[t.bufferView],n=e.jsonDoc.json.bufferViews[t.bufferView],s=m[t.componentType],i=X.getElementSize(t.type),o=s.BYTES_PER_ELEMENT,a=t.byteOffset||0,c=new s(t.count*i),u=new DataView(r.buffer,r.byteOffset,r.byteLength),p=n.byteStride;for(let e=0;e<t.count;e++)for(let r=0;r<i;r++){const n=a+e*p+r*o;let s;switch(t.componentType){case X.ComponentType.FLOAT:s=u.getFloat32(n,!0);break;case X.ComponentType.UNSIGNED_INT:s=u.getUint32(n,!0);break;case X.ComponentType.UNSIGNED_SHORT:s=u.getUint16(n,!0);break;case X.ComponentType.UNSIGNED_BYTE:s=u.getUint8(n);break;case X.ComponentType.SHORT:s=u.getInt16(n,!0);break;case X.ComponentType.BYTE:s=u.getInt8(n);break;default:throw new Error(`Unexpected componentType "${t.componentType}".`)}c[e*i+r]=s}return c}(t,e);const a=r.byteOffset+(t.byteOffset||0);return new s(r.buffer.slice(a,a+t.count*i*o))}var gt;!function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(gt||(gt={}));class bt{constructor(t,e,r){this.O=t,this.jsonDoc=e,this.options=r,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.U=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map;const n=t.getRoot(),s=n.listBuffers().length,i=n.listTextures().length;this.bufferURIGenerator=new Tt(s>1,(()=>r.basename||"buffer")),this.imageURIGenerator=new Tt(i>1,(e=>function(t,e){const r=t.getGraph().listParentEdges(e).find((e=>e.getParent()!==t.getRoot()));return r?r.getName().replace(/texture$/i,""):""}(t,e)||r.basename||"texture")),this.logger=t.getLogger()}createTextureInfoDef(t,e){const r={magFilter:e.getMagFilter()||void 0,minFilter:e.getMinFilter()||void 0,wrapS:e.getWrapS(),wrapT:e.getWrapT()},n=JSON.stringify(r);this.samplerDefIndexMap.has(n)||(this.samplerDefIndexMap.set(n,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(r));const s={source:this.imageIndexMap.get(t),sampler:this.samplerDefIndexMap.get(n),uuid:e.getUuid()},i=JSON.stringify(s);this.textureDefIndexMap.has(i)||(this.textureDefIndexMap.set(i,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(s));const o={index:this.textureDefIndexMap.get(i)};return 0!==e.getTexCoord()&&(o.texCoord=e.getTexCoord()),Object.keys(e.getExtras()).length>0&&(o.extras=e.getExtras()),this.textureInfoDefMap.set(e,o),o}createPropertyDef(t){const e={};return t.getName()&&(e.name=t.getName()),Object.keys(t.getExtras()).length>0&&(e.extras=t.getExtras()),e}createAccessorDef(t){const e=this.createPropertyDef(t);return e.type=t.getType(),e.componentType=t.getComponentType(),e.count=t.getCount(),this.O.getGraph().listParentEdges(t).some((t=>"attributes"===t.getName()&&"POSITION"===t.getAttributes().key||"input"===t.getName()))&&(e.max=t.getMax([]).map(Math.fround),e.min=t.getMin([]).map(Math.fround)),t.getNormalized()&&(e.normalized=t.getNormalized()),e}createImageData(t,e,r){if(this.options.format===y.GLB)this.imageBufferViews.push(e),t.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:e.byteLength});else{const n=I.mimeTypeToExtension(r.getMimeType());t.uri=this.imageURIGenerator.createURI(r,n),this.jsonDoc.resources[t.uri]=e}}getAccessorUsage(t){const e=this.U.get(t);if(e)return e;if(t.getSparse())return h.SPARSE;for(const e of this.O.getGraph().listParentEdges(t)){const{usage:t}=e.getAttributes();if(t)return t;e.getParent().propertyType!==_.ROOT&&this.logger.warn(`Missing attribute ".usage" on edge, "${e.getName()}".`)}return h.OTHER}addAccessorToUsageGroup(t,e){const r=this.U.get(t);if(r&&r!==e)throw new Error(`Accessor with usage "${r}" cannot be reused as "${e}".`);return this.U.set(t,e),this}listAccessorUsageGroups(){const t={};for(const[e,r]of Array.from(this.U.entries()))t[r]=t[r]||[],t[r].push(e);return t}}bt.BufferViewTarget=gt,bt.BufferViewUsage=h,bt.USAGE_TO_TARGET={[h.ARRAY_BUFFER]:gt.ARRAY_BUFFER,[h.ELEMENT_ARRAY_BUFFER]:gt.ELEMENT_ARRAY_BUFFER};class Tt{constructor(t,e){this.multiple=t,this.basename=e,this.counter={}}createURI(t,e){if(t.getURI())return t.getURI();if(this.multiple){const r=this.basename(t);return this.counter[r]=this.counter[r]||1,`${r}_${this.counter[r]++}.${e}`}return`${this.basename(t)}.${e}`}}const{BufferViewUsage:Et}=bt,{UNSIGNED_INT:At,UNSIGNED_SHORT:xt,UNSIGNED_BYTE:It}=X.ComponentType;var Rt;!function(t){t[t.JSON=1313821514]="JSON",t[t.BIN=5130562]="BIN"}(Rt||(Rt={}));class Mt{constructor(){this.S=w.DEFAULT_INSTANCE,this.h=new Set,this.C={},this.F=f.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(t){return this.S=t,this}registerExtensions(t){for(const e of t)this.h.add(e),e.register();return this}registerDependencies(t){return Object.assign(this.C,t),this}setVertexLayout(t){return this.F=t,this}async read(t){return await this.readJSON(await this.readAsJSON(t))}async readAsJSON(t){return t.match(/^data:application\/octet-stream;/)||this.detectFormat(t)===y.GLB?this.P(t):this.L(t)}async readJSON(t){return t=this.j(t),this._(t),class{static read(t,e=yt){const r=ut({},yt,e),{json:n}=t,s=(new ht).setLogger(r.logger);this.validate(t,r);const i=new dt(t),o=n.asset,a=s.getRoot().getAsset();o.copyright&&(a.copyright=o.copyright),o.extras&&(a.extras=o.extras),void 0!==n.extras&&s.getRoot().setExtras(ut({},n.extras));const c=n.extensionsUsed||[],u=n.extensionsRequired||[];for(const t of r.extensions)if(c.includes(t.EXTENSION_NAME)){const e=s.createExtension(t).setRequired(u.includes(t.EXTENSION_NAME));for(const t of e.readDependencies)e.install(t,r.dependencies[t])}const p=n.buffers||[];s.getRoot().listExtensionsUsed().filter((t=>t.prereadTypes.includes(_.BUFFER))).forEach((t=>t.preread(i,_.BUFFER))),i.buffers=p.map((t=>{const e=s.createBuffer(t.name);return t.extras&&e.setExtras(t.extras),t.uri&&0!==t.uri.indexOf("__")&&e.setURI(t.uri),e})),i.bufferViewBuffers=(n.bufferViews||[]).map(((e,r)=>{if(!i.bufferViews[r]){const n=t.json.buffers[e.buffer];i.bufferViews[r]=E.toView(n.uri?t.resources[n.uri]:t.resources["@glb.bin"],e.byteOffset||0,e.byteLength)}return i.buffers[e.buffer]}));const l=n.accessors||[];i.accessors=l.map((t=>{const e=s.createAccessor(t.name,i.bufferViewBuffers[t.bufferView]).setType(t.type);return t.extras&&e.setExtras(t.extras),void 0!==t.normalized&&e.setNormalized(t.normalized),void 0===t.bufferView||e.setArray(mt(t,i)),e}));const f=n.images||[],h=n.textures||[];s.getRoot().listExtensionsUsed().filter((t=>t.prereadTypes.includes(_.TEXTURE))).forEach((t=>t.preread(i,_.TEXTURE))),i.textures=f.map((e=>{const r=s.createTexture(e.name);if(e.extras&&r.setExtras(e.extras),void 0!==e.bufferView){const s=n.bufferViews[e.bufferView],i=t.json.buffers[s.buffer],o=s.byteOffset||0,a=(i.uri?t.resources[i.uri]:t.resources["@glb.bin"]).slice(o,o+s.byteLength);r.setImage(a)}else void 0!==e.uri&&(r.setImage(t.resources[e.uri]),0!==e.uri.indexOf("__")&&r.setURI(e.uri));if(void 0!==e.mimeType)r.setMimeType(e.mimeType);else if(e.uri){const t=M.extension(e.uri);r.setMimeType(I.extensionToMimeType(t))}return void 0!==e.uuid&&r.setUuid(e.uuid),r})),i.materials=(n.materials||[]).map((t=>{const e=s.createMaterial(t.name);t.extras&&e.setExtras(t.extras),void 0!==t.alphaMode&&e.setAlphaMode(t.alphaMode),void 0!==t.alphaCutoff&&e.setAlphaCutoff(t.alphaCutoff),void 0!==t.doubleSided&&e.setDoubleSided(t.doubleSided);const r=t.pbrMetallicRoughness||{};if(void 0!==r.baseColorFactor&&e.setBaseColorFactor(r.baseColorFactor),void 0!==t.emissiveFactor&&e.setEmissiveFactor(t.emissiveFactor),void 0!==r.metallicFactor&&e.setMetallicFactor(r.metallicFactor),void 0!==r.roughnessFactor&&e.setRoughnessFactor(r.roughnessFactor),void 0!==r.baseColorTexture){const t=r.baseColorTexture;e.setBaseColorTexture(i.textures[h[t.index].source]),t.uuid=h[t.index].uuid,i.setTextureInfo(e.getBaseColorTextureInfo(),t)}if(void 0!==t.emissiveTexture){const r=t.emissiveTexture;e.setEmissiveTexture(i.textures[h[r.index].source]),r.uuid=h[r.index].uuid,i.setTextureInfo(e.getEmissiveTextureInfo(),r)}if(void 0!==t.normalTexture){const r=t.normalTexture;e.setNormalTexture(i.textures[h[r.index].source]),r.uuid=h[r.index].uuid,i.setTextureInfo(e.getNormalTextureInfo(),r),void 0!==t.normalTexture.scale&&e.setNormalScale(t.normalTexture.scale)}if(void 0!==t.occlusionTexture){const r=t.occlusionTexture;e.setOcclusionTexture(i.textures[h[r.index].source]),r.uuid=h[r.index].uuid,i.setTextureInfo(e.getOcclusionTextureInfo(),r),void 0!==t.occlusionTexture.strength&&e.setOcclusionStrength(t.occlusionTexture.strength)}if(void 0!==r.metallicRoughnessTexture){const t=r.metallicRoughnessTexture;e.setMetallicRoughnessTexture(i.textures[h[t.index].source]),t.uuid=h[t.index].uuid,i.setTextureInfo(e.getMetallicRoughnessTextureInfo(),t)}return void 0!==t.uuid&&e.setUuid(t.uuid),e}));const d=n.meshes||[];s.getRoot().listExtensionsUsed().filter((t=>t.prereadTypes.includes(_.PRIMITIVE))).forEach((t=>t.preread(i,_.PRIMITIVE))),i.meshes=d.map((t=>{const e=s.createMesh(t.name);return t.extras&&e.setExtras(t.extras),void 0!==t.weights&&e.setWeights(t.weights),(t.primitives||[]).forEach((r=>{const n=s.createPrimitive();r.extras&&n.setExtras(r.extras),void 0!==r.material&&n.setMaterial(i.materials[r.material]),void 0!==r.mode&&n.setMode(r.mode);for(const[t,e]of Object.entries(r.attributes||{}))n.setAttribute(t,i.accessors[e]);void 0!==r.indices&&n.setIndices(i.accessors[r.indices]),void 0!==r.uuid&&n.setUuid(r.uuid);const o=t.extras&&t.extras.targetNames||[];(r.targets||[]).forEach(((t,e)=>{const r=o[e]||e.toString(),a=s.createPrimitiveTarget(r);for(const[e,r]of Object.entries(t))a.setAttribute(e,i.accessors[r]);n.addTarget(a)})),e.addPrimitive(n)})),void 0!==t.uuid&&e.setUuid(t.uuid),e})),i.cameras=(n.cameras||[]).map((t=>{const e=s.createCamera(t.name).setType(t.type);if(t.extras&&e.setExtras(t.extras),t.type===J.Type.PERSPECTIVE){const r=t.perspective;e.setYFov(r.yfov),e.setZNear(r.znear),void 0!==r.zfar&&e.setZFar(r.zfar),void 0!==r.aspectRatio&&e.setAspectRatio(r.aspectRatio)}else{const r=t.orthographic;e.setZNear(r.znear).setZFar(r.zfar).setXMag(r.xmag).setYMag(r.ymag)}return void 0!==t.uuid&&e.setUuid(t.uuid),e}));const y=n.nodes||[];s.getRoot().listExtensionsUsed().filter((t=>t.prereadTypes.includes(_.NODE))).forEach((t=>t.preread(i,_.NODE))),i.nodes=y.map((t=>{const e=s.createNode(t.name);if(t.extras&&e.setExtras(t.extras),void 0!==t.translation&&e.setTranslation(t.translation),void 0!==t.rotation&&e.setRotation(t.rotation),void 0!==t.scale&&e.setScale(t.scale),void 0!==t.matrix){const r=[0,0,0],n=[0,0,0,1],s=[1,1,1];D.decompose(t.matrix,r,n,s),e.setTranslation(r),e.setRotation(n),e.setScale(s)}return void 0!==t.weights&&e.setWeights(t.weights),void 0!==t.uuid&&e.setUuid(t.uuid),e})),i.skins=(n.skins||[]).map((t=>{const e=s.createSkin(t.name);t.extras&&e.setExtras(t.extras),void 0!==t.inverseBindMatrices&&e.setInverseBindMatrices(i.accessors[t.inverseBindMatrices]),void 0!==t.skeleton&&e.setSkeleton(i.nodes[t.skeleton]);for(const r of t.joints)e.addJoint(i.nodes[r]);return void 0!==t.uuid&&e.setUuid(t.uuid),e})),y.map(((t,e)=>{const r=i.nodes[e];(t.children||[]).forEach((t=>r.addChild(i.nodes[t]))),void 0!==t.mesh&&r.setMesh(i.meshes[t.mesh]),void 0!==t.camera&&r.setCamera(i.cameras[t.camera]),void 0!==t.skin&&r.setSkin(i.skins[t.skin])})),i.animations=(n.animations||[]).map((t=>{const e=s.createAnimation(t.name);t.extras&&e.setExtras(t.extras);const r=(t.samplers||[]).map((t=>{const r=s.createAnimationSampler().setInput(i.accessors[t.input]).setOutput(i.accessors[t.output]).setInterpolation(t.interpolation||Q.Interpolation.LINEAR);return t.extras&&r.setExtras(t.extras),e.addSampler(r),r}));return(t.channels||[]).forEach((t=>{const n=s.createAnimationChannel().setSampler(r[t.sampler]).setTargetPath(t.target.path);void 0!==t.target.node&&n.setTargetNode(i.nodes[t.target.node]),t.extras&&n.setExtras(t.extras),e.addChannel(n)})),void 0!==t.uuid&&e.setUuid(t.uuid),e}));const g=n.scenes||[];return s.getRoot().listExtensionsUsed().filter((t=>t.prereadTypes.includes(_.SCENE))).forEach((t=>t.preread(i,_.SCENE))),i.scenes=g.map((t=>{const e=s.createScene(t.name);return t.extras&&e.setExtras(t.extras),(t.nodes||[]).map((t=>i.nodes[t])).forEach((t=>e.addChild(t))),void 0!==t.uuid&&e.setUuid(t.uuid),e})),void 0!==n.scene&&s.getRoot().setDefaultScene(i.scenes[n.scene]),s.getRoot().listExtensionsUsed().forEach((t=>t.read(i))),l.forEach(((t,e)=>{const r=i.accessors[e],n=!!t.sparse,s=!t.bufferView&&!r.getArray();(n||s)&&r.setSparse(!0).setArray(function(t,e){const r=m[t.componentType],n=X.getElementSize(t.type);let s;s=void 0!==t.bufferView?mt(t,e):new r(t.count*n);const i=t.sparse;if(!i)return s;const o=i.count,a=ut({},t,i.indices,{count:o,type:"SCALAR"}),c=ut({},t,i.values,{count:o}),u=mt(a,e),p=mt(c,e);for(let t=0;t<a.count;t++)for(let e=0;e<n;e++)s[u[t]*n+e]=p[t*n+e];return s}(t,i))})),s}static validate(t,e){const r=t.json;if("2.0"!==r.asset.version)throw new Error(`Unsupported glTF version, "${r.asset.version}".`);if(r.extensionsRequired)for(const t of r.extensionsRequired)if(!e.extensions.find((e=>e.EXTENSION_NAME===t)))throw new Error(`Missing required extension, "${t}".`);if(r.extensionsUsed)for(const t of r.extensionsUsed)e.extensions.find((e=>e.EXTENSION_NAME===t))||e.logger.warn(`Missing optional extension, "${t}".`)}}.read(t,{extensions:Array.from(this.h),dependencies:this.C,logger:this.S})}async binaryToJSON(t){const e=this.D(E.assertView(t));this._(e);const r=e.json;if(r.buffers&&r.buffers.some((t=>function(t,e){return void 0!==e.uri&&!(e.uri in t.resources)}(e,t))))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(r.images&&r.images.some((t=>function(t,e){return void 0!==e.uri&&!(e.uri in t.resources)&&void 0===e.bufferView}(e,t))))throw new Error("Cannot resolve external images with binaryToJSON().");return e}async readBinary(t){return this.readJSON(await this.binaryToJSON(E.assertView(t)))}async writeJSON(t,e={}){if(e.format===y.GLB&&t.getRoot().listBuffers().length>1)throw new Error("GLB must have 0–1 buffers.");return class{static write(t,e){const r=t.getRoot(),n={asset:ut({generator:`glTF-Transform ${l}`},r.getAsset()),extras:ut({},r.getExtras())},s={json:n,resources:{}},i=new bt(t,s,e),o=e.logger||w.DEFAULT_INSTANCE,a=new Set(e.extensions.map((t=>t.EXTENSION_NAME))),c=t.getRoot().listExtensionsUsed().filter((t=>a.has(t.extensionName))),u=t.getRoot().listExtensionsRequired().filter((t=>a.has(t.extensionName)));c.length<t.getRoot().listExtensionsUsed().length&&o.warn("Some extensions were not registered for I/O, and will not be written.");for(const t of c)for(const r of t.writeDependencies)t.install(r,e.dependencies[r]);function p(t,e,r,s){const o=[];let a=0;for(const e of t){const t=i.createAccessorDef(e);t.bufferView=n.bufferViews.length;const r=e.getArray(),s=E.pad(E.toView(r));t.byteOffset=a,a+=s.byteLength,o.push(s),i.accessorIndexMap.set(e,n.accessors.length),n.accessors.push(t)}const c={buffer:e,byteOffset:r,byteLength:E.concat(o).byteLength};return s&&(c.target=s),n.bufferViews.push(c),{buffers:o,byteLength:a}}function h(t,e,r){const s=t[0].getCount();let o=0;for(const e of t){const t=i.createAccessorDef(e);t.bufferView=n.bufferViews.length,t.byteOffset=o;const r=e.getElementSize(),s=e.getComponentSize();o+=E.padNumber(r*s),i.accessorIndexMap.set(e,n.accessors.length),n.accessors.push(t)}const a=s*o,c=new ArrayBuffer(a),u=new DataView(c);for(let e=0;e<s;e++){let r=0;for(const n of t){const t=n.getElementSize(),s=n.getComponentSize(),i=n.getComponentType(),a=n.getArray();for(let n=0;n<t;n++){const c=e*o+r+n*s,p=a[e*t+n];switch(i){case X.ComponentType.FLOAT:u.setFloat32(c,p,!0);break;case X.ComponentType.BYTE:u.setInt8(c,p);break;case X.ComponentType.SHORT:u.setInt16(c,p,!0);break;case X.ComponentType.UNSIGNED_BYTE:u.setUint8(c,p);break;case X.ComponentType.UNSIGNED_SHORT:u.setUint16(c,p,!0);break;case X.ComponentType.UNSIGNED_INT:u.setUint32(c,p,!0);break;default:throw new Error("Unexpected component type: "+i)}}r+=E.padNumber(t*s)}}return n.bufferViews.push({buffer:e,byteOffset:r,byteLength:a,byteStride:o,target:bt.BufferViewTarget.ARRAY_BUFFER}),{byteLength:a,buffers:[new Uint8Array(c)]}}function d(t,e,r){const s=[];let a=0;const c=new Map;let u=-1/0;for(const e of t){const t=i.createAccessorDef(e);n.accessors.push(t),i.accessorIndexMap.set(e,n.accessors.length-1);const r=[],s=[],a=[],p=new Array(e.getElementSize()).fill(0);for(let t=0,n=e.getCount();t<n;t++)if(e.getElement(t,a),!D.eq(a,p,0)){u=Math.max(t,u),r.push(t);for(let t=0;t<a.length;t++)s.push(a[t])}const l=r.length,_={accessorDef:t,count:l};if(c.set(e,_),0===l)continue;if(l>e.getCount()/3){const t=(100*r.length/e.getCount()).toFixed(1);o.warn(`Sparse accessor with many non-zero elements (${t}%) may increase file size.`)}const f=m[e.getComponentType()];_.indices=r,_.values=new f(s)}if(!Number.isFinite(u))return{buffers:s,byteLength:a};const p=u<255?Uint8Array:u<65535?Uint16Array:Uint32Array,l=u<255?It:u<65535?xt:At,_={buffer:e,byteOffset:r+a,byteLength:0};for(const e of t){const t=c.get(e);if(0===t.count)continue;t.indicesByteOffset=_.byteLength;const r=E.pad(E.toView(new p(t.indices)));s.push(r),a+=r.byteLength,_.byteLength+=r.byteLength}n.bufferViews.push(_);const f=n.bufferViews.length-1,h={buffer:e,byteOffset:r+a,byteLength:0};for(const e of t){const t=c.get(e);if(0===t.count)continue;t.valuesByteOffset=h.byteLength;const r=E.pad(E.toView(t.values));s.push(r),a+=r.byteLength,h.byteLength+=r.byteLength}n.bufferViews.push(h);const d=n.bufferViews.length-1;for(const e of t){const t=c.get(e);0!==t.count&&(t.accessorDef.sparse={count:t.count,indices:{bufferView:f,byteOffset:t.indicesByteOffset,componentType:l},values:{bufferView:d,byteOffset:t.valuesByteOffset}})}return{buffers:s,byteLength:a}}const g=new Map;for(const e of t.getGraph().listEdges()){if(e.getParent()===r)continue;const t=e.getChild();if(t instanceof X){const r=g.get(t)||[];r.push(e),g.set(t,r)}}if(n.accessors=[],n.bufferViews=[],n.samplers=[],n.textures=[],n.images=r.listTextures().map(((t,e)=>{const r=i.createPropertyDef(t);t.getMimeType()&&(r.mimeType=t.getMimeType());const n=t.getImage();return n&&i.createImageData(r,n,t),t.getUuid()&&(r.uuid=t.getUuid()),i.imageIndexMap.set(t,e),r})),c.filter((t=>t.prewriteTypes.includes(_.ACCESSOR))).forEach((t=>t.prewrite(i,_.ACCESSOR))),r.listAccessors().forEach((t=>{const e=i.accessorUsageGroupedByParent,r=i.accessorParents;if(i.accessorIndexMap.has(t))return;const n=g.get(t)||[],s=i.getAccessorUsage(t);if(i.addAccessorToUsageGroup(t,s),e.has(s)){const e=n[0].getParent(),s=r.get(e)||new Set;s.add(t),r.set(e,s)}})),c.filter((t=>t.prewriteTypes.includes(_.BUFFER))).forEach((t=>t.prewrite(i,_.BUFFER))),(r.listAccessors().length>0||r.listTextures().length>0||i.otherBufferViews.size>0)&&0===r.listBuffers().length)throw new Error("Buffer required for Document resources, but none was found.");n.buffers=[],r.listBuffers().forEach(((t,r)=>{const o=i.createPropertyDef(t),a=i.accessorUsageGroupedByParent,c=i.accessorParents,u=t.listParents().filter((t=>t instanceof X)),l=new Set(u),_=[],m=n.buffers.length;let g=0;const b=i.listAccessorUsageGroups();for(const t in b)if(a.has(t))for(const r of Array.from(c.values())){const n=Array.from(r).filter((t=>l.has(t))).filter((e=>i.getAccessorUsage(e)===t));if(n.length)if(t!==Et.ARRAY_BUFFER||e.vertexLayout===f.INTERLEAVED){const e=t===Et.ARRAY_BUFFER?h(n,m,g):p(n,m,g);g+=e.byteLength,_.push(...e.buffers)}else for(const t of n){const e=h([t],m,g);g+=e.byteLength,_.push(...e.buffers)}}else{const e=b[t].filter((t=>l.has(t)));if(!e.length)continue;const r=t===Et.ELEMENT_ARRAY_BUFFER?bt.BufferViewTarget.ELEMENT_ARRAY_BUFFER:void 0,n=t===Et.SPARSE?d(e,m,g):p(e,m,g,r);g+=n.byteLength,_.push(...n.buffers)}if(i.imageBufferViews.length&&0===r)for(let t=0;t<i.imageBufferViews.length;t++)if(n.bufferViews[n.images[t].bufferView].byteOffset=g,g+=i.imageBufferViews[t].byteLength,_.push(i.imageBufferViews[t]),g%8){const t=8-g%8;g+=t,_.push(new Uint8Array(t))}if(i.otherBufferViews.has(t))for(const e of i.otherBufferViews.get(t))n.bufferViews.push({buffer:m,byteOffset:g,byteLength:e.byteLength}),i.otherBufferViewsIndexMap.set(e,n.bufferViews.length-1),g+=e.byteLength,_.push(e);if(g){let r;e.format===y.GLB?r="@glb.bin":(r=i.bufferURIGenerator.createURI(t,"bin"),o.uri=r),o.byteLength=g,s.resources[r]=E.concat(_)}n.buffers.push(o),i.bufferIndexMap.set(t,r)})),r.listAccessors().find((t=>!t.getBuffer()))&&o.warn("Skipped writing one or more Accessors: no Buffer assigned."),n.materials=r.listMaterials().map(((t,e)=>{const r=i.createPropertyDef(t);if(t.getAlphaMode()!==st.AlphaMode.OPAQUE&&(r.alphaMode=t.getAlphaMode()),t.getAlphaMode()===st.AlphaMode.MASK&&(r.alphaCutoff=t.getAlphaCutoff()),t.getDoubleSided()&&(r.doubleSided=!0),r.pbrMetallicRoughness={},D.eq(t.getBaseColorFactor(),[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=t.getBaseColorFactor()),D.eq(t.getEmissiveFactor(),[0,0,0])||(r.emissiveFactor=t.getEmissiveFactor()),1!==t.getRoughnessFactor()&&(r.pbrMetallicRoughness.roughnessFactor=t.getRoughnessFactor()),1!==t.getMetallicFactor()&&(r.pbrMetallicRoughness.metallicFactor=t.getMetallicFactor()),t.getBaseColorTexture()){const e=t.getBaseColorTexture(),n=t.getBaseColorTextureInfo();r.pbrMetallicRoughness.baseColorTexture=i.createTextureInfoDef(e,n)}if(t.getEmissiveTexture()){const e=t.getEmissiveTexture(),n=t.getEmissiveTextureInfo();r.emissiveTexture=i.createTextureInfoDef(e,n)}if(t.getNormalTexture()){const e=t.getNormalTexture(),n=t.getNormalTextureInfo(),s=i.createTextureInfoDef(e,n);1!==t.getNormalScale()&&(s.scale=t.getNormalScale()),r.normalTexture=s}if(t.getOcclusionTexture()){const e=t.getOcclusionTexture(),n=t.getOcclusionTextureInfo(),s=i.createTextureInfoDef(e,n);1!==t.getOcclusionStrength()&&(s.strength=t.getOcclusionStrength()),r.occlusionTexture=s}if(t.getMetallicRoughnessTexture()){const e=t.getMetallicRoughnessTexture(),n=t.getMetallicRoughnessTextureInfo();r.pbrMetallicRoughness.metallicRoughnessTexture=i.createTextureInfoDef(e,n)}return t.getUuid()&&(r.uuid=t.getUuid()),i.materialIndexMap.set(t,e),r})),n.meshes=r.listMeshes().map(((t,e)=>{const r=i.createPropertyDef(t);let n=null;return r.primitives=t.listPrimitives().map((t=>{const e={attributes:{},uuid:null};e.mode=t.getMode();const r=t.getMaterial();r&&(e.material=i.materialIndexMap.get(r)),Object.keys(t.getExtras()).length&&(e.extras=t.getExtras());const s=t.getIndices();s&&(e.indices=i.accessorIndexMap.get(s));for(const r of t.listSemantics())e.attributes[r]=i.accessorIndexMap.get(t.getAttribute(r));for(const r of t.listTargets()){const t={};for(const e of r.listSemantics())t[e]=i.accessorIndexMap.get(r.getAttribute(e));e.targets=e.targets||[],e.targets.push(t)}return t.listTargets().length&&!n&&(n=t.listTargets().map((t=>t.getName()))),t.getUuid()&&(e.uuid=t.getUuid()),e})),t.getWeights().length&&(r.weights=t.getWeights()),n&&(r.extras=r.extras||{},r.extras.targetNames=n),t.getUuid()&&(r.uuid=t.getUuid()),i.meshIndexMap.set(t,e),r})),n.cameras=r.listCameras().map(((t,e)=>{const r=i.createPropertyDef(t);if(r.type=t.getType(),r.type===J.Type.PERSPECTIVE){r.perspective={znear:t.getZNear(),zfar:t.getZFar(),yfov:t.getYFov()};const e=t.getAspectRatio();null!==e&&(r.perspective.aspectRatio=e)}else r.orthographic={znear:t.getZNear(),zfar:t.getZFar(),xmag:t.getXMag(),ymag:t.getYMag()};return t.getUuid()&&(r.uuid=t.getUuid()),i.cameraIndexMap.set(t,e),r})),n.nodes=r.listNodes().map(((t,e)=>{const r=i.createPropertyDef(t);return D.eq(t.getTranslation(),[0,0,0])||(r.translation=t.getTranslation()),D.eq(t.getRotation(),[0,0,0,1])||(r.rotation=t.getRotation()),D.eq(t.getScale(),[1,1,1])||(r.scale=t.getScale()),t.getWeights().length&&(r.weights=t.getWeights()),t.getUuid()&&(r.uuid=t.getUuid()),i.nodeIndexMap.set(t,e),r})),n.skins=r.listSkins().map(((t,e)=>{const r=i.createPropertyDef(t),n=t.getInverseBindMatrices();n&&(r.inverseBindMatrices=i.accessorIndexMap.get(n));const s=t.getSkeleton();return s&&(r.skeleton=i.nodeIndexMap.get(s)),r.joints=t.listJoints().map((t=>i.nodeIndexMap.get(t))),t.getUuid()&&(r.uuid=t.getUuid()),i.skinIndexMap.set(t,e),r})),r.listNodes().forEach(((t,e)=>{const r=n.nodes[e],s=t.getMesh();s&&(r.mesh=i.meshIndexMap.get(s));const o=t.getCamera();o&&(r.camera=i.cameraIndexMap.get(o));const a=t.getSkin();a&&(r.skin=i.skinIndexMap.get(a)),t.listChildren().length>0&&(r.children=t.listChildren().map((t=>i.nodeIndexMap.get(t))))})),n.animations=r.listAnimations().map(((t,e)=>{const r=i.createPropertyDef(t),n=new Map;return r.samplers=t.listSamplers().map(((t,e)=>{const r=i.createPropertyDef(t);return r.input=i.accessorIndexMap.get(t.getInput()),r.output=i.accessorIndexMap.get(t.getOutput()),r.interpolation=t.getInterpolation(),n.set(t,e),r})),r.channels=t.listChannels().map((t=>{const e=i.createPropertyDef(t);return e.sampler=n.get(t.getSampler()),e.target={node:i.nodeIndexMap.get(t.getTargetNode()),path:t.getTargetPath()},e})),t.getUuid()&&(r.uuid=t.getUuid()),i.animationIndexMap.set(t,e),r})),n.scenes=r.listScenes().map(((t,e)=>{const r=i.createPropertyDef(t);return r.nodes=t.listChildren().map((t=>i.nodeIndexMap.get(t))),t.getUuid()&&(r.uuid=t.getUuid()),i.sceneIndexMap.set(t,e),r}));const b=r.getDefaultScene();return b&&(n.scene=r.listScenes().indexOf(b)),n.extensionsUsed=c.map((t=>t.extensionName)),n.extensionsRequired=u.map((t=>t.extensionName)),c.forEach((t=>t.write(i))),function(t){const e=[];for(const r in t){const n=t[r];(Array.isArray(n)&&0===n.length||null===n||""===n||n&&"object"==typeof n&&0===Object.keys(n).length)&&e.push(r)}for(const r of e)delete t[r]}(n),s}}.write(t,{format:e.format||y.GLTF,basename:e.basename||"",logger:this.S,vertexLayout:this.F,dependencies:ut({},this.C),extensions:Array.from(this.h)})}async writeBinary(t){const{json:e,resources:r}=await this.writeJSON(t,{format:y.GLB}),n=new Uint32Array([1179937895,2,12]),s=JSON.stringify(e),i=E.pad(E.encodeText(s),32),o=E.toView(new Uint32Array([i.byteLength,1313821514])),a=E.concat([o,i]);n[n.length-1]+=a.byteLength;const c=Object.values(r)[0];if(!c||!c.byteLength)return E.concat([E.toView(n),a]);const u=E.pad(c,0),p=E.toView(new Uint32Array([u.byteLength,5130562])),l=E.concat([p,u]);return n[n.length-1]+=l.byteLength,E.concat([E.toView(n),a,l])}detectFormat(t){return"glb"===(k.isAbsoluteURL(t)?k.extension(t):M.extension(t))?y.GLB:y.GLTF}async L(t){this.lastReadBytes=0;const e=await this.readURI(t,"text");this.lastReadBytes+=e.length;const r={json:JSON.parse(e),resources:{}};return await this.k(r,this.dirname(t)),this._(r),r}async P(t){const e=await this.readURI(t,"view");this.lastReadBytes=e.byteLength;const r=this.D(e);return await this.k(r,this.dirname(t)),this._(r),r}async k(t,e){var r=this;const n=[...t.json.images||[],...t.json.buffers||[]].map((async function(n){const s=n.uri;if(!s||s.match(/data:/))return Promise.resolve();t.resources[s]=await r.readURI(r.resolve(e,s),"view"),r.lastReadBytes+=t.resources[s].byteLength}));await Promise.all(n)}_(t){function e(e){if(e.uri)if(e.uri in t.resources)E.assertView(t.resources[e.uri]);else if(e.uri.match(/data:/)){const r=`__${function(){for(let t=0;t<999;t++){const t=V();if(!G.has(t))return G.add(t),t}return""}()}.${M.extension(e.uri)}`;t.resources[r]=E.createBufferFromDataURI(e.uri),e.uri=r}}(t.json.images||[]).forEach((t=>{if(void 0===t.bufferView&&void 0===t.uri)throw new Error("Missing resource URI or buffer view.");e(t)})),(t.json.buffers||[]).forEach(e)}j(t){const{images:e,buffers:r}=t.json;return t={json:ut({},t.json),resources:ut({},t.resources)},e&&(t.json.images=e.map((t=>ut({},t)))),r&&(t.json.buffers=r.map((t=>ut({},t)))),t}D(t){const e=new Uint32Array(t.buffer,t.byteOffset,3);if(1179937895!==e[0])throw new Error("Invalid glTF asset.");if(2!==e[1])throw new Error(`Unsupported glTF binary version, "${e[1]}".`);const r=new Uint32Array(t.buffer,t.byteOffset+12,2);if(r[1]!==Rt.JSON)throw new Error("Missing required GLB JSON chunk.");const n=r[0],s=E.decodeText(E.toView(t,20,n)),i=JSON.parse(s),o=20+n;if(t.byteLength<=o)return{json:i,resources:{}};const a=new Uint32Array(t.buffer,t.byteOffset+o,2);if(a[1]!==Rt.BIN)throw new Error("Expected GLB BIN in second chunk.");return{json:i,resources:{"@glb.bin":E.toView(t,o+8,a[0])}}}}class St extends Mt{constructor(t=k.DEFAULT_INIT){super(),this.V=t}async readURI(t,e){const r=await fetch(t,this.V);switch(e){case"view":return new Uint8Array(await r.arrayBuffer());case"text":return r.text()}}resolve(t,e){return k.resolve(t,e)}dirname(t){return k.dirname(t)}detectFormat(t){return"glb"===k.extension(t)?y.GLB:y.GLTF}}class vt{constructor(){this._listeners={}}addEventListener(t,e){const r=this._listeners;return void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e),this}removeEventListener(t,e){if(void 0===this._listeners)return this;const r=this._listeners[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}return this}dispatchEvent(t){if(void 0===this._listeners)return this;const e=this._listeners[t.type];if(void 0!==e){const r=e.slice(0);for(let e=0,n=r.length;e<n;e++)r[e].call(this,t)}return this}dispose(){for(const t in this._listeners)delete this._listeners[t]}}class Nt extends vt{constructor(t,e,r,n={}){if(super(),this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=t,this._parent=e,this._child=r,this._attributes=n,!e.isOnGraph(r))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(t){return this._child=t,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._disposed=!0,this.dispatchEvent({type:"dispose",target:this}),super.dispose())}isDisposed(){return this._disposed}}function wt(){return wt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wt.apply(this,arguments)}function Ot(t){return t instanceof Nt}function Dt(t){return Array.isArray(t)&&t[0]instanceof Nt}function Ct(t){return!!(t&&"object"==typeof t&&Object.values(t)[0]instanceof Nt)}const jt=Symbol("attributes"),Ft=Symbol("immutableKeys");class Ut extends vt{constructor(t){super(),this._disposed=!1,this.graph=void 0,this[jt]=void 0,this[Ft]=void 0,this.graph=t,this[Ft]=new Set,this[jt]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const t=this.getDefaults(),e={};for(const r in t){const n=t[r];if(n instanceof Ut){const t=this.graph.createEdge(r,this,n);t.addEventListener("dispose",(()=>n.dispose())),this[Ft].add(r),e[r]=t}else e[r]=n}return e}isOnGraph(t){return this.graph===t.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach((t=>t.dispose())),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(t,e){for(const r in this[jt]){const n=this[jt][r];if(Ot(n)){const s=n;s.getChild()===t&&this.setRef(r,e,s.getAttributes())}else if(Dt(n)){const s=n.find((e=>e.getChild()===t));if(s){const n=s.getAttributes();this.removeRef(r,t).addRef(r,e,n)}}else if(Ct(n)){const s=n;for(const n in s){const i=s[n];i.getChild()===t&&this.setRefMap(r,n,e,i.getAttributes())}}}return this}get(t){return this[jt][t]}set(t,e){return this[jt][t]=e,this.dispatchEvent({type:"change",attribute:t})}getRef(t){const e=this[jt][t];return e?e.getChild():null}setRef(t,e,r){if(this[Ft].has(t))throw new Error(`Cannot overwrite immutable attribute, "${t}".`);const n=this[jt][t];if(n&&n.dispose(),!e)return this;const s=this.graph.createEdge(t,this,e,r);return s.addEventListener("dispose",(()=>{delete this[jt][t],this.dispatchEvent({type:"change",attribute:t})})),this[jt][t]=s,this.dispatchEvent({type:"change",attribute:t})}listRefs(t){return this[jt][t].map((t=>t.getChild()))}addRef(t,e,r){const n=this.graph.createEdge(t,this,e,r),s=this[jt][t];return s.push(n),n.addEventListener("dispose",(()=>{const e=s.filter((t=>t!==n));s.length=0;for(const t of e)s.push(t);this.dispatchEvent({type:"change",attribute:t})})),this.dispatchEvent({type:"change",attribute:t})}removeRef(t,e){return this[jt][t].filter((t=>t.getChild()===e)).forEach((t=>t.dispose())),this}listRefMapKeys(t){return Object.keys(this[jt][t])}listRefMapValues(t){return Object.values(this[jt][t]).map((t=>t.getChild()))}getRefMap(t,e){const r=this[jt][t];return r[e]?r[e].getChild():null}setRefMap(t,e,r,n){const s=this[jt][t],i=s[e];if(i&&i.dispose(),!r)return this;n=Object.assign(n||{},{key:e});const o=this.graph.createEdge(t,this,r,wt({},n,{key:e}));return o.addEventListener("dispose",(()=>{delete s[e],this.dispatchEvent({type:"change",attribute:t,key:e})})),s[e]=o,this.dispatchEvent({type:"change",attribute:t,key:e})}dispatchEvent(t){return super.dispatchEvent(wt({},t,{target:this})),this.graph.dispatchEvent(wt({},t,{target:this,type:`node:${t.type}`})),this}}var Pt="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function Lt(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function Bt(t,e,r){var n=e[0],s=e[1],i=e[2],o=r[3]*n+r[7]*s+r[11]*i+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*s+r[8]*i+r[12])/o,t[1]=(r[1]*n+r[5]*s+r[9]*i+r[13])/o,t[2]=(r[2]*n+r[6]*s+r[10]*i+r[14])/o,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Gt,Vt;Gt=new Pt(3),Pt!=Float32Array&&(Gt[0]=0,Gt[1]=0,Gt[2]=0),Vt=Gt;function kt(t,e,r){var n=e[0],s=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],p=e[7],l=e[8],_=e[9],f=e[10],h=e[11],d=e[12],y=e[13],m=e[14],g=e[15],b=r[0],T=r[1],E=r[2],A=r[3];return t[0]=b*n+T*a+E*l+A*d,t[1]=b*s+T*c+E*_+A*y,t[2]=b*i+T*u+E*f+A*m,t[3]=b*o+T*p+E*h+A*g,b=r[4],T=r[5],E=r[6],A=r[7],t[4]=b*n+T*a+E*l+A*d,t[5]=b*s+T*c+E*_+A*y,t[6]=b*i+T*u+E*f+A*m,t[7]=b*o+T*p+E*h+A*g,b=r[8],T=r[9],E=r[10],A=r[11],t[8]=b*n+T*a+E*l+A*d,t[9]=b*s+T*c+E*_+A*y,t[10]=b*i+T*u+E*f+A*m,t[11]=b*o+T*p+E*h+A*g,b=r[12],T=r[13],E=r[14],A=r[15],t[12]=b*n+T*a+E*l+A*d,t[13]=b*s+T*c+E*_+A*y,t[14]=b*i+T*u+E*f+A*m,t[15]=b*o+T*p+E*h+A*g,t}function zt(t,e){var r=new Pt(3);!function(t,e){var r=e[0],n=e[1],s=e[2],i=e[4],o=e[5],a=e[6],c=e[8],u=e[9],p=e[10];t[0]=Math.hypot(r,n,s),t[1]=Math.hypot(i,o,a),t[2]=Math.hypot(c,u,p)}(r,e);var n=1/r[0],s=1/r[1],i=1/r[2],o=e[0]*n,a=e[1]*s,c=e[2]*i,u=e[4]*n,p=e[5]*s,l=e[6]*i,_=e[8]*n,f=e[9]*s,h=e[10]*i,d=o+p+h,y=0;return d>0?(y=2*Math.sqrt(d+1),t[3]=.25*y,t[0]=(l-f)/y,t[1]=(_-c)/y,t[2]=(a-u)/y):o>p&&o>h?(y=2*Math.sqrt(1+o-p-h),t[3]=(l-f)/y,t[0]=.25*y,t[1]=(a+u)/y,t[2]=(_+c)/y):p>h?(y=2*Math.sqrt(1+p-o-h),t[3]=(_-c)/y,t[0]=(a+u)/y,t[1]=.25*y,t[2]=(l+f)/y):(y=2*Math.sqrt(1+h-o-p),t[3]=(a-u)/y,t[0]=(_+c)/y,t[1]=(l+f)/y,t[2]=.25*y),t}const Ht="@glb.bin";var Wt,Yt,Xt,qt,Kt,Qt;function $t(t,e){const r={min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]};for(const n of t.listPrimitives()){const t=n.getAttribute("POSITION");if(!t)continue;let s=[0,0,0],i=[0,0,0];for(let n=0;n<t.getCount();n++)s=t.getElement(n,s),i=Bt(i,s,e),Jt(i,r)}return r}function Jt(t,e){for(let r=0;r<3;r++)e.min[r]=Math.min(t[r],e.min[r]),e.max[r]=Math.max(t[r],e.max[r])}!function(t){t.ACCESSOR="Accessor",t.ANIMATION="Animation",t.ANIMATION_CHANNEL="AnimationChannel",t.ANIMATION_SAMPLER="AnimationSampler",t.BUFFER="Buffer",t.CAMERA="Camera",t.MATERIAL="Material",t.MESH="Mesh",t.PRIMITIVE="Primitive",t.PRIMITIVE_TARGET="PrimitiveTarget",t.NODE="Node",t.ROOT="Root",t.SCENE="Scene",t.SKIN="Skin",t.TEXTURE="Texture",t.TEXTURE_INFO="TextureInfo"}(Wt||(Wt={})),function(t){t.INTERLEAVED="interleaved",t.SEPARATE="separate"}(Yt||(Yt={})),function(t){t.ARRAY_BUFFER="ARRAY_BUFFER",t.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",t.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",t.OTHER="OTHER"}(Xt||(Xt={})),function(t){t[t.R=4096]="R",t[t.G=256]="G",t[t.B=16]="B",t[t.A=1]="A"}(qt||(qt={})),function(t){t.GLTF="GLTF",t.GLB="GLB"}(Kt||(Kt={}));class Zt{static createBufferFromDataURI(t){if("undefined"==typeof Buffer){const e=atob(t.split(",")[1]),r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}{const e=t.split(",")[1],r=t.indexOf("base64")>=0;return Buffer.from(e,r?"base64":"utf8")}}static encodeText(t){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(t):Buffer.from(t)}static decodeText(t){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):Buffer.from(t).toString("utf8")}static concat(t){let e=0;for(const r of t)e+=r.byteLength;const r=new Uint8Array(e);let n=0;for(const e of t)r.set(e,n),n+=e.byteLength;return r}static pad(t,e=0){const r=this.padNumber(t.byteLength);if(r===t.byteLength)return t;const n=new Uint8Array(r);if(n.set(t),0!==e)for(let s=t.byteLength;s<r;s++)n[s]=e;return n}static padNumber(t){return 4*Math.ceil(t/4)}static equals(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;let r=t.byteLength;for(;r--;)if(t[r]!==e[r])return!1;return!0}static toView(t,e=0,r=1/0){return new Uint8Array(t.buffer,t.byteOffset+e,Math.min(t.byteLength,r))}static assertView(t){if(t&&!ArrayBuffer.isView(t))throw new Error(`Method requires Uint8Array parameter; received "${typeof t}".`);return t}}class te{static hexToFactor(t,e){t=Math.floor(t);const r=e;return r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,this.convertSRGBToLinear(e,e)}static factorToHex(t){const e=[...t],[r,n,s]=this.convertLinearToSRGB(t,e);return 255*r<<16^255*n<<8^255*s<<0}static convertSRGBToLinear(t,e){const r=t,n=e;for(let t=0;t<3;t++)n[t]=r[t]<.04045?.0773993808*r[t]:Math.pow(.9478672986*r[t]+.0521327014,2.4);return e}static convertLinearToSRGB(t,e){const r=t,n=e;for(let t=0;t<3;t++)n[t]=r[t]<.0031308?12.92*r[t]:1.055*Math.pow(r[t],.41666)-.055;return e}}class ee{match(t){return t.length>=8&&137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]}getSize(t){const e=new DataView(t.buffer,t.byteOffset);return Zt.decodeText(t.slice(12,16))===ee.PNG_FRIED_CHUNK_NAME?[e.getUint32(32,!1),e.getUint32(36,!1)]:[e.getUint32(16,!1),e.getUint32(20,!1)]}getChannels(t){return 4}}ee.PNG_FRIED_CHUNK_NAME="CgBI";class re{static registerFormat(t,e){this.impls[t]=e}static getMimeType(t){for(const e in this.impls)if(this.impls[e].match(t))return e;return null}static getSize(t,e){return this.impls[e]?this.impls[e].getSize(t):null}static getChannels(t,e){return this.impls[e]?this.impls[e].getChannels(t):null}static getMemSize(t,e){if(!this.impls[e])return null;if(this.impls[e].getGPUByteLength)return this.impls[e].getGPUByteLength(t);let r=0;const n=this.getSize(t,e);if(!n)return null;for(;n[0]>1||n[1]>1;)r+=n[0]*n[1]*4,n[0]=Math.max(Math.floor(n[0]/2),1),n[1]=Math.max(Math.floor(n[1]/2),1);return r+=4,r}static mimeTypeToExtension(t){return"image/jpeg"===t?"jpg":t.split("/").pop()}static extensionToMimeType(t){return"jpg"===t?"image/jpeg":`image/${t}`}}function ne(t,e){if(e>t.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==t.getUint8(e))throw new TypeError("Invalid JPG, marker table corrupted");return t}re.impls={"image/jpeg":new class{match(t){return t.length>=3&&255===t[0]&&216===t[1]&&255===t[2]}getSize(t){let e,r,n=new DataView(t.buffer,t.byteOffset+4);for(;n.byteLength;){if(e=n.getUint16(0,!1),ne(n,e),r=n.getUint8(e+1),192===r||193===r||194===r)return[n.getUint16(e+7,!1),n.getUint16(e+5,!1)];n=new DataView(t.buffer,n.byteOffset+e+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(t){return 3}},"image/png":new ee};class se{static basename(t){const e=t.split(/[\\/]/).pop();return e.substring(0,e.lastIndexOf("."))}static extension(t){if(t.startsWith("data:image/")){const e=t.match(/data:(image\/\w+)/)[1];return re.mimeTypeToExtension(e)}return t.startsWith("data:model/gltf+json")?"gltf":t.startsWith("data:model/gltf-binary")?"glb":t.startsWith("data:application/")?"bin":t.split(/[\\/]/).pop().split(/[.]/).pop()}}function ie(t){return"[object Object]"===Object.prototype.toString.call(t)}function oe(t){if(!1===ie(t))return!1;const e=t.constructor;if(void 0===e)return!0;const r=e.prototype;return!1!==ie(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}!function(t){t[t.SILENT=4]="SILENT",t[t.ERROR=3]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=1]="INFO",t[t.DEBUG=0]="DEBUG"}(Qt||(Qt={}));class ae{constructor(t){this.verbosity=void 0,this.verbosity=t}debug(t){this.verbosity<=ae.Verbosity.DEBUG&&console.debug(t)}info(t){this.verbosity<=ae.Verbosity.INFO&&console.info(t)}warn(t){this.verbosity<=ae.Verbosity.WARN&&console.warn(t)}error(t){this.verbosity<=ae.Verbosity.ERROR&&console.error(t)}}ae.Verbosity=Qt,ae.DEFAULT_INSTANCE=new ae(ae.Verbosity.INFO);class ce{static identity(t){return t}static eq(t,e,r=1e-5){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(Math.abs(t[n]-e[n])>r)return!1;return!0}static denormalize(t,e){switch(e){case 5126:return t;case 5123:return t/65535;case 5121:return t/255;case 5122:return Math.max(t/32767,-1);case 5120:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}static normalize(t,e){switch(e){case 5126:return t;case 5123:return Math.round(65535*t);case 5121:return Math.round(255*t);case 5122:return Math.round(32767*t);case 5120:return Math.round(127*t);default:throw new Error("Invalid component type.")}}static decompose(t,e,r,n){let s=Lt([t[0],t[1],t[2]]);const i=Lt([t[4],t[5],t[6]]),o=Lt([t[8],t[9],t[10]]);(function(t){var e=t[0],r=t[1],n=t[2],s=t[3],i=t[4],o=t[5],a=t[6],c=t[7],u=t[8],p=t[9],l=t[10],_=t[11],f=t[12],h=t[13],d=t[14],y=t[15];return(e*o-r*i)*(l*y-_*d)-(e*a-n*i)*(p*y-_*h)+(e*c-s*i)*(p*d-l*h)+(r*a-n*o)*(u*y-_*f)-(r*c-s*o)*(u*d-l*f)+(n*c-s*a)*(u*h-p*f)})(t)<0&&(s=-s),e[0]=t[12],e[1]=t[13],e[2]=t[14];const a=t.slice(),c=1/s,u=1/i,p=1/o;a[0]*=c,a[1]*=c,a[2]*=c,a[4]*=u,a[5]*=u,a[6]*=u,a[8]*=p,a[9]*=p,a[10]*=p,zt(r,a),n[0]=s,n[1]=i,n[2]=o}static compose(t,e,r,n){const s=n,i=e[0],o=e[1],a=e[2],c=e[3],u=i+i,p=o+o,l=a+a,_=i*u,f=i*p,h=i*l,d=o*p,y=o*l,m=a*l,g=c*u,b=c*p,T=c*l,E=r[0],A=r[1],x=r[2];return s[0]=(1-(d+m))*E,s[1]=(f+T)*E,s[2]=(h-b)*E,s[3]=0,s[4]=(f-T)*A,s[5]=(1-(_+m))*A,s[6]=(y+g)*A,s[7]=0,s[8]=(h+b)*x,s[9]=(y-g)*x,s[10]=(1-(_+d))*x,s[11]=0,s[12]=t[0],s[13]=t[1],s[14]=t[2],s[15]=1,s}}function ue(t,e){if(!!t!=!!e)return!1;const r=t.getChild(),n=e.getChild();return r===n||r.equals(n)}function pe(t,e){if(!!t!=!!e)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const n=t[r],s=e[r];if(n.getChild()!==s.getChild()&&!n.getChild().equals(s.getChild()))return!1}return!0}function le(t,e){if(!!t!=!!e)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const r in t){const n=t[r],s=e[r];if(!!n!=!!s)return!1;const i=n.getChild(),o=s.getChild();if(i!==o&&!i.equals(o))return!1}return!0}function _e(t,e){if(t===e)return!0;if(!!t!=!!e||!t||!e)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function fe(t,e){if(t===e)return!0;if(!!t!=!!e)return!1;if(!oe(t)||!oe(e))return t===e;const r=t,n=e;let s,i=0,o=0;for(s in r)i++;for(s in n)o++;if(i!==o)return!1;for(s in r){const t=r[s],e=n[s];if(he(t)&&he(e)){if(!_e(t,e))return!1}else if(oe(t)&&oe(e)){if(!fe(t,e))return!1}else if(t!==e)return!1}return!0}function he(t){return Array.isArray(t)||ArrayBuffer.isView(t)}new Set;class de{static dirname(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substring(0,e+1)}static basename(t){return se.basename(new URL(t,"https://null.example").pathname)}static extension(t){return se.extension(new URL(t,"https://null.example").pathname)}static resolve(t,e){if(!this.isRelativePath(e))return e;const r=t.split("/"),n=e.split("/");r.pop();for(let t=0;t<n.length;t++)"."!==n[t]&&(".."===n[t]?r.pop():r.push(n[t]));return r.join("/")}static isAbsoluteURL(t){return this.PROTOCOL_REGEXP.test(t)}static isRelativePath(t){return!/^(?:[a-zA-Z]+:)?\//.test(t)}}de.DEFAULT_INIT={},de.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;const ye=t=>t,me=new Set;class ge extends Ut{constructor(t,e=""){super(t),this[jt].name=e,this.init(),this.dispatchEvent({type:"create"})}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}getName(){return this.get("name")}setName(t){return this.set("name",t)}getExtras(){return this.get("extras")}setExtras(t){return this.set("extras",t)}clone(){return new(0,this.constructor)(this.graph).copy(this,ye)}copy(t,e=ye){for(const t in this[jt]){const e=this[jt][t];if(e instanceof Nt)this[Ft].has(t)||e.dispose();else if(Dt(e))for(const t of e)t.dispose();else if(Ct(e))for(const t in e)e[t].dispose()}for(const r in t[jt]){const n=this[jt][r],s=t[jt][r];if(s instanceof Nt)this[Ft].has(r)?n.getChild().copy(e(s.getChild()),e):this.setRef(r,e(s.getChild()),s.getAttributes());else if(Dt(s))for(const t of s)this.addRef(r,e(t.getChild()),t.getAttributes());else if(Ct(s))for(const t in s){const n=s[t];this.setRefMap(r,t,e(n.getChild()),n.getAttributes())}else this[jt][r]=oe(s)?JSON.parse(JSON.stringify(s)):Array.isArray(s)||s instanceof ArrayBuffer||ArrayBuffer.isView(s)?s.slice():s}return this}equals(t,e=me){if(this===t)return!0;if(this.propertyType!==t.propertyType)return!1;for(const r in this[jt]){if(e.has(r))continue;const n=this[jt][r],s=t[jt][r];if(Ot(n)||Ot(s)){if(!ue(n,s))return!1}else if(Dt(n)||Dt(s)){if(!pe(n,s))return!1}else if(Ct(n)||Ct(s)){if(!le(n,s))return!1}else if(oe(n)||oe(s)){if(!fe(n,s))return!1}else if(he(n)||he(s)){if(!_e(n,s))return!1}else if(n!==s)return!1}return!0}detach(){return this.graph.disconnectParents(this,(t=>"Root"!==t.propertyType)),this}listParents(){return this.graph.listParents(this)}}class be extends ge{getDefaults(){return Object.assign(super.getDefaults(),{extensions:{}})}getExtension(t){return this.getRefMap("extensions",t)}setExtension(t,e){return e&&e.t(this),this.setRefMap("extensions",t,e)}listExtensions(){return this.listRefMapValues("extensions")}}class Te extends be{constructor(...t){super(...t),this.i=ce.identity,this.o=ce.identity}init(){this.propertyType=Wt.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:Te.Type.SCALAR,componentType:Te.ComponentType.FLOAT,normalized:!1,buffer:null})}copy(t,e=ye){return super.copy(t,e),this.i=t.i,this.o=t.o,this}static getElementSize(t){switch(t){case Te.Type.SCALAR:return 1;case Te.Type.VEC2:return 2;case Te.Type.VEC3:return 3;case Te.Type.VEC4:case Te.Type.MAT2:return 4;case Te.Type.MAT3:return 9;case Te.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+t)}}static getComponentSize(t){switch(t){case Te.ComponentType.BYTE:case Te.ComponentType.UNSIGNED_BYTE:return 1;case Te.ComponentType.SHORT:case Te.ComponentType.UNSIGNED_SHORT:return 2;case Te.ComponentType.UNSIGNED_INT:case Te.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+t)}}getMinNormalized(t){const e=this.getElementSize();this.getMin(t);for(let r=0;r<e;r++)t[r]=this.o(t[r]);return t}getMin(t){const e=this.get("array"),r=this.getCount(),n=this.getElementSize();for(let e=0;e<n;e++)t[e]=1/0;for(let s=0;s<r*n;s+=n)for(let r=0;r<n;r++){const n=e[s+r];Number.isFinite(n)&&(t[r]=Math.min(t[r],n))}return t}getMaxNormalized(t){const e=this.getElementSize();this.getMax(t);for(let r=0;r<e;r++)t[r]=this.o(t[r]);return t}getMax(t){const e=this.get("array"),r=this.getCount(),n=this.getElementSize();for(let e=0;e<n;e++)t[e]=-1/0;for(let s=0;s<r*n;s+=n)for(let r=0;r<n;r++){const n=e[s+r];Number.isFinite(n)&&(t[r]=Math.max(t[r],n))}return t}getCount(){const t=this.get("array");return t?t.length/this.getElementSize():0}getType(){return this.get("type")}setType(t){return this.set("type",t)}getElementSize(){return Te.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(t){return this.set("normalized",t),t?(this.o=t=>ce.denormalize(t,this.get("componentType")),this.i=t=>ce.normalize(t,this.get("componentType"))):(this.o=ce.identity,this.i=ce.identity),this}getScalar(t){const e=this.getElementSize();return this.o(this.get("array")[t*e])}setScalar(t,e){return this.get("array")[t*this.getElementSize()]=this.i(e),this}getElement(t,e){const r=this.getElementSize(),n=this.get("array");for(let s=0;s<r;s++)e[s]=this.o(n[t*r+s]);return e}setElement(t,e){const r=this.getElementSize(),n=this.get("array");for(let s=0;s<r;s++)n[t*r+s]=this.i(e[s]);return this}getBuffer(){return this.getRef("buffer")}setBuffer(t){return this.setRef("buffer",t)}getArray(){return this.get("array")}setArray(t){return this.set("componentType",t?function(t){switch(t.constructor){case Float32Array:return Te.ComponentType.FLOAT;case Uint32Array:return Te.ComponentType.UNSIGNED_INT;case Uint16Array:return Te.ComponentType.UNSIGNED_SHORT;case Uint8Array:return Te.ComponentType.UNSIGNED_BYTE;case Int16Array:return Te.ComponentType.SHORT;case Int8Array:return Te.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(t):Te.ComponentType.FLOAT),this.set("array",t),this}getByteLength(){const t=this.get("array");return t?t.byteLength:0}}Te.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},Te.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};class Ee extends be{init(){this.propertyType=Wt.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:[],samplers:[]})}addChannel(t){return this.addRef("channels",t)}removeChannel(t){return this.removeRef("channels",t)}listChannels(){return this.listRefs("channels")}addSampler(t){return this.addRef("samplers",t)}removeSampler(t){return this.removeRef("samplers",t)}listSamplers(){return this.listRefs("samplers")}}class Ae extends be{init(){this.propertyType=Wt.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(t){return this.set("targetPath",t)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(t){return this.setRef("targetNode",t)}getSampler(){return this.getRef("sampler")}setSampler(t){return this.setRef("sampler",t)}}Ae.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class xe extends be{init(){this.propertyType=Wt.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:xe.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(t){return this.set("interpolation",t)}getInput(){return this.getRef("input")}setInput(t){return this.setRef("input",t,{usage:Xt.OTHER})}getOutput(){return this.getRef("output")}setOutput(t){return this.setRef("output",t,{usage:Xt.OTHER})}}xe.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class Ie extends be{init(){this.propertyType=Wt.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(t){return this.set("uri",t)}}class Re extends be{init(){this.propertyType=Wt.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:Re.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:2*Math.PI*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(t){return this.set("type",t)}getZNear(){return this.get("znear")}setZNear(t){return this.set("znear",t)}getZFar(){return this.get("zfar")}setZFar(t){return this.set("zfar",t)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(t){return this.set("aspectRatio",t)}getYFov(){return this.get("yfov")}setYFov(t){return this.set("yfov",t)}getXMag(){return this.get("xmag")}setXMag(t){return this.set("xmag",t)}getYMag(){return this.get("ymag")}setYMag(t){return this.set("ymag",t)}}Re.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class Me extends ge{t(t){if(!this.parentTypes.includes(t.propertyType))throw new Error(`Parent "${t.propertyType}" invalid for child "${this.propertyType}".`)}}Me.EXTENSION_NAME=void 0;class Se extends be{init(){this.propertyType=Wt.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:Se.WrapMode.REPEAT,wrapT:Se.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(t){return this.set("texCoord",t)}getMagFilter(){return this.get("magFilter")}setMagFilter(t){return this.set("magFilter",t)}getMinFilter(){return this.get("minFilter")}setMinFilter(t){return this.set("minFilter",t)}getWrapS(){return this.get("wrapS")}setWrapS(t){return this.set("wrapS",t)}getWrapT(){return this.get("wrapT")}setWrapT(t){return this.set("wrapT",t)}}Se.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Se.MagFilter={NEAREST:9728,LINEAR:9729},Se.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:ve,G:Ne,B:we,A:Oe}=qt;class De extends be{init(){this.propertyType=Wt.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:De.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new Se(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new Se(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new Se(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new Se(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new Se(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(t){return this.set("doubleSided",t)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(t){const e=this.get("baseColorFactor").slice();return e[3]=t,this.set("baseColorFactor",e)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(t){return this.set("alphaMode",t)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(t){return this.set("alphaCutoff",t)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(t){return this.set("baseColorFactor",t)}getBaseColorHex(){return te.factorToHex(this.get("baseColorFactor"))}setBaseColorHex(t){const e=this.get("baseColorFactor").slice();return this.set("baseColorFactor",te.hexToFactor(t,e))}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(t){return this.setRef("baseColorTexture",t,{channels:ve|Ne|we|Oe})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(t){return this.set("emissiveFactor",t)}getEmissiveHex(){return te.factorToHex(this.get("emissiveFactor"))}setEmissiveHex(t){const e=this.get("emissiveFactor").slice();return this.set("emissiveFactor",te.hexToFactor(t,e))}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(t){return this.setRef("emissiveTexture",t,{channels:ve|Ne|we})}getNormalScale(){return this.get("normalScale")}setNormalScale(t){return this.set("normalScale",t)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(t){return this.setRef("normalTexture",t,{channels:ve|Ne|we})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(t){return this.set("occlusionStrength",t)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(t){return this.setRef("occlusionTexture",t,{channels:ve})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(t){return this.set("roughnessFactor",t)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(t){return this.set("metallicFactor",t)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(t){return this.setRef("metallicRoughnessTexture",t,{channels:Ne|we})}}De.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class Ce extends be{init(){this.propertyType=Wt.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:[]})}addPrimitive(t){return this.addRef("primitives",t)}removePrimitive(t){return this.removeRef("primitives",t)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(t){return this.set("weights",t)}}class je extends be{constructor(...t){super(...t),this.u=null}init(){this.propertyType=Wt.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:[]})}copy(t,e=ye){if(e===ye)throw new Error("Node cannot be copied.");return super.copy(t,e)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(t){return this.set("translation",t)}setRotation(t){return this.set("rotation",t)}setScale(t){return this.set("scale",t)}getMatrix(){return ce.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(t){const e=this.get("translation").slice(),r=this.get("rotation").slice(),n=this.get("scale").slice();return ce.decompose(t,e,r,n),this.set("translation",e).set("rotation",r).set("scale",n)}getWorldTranslation(){const t=[0,0,0];return ce.decompose(this.getWorldMatrix(),t,[0,0,0,1],[1,1,1]),t}getWorldRotation(){const t=[0,0,0,1];return ce.decompose(this.getWorldMatrix(),[0,0,0],t,[1,1,1]),t}getWorldScale(){const t=[1,1,1];return ce.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],t),t}getWorldMatrix(){const t=[];for(let e=this;e instanceof je;e=e.u)t.push(e);let e;const r=t.pop().getMatrix();for(;e=t.pop();)kt(r,r,e.getMatrix());return r}addChild(t){t.u&&t.u.removeChild(t),this.addRef("children",t),t.u=this;const e=this[jt].children;return e[e.length-1].addEventListener("dispose",(()=>t.u=null)),this}removeChild(t){return this.removeRef("children",t)}listChildren(){return this.listRefs("children")}getParent(){return this.u}getMesh(){return this.getRef("mesh")}setMesh(t){return this.setRef("mesh",t)}getCamera(){return this.getRef("camera")}setCamera(t){return this.setRef("camera",t)}getSkin(){return this.getRef("skin")}setSkin(t){return this.setRef("skin",t)}getWeights(){return this.get("weights")}setWeights(t){return this.set("weights",t)}traverse(t){t(this);for(const e of this.listChildren())e.traverse(t);return this}}class Fe extends be{init(){this.propertyType=Wt.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:Fe.Mode.TRIANGLES,material:null,indices:null,attributes:{},targets:[]})}getIndices(){return this.getRef("indices")}setIndices(t){return this.setRef("indices",t,{usage:Xt.ELEMENT_ARRAY_BUFFER})}getAttribute(t){return this.getRefMap("attributes",t)}setAttribute(t,e){return this.setRefMap("attributes",t,e,{usage:Xt.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(t){return this.setRef("material",t)}getMode(){return this.get("mode")}setMode(t){return this.set("mode",t)}listTargets(){return this.listRefs("targets")}addTarget(t){return this.addRef("targets",t)}removeTarget(t){return this.removeRef("targets",t)}}Fe.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};function Ue(){return(Ue=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}class Pe extends be{init(){this.propertyType=Wt.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:[]})}copy(t,e=ye){if(e===ye)throw new Error("Scene cannot be copied.");return super.copy(t,e)}addChild(t){t.u&&t.u.removeChild(t),this.addRef("children",t),t.u=this;const e=this[jt].children;return e[e.length-1].addEventListener("dispose",(()=>t.u=null)),this}removeChild(t){return this.removeRef("children",t)}listChildren(){return this.listRefs("children")}traverse(t){for(const e of this.listChildren())e.traverse(t);return this}}class Le extends be{init(){this.propertyType=Wt.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:[]})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(t){return this.setRef("skeleton",t)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(t){return this.setRef("inverseBindMatrices",t,{usage:Xt.INVERSE_BIND_MATRICES})}addJoint(t){return this.addRef("joints",t)}removeJoint(t){return this.removeRef("joints",t)}listJoints(){return this.listRefs("joints")}}class Be extends be{init(){this.propertyType=Wt.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||re.extensionToMimeType(se.extension(this.get("uri")))}setMimeType(t){return this.set("mimeType",t)}getURI(){return this.get("uri")}setURI(t){return this.set("uri",t),this.set("mimeType",re.extensionToMimeType(se.extension(t))),this}getImage(){return this.get("image")}setImage(t){return this.set("image",Zt.assertView(t))}getSize(){const t=this.get("image");return t?re.getSize(t,this.getMimeType()):null}}class Ge extends be{init(){this.propertyType=Wt.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:"glTF-Transform v2.5.1",version:"2.0"},defaultScene:null,accessors:[],animations:[],buffers:[],cameras:[],materials:[],meshes:[],nodes:[],scenes:[],skins:[],textures:[]})}constructor(t){super(t),this.h=new Set,t.addEventListener("node:create",(t=>{this.l(t.target)}))}clone(){throw new Error("Root cannot be cloned.")}copy(t,e=ye){if(e===ye)throw new Error("Root cannot be copied.");this.set("asset",Ue({},t.get("asset"))),this.setName(t.getName()),this.setExtras(Ue({},t.getExtras())),this.setDefaultScene(t.getDefaultScene()?e(t.getDefaultScene()):null);for(const r of t.listRefMapKeys("extensions")){const n=t.getExtension(r);this.setExtension(r,e(n))}return this}l(t){return t instanceof Pe?this.addRef("scenes",t):t instanceof je?this.addRef("nodes",t):t instanceof Re?this.addRef("cameras",t):t instanceof Le?this.addRef("skins",t):t instanceof Ce?this.addRef("meshes",t):t instanceof De?this.addRef("materials",t):t instanceof Be?this.addRef("textures",t):t instanceof Ee?this.addRef("animations",t):t instanceof Te?this.addRef("accessors",t):t instanceof Ie&&this.addRef("buffers",t),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this.h)}listExtensionsRequired(){return this.listExtensionsUsed().filter((t=>t.isRequired()))}g(t){return this.h.add(t),this}p(t){return this.h.delete(t),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(t){return this.setRef("defaultScene",t)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}class Ve{constructor(t){this.extensionName="",this.prereadTypes=[],this.prewriteTypes=[],this.readDependencies=[],this.writeDependencies=[],this.document=void 0,this.required=!1,this.properties=new Set,this.S=void 0,this.document=t,t.getRoot().g(this),this.S=t=>{const e=t,r=e.target;r instanceof Me&&r.extensionName===this.extensionName&&("node:create"===e.type&&this.M(r),"node:dispose"===e.type&&this.I(r))};const e=t.getGraph();e.addEventListener("node:create",this.S),e.addEventListener("node:dispose",this.S)}dispose(){this.document.getRoot().p(this);const t=this.document.getGraph();t.removeEventListener("node:create",this.S),t.removeEventListener("node:dispose",this.S);for(const t of this.properties)t.dispose()}static register(){}isRequired(){return this.required}setRequired(t){return this.required=t,this}listProperties(){return Array.from(this.properties)}M(t){return this.properties.add(t),this}I(t){return this.properties.delete(t),this}install(t,e){return this}preread(t,e){return this}prewrite(t,e){return this}}Ve.EXTENSION_NAME=void 0;Int8Array,Uint8Array,Int16Array,Uint16Array,Uint32Array,Float32Array,ae.DEFAULT_INSTANCE;var ke;!function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(ke||(ke={}));class ze{constructor(t,e,r){this.N=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this.O=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this.N=t,this.jsonDoc=e,this.options=r;const n=t.getRoot(),s=n.listBuffers().length,i=n.listTextures().length;this.bufferURIGenerator=new He(s>1,(()=>r.basename||"buffer")),this.imageURIGenerator=new He(i>1,(e=>function(t,e){const r=t.getGraph().listParentEdges(e).find((e=>e.getParent()!==t.getRoot()));return r?r.getName().replace(/texture$/i,""):""}(t,e)||r.basename||"texture")),this.logger=t.getLogger()}createTextureInfoDef(t,e){const r={magFilter:e.getMagFilter()||void 0,minFilter:e.getMinFilter()||void 0,wrapS:e.getWrapS(),wrapT:e.getWrapT()},n=JSON.stringify(r);this.samplerDefIndexMap.has(n)||(this.samplerDefIndexMap.set(n,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(r));const s={source:this.imageIndexMap.get(t),sampler:this.samplerDefIndexMap.get(n)},i=JSON.stringify(s);this.textureDefIndexMap.has(i)||(this.textureDefIndexMap.set(i,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(s));const o={index:this.textureDefIndexMap.get(i)};return 0!==e.getTexCoord()&&(o.texCoord=e.getTexCoord()),Object.keys(e.getExtras()).length>0&&(o.extras=e.getExtras()),this.textureInfoDefMap.set(e,o),o}createPropertyDef(t){const e={};return t.getName()&&(e.name=t.getName()),Object.keys(t.getExtras()).length>0&&(e.extras=t.getExtras()),e}createAccessorDef(t){const e=this.createPropertyDef(t);return e.type=t.getType(),e.componentType=t.getComponentType(),e.count=t.getCount(),this.N.getGraph().listParentEdges(t).some((t=>"attributes"===t.getName()&&"POSITION"===t.getAttributes().key||"input"===t.getName()))&&(e.max=t.getMax([]).map(Math.fround),e.min=t.getMin([]).map(Math.fround)),t.getNormalized()&&(e.normalized=t.getNormalized()),e}createImageData(t,e,r){if(this.options.format===Kt.GLB)this.imageBufferViews.push(e),t.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:e.byteLength});else{const n=re.mimeTypeToExtension(r.getMimeType());t.uri=this.imageURIGenerator.createURI(r,n),this.jsonDoc.resources[t.uri]=e}}getAccessorUsage(t){const e=this.O.get(t);if(e)return e;for(const e of this.N.getGraph().listParentEdges(t)){const{usage:t}=e.getAttributes();if(t)return t;e.getParent().propertyType!==Wt.ROOT&&this.N.getLogger().warn(`Missing attribute ".usage" on edge, "${e.getName()}".`)}return ze.BufferViewUsage.OTHER}addAccessorToUsageGroup(t,e){const r=this.O.get(t);if(r&&r!==e)throw new Error(`Accessor with usage "${r}" cannot be reused as "${e}".`);return this.O.set(t,e),this}listAccessorUsageGroups(){const t={};for(const[e,r]of Array.from(this.O.entries()))t[r]=t[r]||[],t[r].push(e);return t}}ze.BufferViewTarget=ke,ze.BufferViewUsage=Xt,ze.USAGE_TO_TARGET={[Xt.ARRAY_BUFFER]:ke.ARRAY_BUFFER,[Xt.ELEMENT_ARRAY_BUFFER]:ke.ELEMENT_ARRAY_BUFFER};class He{constructor(t,e){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=t,this.basename=e}createURI(t,e){if(t.getURI())return t.getURI();if(this.multiple){const r=this.basename(t);return this.counter[r]=this.counter[r]||1,`${r}_${this.counter[r]++}.${e}`}return`${this.basename(t)}.${e}`}}const{BufferViewUsage:We}=ze;var Ye;!function(t){t[t.JSON=1313821514]="JSON",t[t.BIN=5130562]="BIN"}(Ye||(Ye={}));class Xe{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class qe{constructor(t,e,r,n){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+e,r),this._littleEndian=n,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_skip(t){return this._offset+=t,this}_scan(t,e=0){const r=this._offset;let n=0;for(;this._dataView.getUint8(this._offset)!==e&&n<t;)n++,this._offset++;return n<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,n)}}new Uint8Array([0]);const Ke=[171,75,84,88,32,50,48,187,13,10,26,10];function Qe(t){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):Buffer.from(t).toString("utf8")}function $e(t){const e=new Uint8Array(t.buffer,t.byteOffset,Ke.length);if(e[0]!==Ke[0]||e[1]!==Ke[1]||e[2]!==Ke[2]||e[3]!==Ke[3]||e[4]!==Ke[4]||e[5]!==Ke[5]||e[6]!==Ke[6]||e[7]!==Ke[7]||e[8]!==Ke[8]||e[9]!==Ke[9]||e[10]!==Ke[10]||e[11]!==Ke[11])throw new Error("Missing KTX 2.0 identifier.");const r=new Xe,n=17*Uint32Array.BYTES_PER_ELEMENT,s=new qe(t,Ke.length,n,!0);r.vkFormat=s._nextUint32(),r.typeSize=s._nextUint32(),r.pixelWidth=s._nextUint32(),r.pixelHeight=s._nextUint32(),r.pixelDepth=s._nextUint32(),r.layerCount=s._nextUint32(),r.faceCount=s._nextUint32();const i=s._nextUint32();r.supercompressionScheme=s._nextUint32();const o=s._nextUint32(),a=s._nextUint32(),c=s._nextUint32(),u=s._nextUint32(),p=s._nextUint64(),l=s._nextUint64(),_=new qe(t,Ke.length+n,3*i*8,!0);for(let e=0;e<i;e++)r.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+_._nextUint64(),_._nextUint64()),uncompressedByteLength:_._nextUint64()});const f=new qe(t,o,a,!0),h={vendorId:f._skip(4)._nextUint16(),descriptorType:f._nextUint16(),versionNumber:f._nextUint16(),descriptorBlockSize:f._nextUint16(),colorModel:f._nextUint8(),colorPrimaries:f._nextUint8(),transferFunction:f._nextUint8(),flags:f._nextUint8(),texelBlockDimension:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],bytesPlane:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],samples:[]},d=(h.descriptorBlockSize/4-6)/4;for(let t=0;t<d;t++){const e={bitOffset:f._nextUint16(),bitLength:f._nextUint8(),channelType:f._nextUint8(),samplePosition:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&e.channelType?(e.sampleLower=f._nextInt32(),e.sampleUpper=f._nextInt32()):(e.sampleLower=f._nextUint32(),e.sampleUpper=f._nextUint32()),h.samples[t]=e}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(h);const y=new qe(t,c,u,!0);for(;y._offset<u;){const t=y._nextUint32(),e=y._scan(t),n=Qe(e),s=y._scan(t-e.byteLength);r.keyValue[n]=n.match(/^ktx/i)?Qe(s):s,y._offset%4&&y._skip(4-y._offset%4)}if(l<=0)return r;const m=new qe(t,p,l,!0),g=m._nextUint16(),b=m._nextUint16(),T=m._nextUint32(),E=m._nextUint32(),A=m._nextUint32(),x=m._nextUint32(),I=[];for(let t=0;t<i;t++)I.push({imageFlags:m._nextUint32(),rgbSliceByteOffset:m._nextUint32(),rgbSliceByteLength:m._nextUint32(),alphaSliceByteOffset:m._nextUint32(),alphaSliceByteLength:m._nextUint32()});const R=p+m._offset,M=R+T,S=M+E,v=S+A,N=new Uint8Array(t.buffer,t.byteOffset+R,T),w=new Uint8Array(t.buffer,t.byteOffset+M,E),O=new Uint8Array(t.buffer,t.byteOffset+S,A),D=new Uint8Array(t.buffer,t.byteOffset+v,x);return r.globalData={endpointCount:g,selectorCount:b,imageDescs:I,endpointsData:N,selectorsData:w,tablesData:O,extendedData:D},r}class Je extends Me{init(){this.extensionName="EXT_mesh_gpu_instancing",this.propertyType="InstancedMesh",this.parentTypes=[Wt.NODE]}getDefaults(){return Object.assign(super.getDefaults(),{attributes:{}})}getAttribute(t){return this.getRefMap("attributes",t)}setAttribute(t,e){return this.setRefMap("attributes",t,e,{usage:"INSTANCE_ATTRIBUTE"})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}Je.EXTENSION_NAME="EXT_mesh_gpu_instancing";const Ze="EXT_mesh_gpu_instancing";class tr extends Ve{constructor(...t){super(...t),this.extensionName=Ze,this.provideTypes=[Wt.NODE],this.prewriteTypes=[Wt.ACCESSOR]}createInstancedMesh(){return new Je(this.document.getGraph())}read(t){return(t.jsonDoc.json.nodes||[]).forEach(((e,r)=>{if(!e.extensions||!e.extensions[Ze])return;const n=e.extensions[Ze],s=this.createInstancedMesh();for(const e in n.attributes)s.setAttribute(e,t.accessors[n.attributes[e]]);t.nodes[r].setExtension(Ze,s)})),this}prewrite(t){t.accessorUsageGroupedByParent.add("INSTANCE_ATTRIBUTE");for(const e of this.properties)for(const r of e.listAttributes())t.addAccessorToUsageGroup(r,"INSTANCE_ATTRIBUTE");return this}write(t){const e=t.jsonDoc;return this.document.getRoot().listNodes().forEach((r=>{const n=r.getExtension(Ze);if(n){const s=t.nodeIndexMap.get(r),i=e.json.nodes[s],o={attributes:{}};n.listSemantics().forEach((e=>{const r=n.getAttribute(e);o.attributes[e]=t.accessorIndexMap.get(r)})),i.extensions=i.extensions||{},i.extensions[Ze]=o}})),this}}function er(){return(er=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var rr,nr,sr;tr.EXTENSION_NAME=Ze,function(t){t.QUANTIZE="quantize",t.FILTER="filter"}(rr||(rr={})),function(t){t.ATTRIBUTES="ATTRIBUTES",t.TRIANGLES="TRIANGLES",t.INDICES="INDICES"}(nr||(nr={})),function(t){t.NONE="NONE",t.OCTAHEDRAL="OCTAHEDRAL",t.QUATERNION="QUATERNION",t.EXPONENTIAL="EXPONENTIAL"}(sr||(sr={}));const{BYTE:ir,SHORT:or,FLOAT:ar}=Te.ComponentType,{normalize:cr,denormalize:ur}=ce;function pr(t,e,r,n){const{filter:s,bits:i}=n,o={array:t.getArray(),byteStride:t.getElementSize()*t.getComponentSize(),componentType:t.getComponentType(),normalized:t.getNormalized()};if(r!==nr.ATTRIBUTES)return o;if(s!==sr.NONE){let r=t.getNormalized()?function(t){const e=t.getComponentType(),r=t.getArray(),n=new Float32Array(r.length);for(let t=0;t<r.length;t++)n[t]=ur(r[t],e);return n}(t):new Float32Array(o.array);switch(s){case sr.EXPONENTIAL:o.byteStride=4*t.getElementSize(),o.componentType=ar,o.normalized=!1,o.array=e.encodeFilterExp(r,t.getCount(),o.byteStride,i);break;case sr.OCTAHEDRAL:o.byteStride=i>8?8:4,o.componentType=i>8?or:ir,o.normalized=!0,r=3===t.getElementSize()?function(t){const e=new Float32Array(4*t.length/3);for(let r=0,n=t.length/3;r<n;r++)e[4*r]=t[3*r],e[4*r+1]=t[3*r+1],e[4*r+2]=t[3*r+2];return e}(r):r,o.array=e.encodeFilterOct(r,t.getCount(),o.byteStride,i);break;case sr.QUATERNION:o.byteStride=8,o.componentType=or,o.normalized=!0,o.array=e.encodeFilterQuat(r,t.getCount(),o.byteStride,i);break;default:throw new Error("Invalid filter.")}o.min=t.getMin([]),o.max=t.getMax([]),t.getNormalized()&&(o.min=o.min.map((e=>ur(e,t.getComponentType()))),o.max=o.max.map((e=>ur(e,t.getComponentType())))),o.normalized&&(o.min=o.min.map((t=>cr(t,o.componentType))),o.max=o.max.map((t=>cr(t,o.componentType))))}else o.byteStride%4&&(o.array=function(t,e){const r=Zt.padNumber(t.BYTES_PER_ELEMENT*e)/t.BYTES_PER_ELEMENT,n=new t.constructor(t.length/e*r);for(let s=0;s*e<t.length;s++)for(let i=0;i<e;i++)n[s*r+i]=t[s*e+i];return n}(o.array,t.getElementSize()),o.byteStride=o.array.byteLength/t.getCount());return o}function lr(t,e){return e===ze.BufferViewUsage.ELEMENT_ARRAY_BUFFER?t.listParents().some((t=>t instanceof Fe&&t.getMode()===Fe.Mode.TRIANGLES))?nr.TRIANGLES:nr.INDICES:nr.ATTRIBUTES}function _r(t,e){const r=e.getGraph().listParentEdges(t).filter((t=>!(t.getParent()instanceof Ge)));for(const e of r){const r=e.getName(),n=e.getAttributes().key||"";if("indices"===r)return{filter:sr.NONE};if("attributes"===r){if("POSITION"===n)return{filter:sr.NONE};if("TEXCOORD_0"===n)return{filter:sr.NONE};if("NORMAL"===n)return{filter:sr.OCTAHEDRAL,bits:8};if("TANGENT"===n)return{filter:sr.OCTAHEDRAL,bits:8};if(n.startsWith("JOINTS_"))return{filter:sr.NONE};if(n.startsWith("WEIGHTS_"))return{filter:sr.NONE}}if("output"===r){const e=fr(t);return"rotation"===e?{filter:sr.QUATERNION,bits:16}:"translation"===e||"scale"===e?{filter:sr.EXPONENTIAL,bits:12}:{filter:sr.NONE}}if("input"===r)return{filter:sr.NONE};if("inverseBindMatrices"===r)return{filter:sr.NONE}}return{filter:sr.NONE}}function fr(t){for(const e of t.listParents())if(e instanceof xe)for(const t of e.listParents())if(t instanceof Ae)return t.getTargetPath();return null}const hr="EXT_meshopt_compression",dr={method:rr.QUANTIZE};class yr extends Ve{constructor(...t){super(...t),this.extensionName=hr,this.prereadTypes=[Wt.BUFFER,Wt.PRIMITIVE],this.prewriteTypes=[Wt.BUFFER,Wt.ACCESSOR],this.readDependencies=["meshopt.decoder"],this.writeDependencies=["meshopt.encoder"],this._decoder=null,this._decoderFallbackBufferMap=new Map,this._encoder=null,this._encoderOptions=dr,this._encoderFallbackBuffer=null,this._encoderBufferViews={},this._encoderBufferViewData={},this._encoderBufferViewAccessors={}}install(t,e){return"meshopt.decoder"===t&&(this._decoder=e),"meshopt.encoder"===t&&(this._encoder=e),this}setEncoderOptions(t){return this._encoderOptions=er({},dr,t),this}preread(t,e){if(!this._decoder){if(!this.isRequired())return this;throw new Error(`[${hr}] Please install extension dependency, "meshopt.decoder".`)}if(!this._decoder.supported){if(!this.isRequired())return this;throw new Error(`[${hr}]: Missing WASM support.`)}return e===Wt.BUFFER?this._prereadBuffers(t):e===Wt.PRIMITIVE&&this._prereadPrimitives(t),this}_prereadBuffers(t){const e=t.jsonDoc;(e.json.bufferViews||[]).forEach(((r,n)=>{if(!r.extensions||!r.extensions[hr])return;const s=r.extensions[hr],i=s.byteOffset||0,o=s.byteLength||0,a=s.count,c=s.byteStride,u=new Uint8Array(a*c),p=e.json.buffers[s.buffer],l=Zt.toView(p.uri?e.resources[p.uri]:e.resources[Ht],i,o);this._decoder.decodeGltfBuffer(u,a,c,l,s.mode,s.filter),t.bufferViews[n]=u}))}_prereadPrimitives(t){const e=t.jsonDoc;(e.json.bufferViews||[]).forEach((r=>{var n;r.extensions&&r.extensions[hr]&&(n=e.json.buffers[r.buffer]).extensions&&n.extensions.EXT_meshopt_compression&&n.extensions.EXT_meshopt_compression.fallback&&this._decoderFallbackBufferMap.set(t.buffers[r.buffer],t.buffers[r.extensions[hr].buffer])}))}read(t){if(!this.isRequired())return this;for(const[t,e]of this._decoderFallbackBufferMap){for(const r of t.listParents())r instanceof Te&&r.swap(t,e);t.dispose()}return this}prewrite(t,e){return e===Wt.ACCESSOR?this._prewriteAccessors(t):e===Wt.BUFFER&&this._prewriteBuffers(t),this}_prewriteAccessors(t){const e=t.jsonDoc.json,r=this._encoder,n=this._encoderOptions,s=this.document.createBuffer(),i=this.document.getRoot().listBuffers().indexOf(s);this._encoderFallbackBuffer=s,this._encoderBufferViews={},this._encoderBufferViewData={},this._encoderBufferViewAccessors={};for(const s of this.document.getRoot().listAccessors()){if("weights"===fr(s))continue;const o=t.getAccessorUsage(s),a=lr(s,o),c=n.method===rr.FILTER?_r(s,this.document):{filter:sr.NONE},u=pr(s,r,a,c),{array:p,byteStride:l}=u,_=s.getBuffer();if(!_)throw new Error(`${hr}: Missing buffer for accessor.`);const f=this.document.getRoot().listBuffers().indexOf(_),h=[o,a,c.filter,l,f].join(":");let d=this._encoderBufferViews[h],y=this._encoderBufferViewData[h],m=this._encoderBufferViewAccessors[h];d&&y||(m=this._encoderBufferViewAccessors[h]=[],y=this._encoderBufferViewData[h]=[],d=this._encoderBufferViews[h]={buffer:i,target:ze.USAGE_TO_TARGET[o],byteOffset:0,byteLength:0,byteStride:o===ze.BufferViewUsage.ARRAY_BUFFER?l:void 0,extensions:{[hr]:{buffer:f,byteOffset:0,byteLength:0,mode:a,filter:c.filter!==sr.NONE?c.filter:void 0,byteStride:l,count:0}}});const g=t.createAccessorDef(s);g.componentType=u.componentType,g.normalized=u.normalized,g.byteOffset=d.byteLength,g.min&&u.min&&(g.min=u.min),g.max&&u.max&&(g.max=u.max),t.accessorIndexMap.set(s,e.accessors.length),e.accessors.push(g),m.push(g),y.push(new Uint8Array(p.buffer,p.byteOffset,p.byteLength)),d.byteLength+=p.byteLength,d.extensions.EXT_meshopt_compression.count+=s.getCount()}}_prewriteBuffers(t){const e=this._encoder;for(const r in this._encoderBufferViews){const n=this._encoderBufferViews[r],s=this._encoderBufferViewData[r],i=this.document.getRoot().listBuffers()[n.extensions[hr].buffer],o=t.otherBufferViews.get(i)||[],{count:a,byteStride:c,mode:u}=n.extensions[hr],p=Zt.concat(s),l=e.encodeGltfBuffer(p,a,c,u),_=Zt.pad(l);n.extensions[hr].byteLength=l.byteLength,s.length=0,s.push(_),o.push(_),t.otherBufferViews.set(i,o)}}write(t){let e=0;for(const r in this._encoderBufferViews){const n=this._encoderBufferViews[r],s=t.otherBufferViewsIndexMap.get(this._encoderBufferViewData[r][0]),i=this._encoderBufferViewAccessors[r];for(const t of i)t.bufferView=s;const o=t.jsonDoc.json.bufferViews[s],a=o.byteOffset||0;Object.assign(o,n),o.byteOffset=e,o.extensions[hr].byteOffset=a,e+=Zt.padNumber(n.byteLength)}const r=this._encoderFallbackBuffer,n=t.bufferIndexMap.get(r),s=t.jsonDoc.json.buffers[n];return s.byteLength=e,s.extensions={[hr]:{fallback:!0}},r.dispose(),this}}yr.EXTENSION_NAME=hr,yr.EncoderMethod=rr;const mr="EXT_texture_webp";class gr{match(t){return t.length>=12&&87===t[8]&&69===t[9]&&66===t[10]&&80===t[11]}getSize(t){const e=Zt.decodeText(t.slice(0,4)),r=Zt.decodeText(t.slice(8,12));if("RIFF"!==e||"WEBP"!==r)return null;const n=new DataView(t.buffer,t.byteOffset);let s=12;for(;s<n.byteLength;){const t=Zt.decodeText(new Uint8Array([n.getUint8(s),n.getUint8(s+1),n.getUint8(s+2),n.getUint8(s+3)])),e=n.getUint32(s+4,!0);if("VP8 "===t)return[16383&n.getInt16(s+14,!0),16383&n.getInt16(s+16,!0)];if("VP8L"===t){const t=n.getUint8(s+9),e=n.getUint8(s+10),r=n.getUint8(s+11);return[1+((63&e)<<8|t),1+((15&n.getUint8(s+12))<<10|r<<2|(192&e)>>6)]}s+=8+e+e%2}return null}getChannels(t){return 4}}class br extends Ve{constructor(...t){super(...t),this.extensionName=mr,this.prereadTypes=[Wt.TEXTURE]}static register(){re.registerFormat("image/webp",new gr)}preread(t){return(t.jsonDoc.json.textures||[]).forEach((t=>{t.extensions&&t.extensions[mr]&&(t.source=t.extensions[mr].source)})),this}read(t){return this}write(t){const e=t.jsonDoc;return this.document.getRoot().listTextures().forEach((r=>{if("image/webp"===r.getMimeType()){const n=t.imageIndexMap.get(r);(e.json.textures||[]).forEach((t=>{t.source===n&&(t.extensions=t.extensions||{},t.extensions[mr]={source:t.source},delete t.source)}))}})),this}}br.EXTENSION_NAME=mr;const Tr="KHR_draco_mesh_compression";let Er,Ar,xr,Ir;function Rr(t,e){const r=new Er.DecoderBuffer;try{if(r.Init(e,e.length),t.GetEncodedGeometryType(r)!==Er.TRIANGULAR_MESH)throw new Error(`[${Tr}] Unknown geometry type.`);const n=new Er.Mesh;if(!t.DecodeBufferToMesh(r,n).ok()||0===n.ptr)throw new Error(`[${Tr}] Decoding failure.`);return n}finally{Er.destroy(r)}}function Mr(t,e){const r=3*e.num_faces();let n,s;if(e.num_points()<=65534){const i=r*Uint16Array.BYTES_PER_ELEMENT;n=Er._malloc(i),t.GetTrianglesUInt16Array(e,i,n),s=new Uint16Array(Er.HEAPU16.buffer,n,r).slice()}else{const i=r*Uint32Array.BYTES_PER_ELEMENT;n=Er._malloc(i),t.GetTrianglesUInt32Array(e,i,n),s=new Uint32Array(Er.HEAPU32.buffer,n,r).slice()}return Er._free(n),s}function Sr(t,e,r,n){const s=xr[n.componentType],i=Ar[n.componentType],o=r.num_components(),a=e.num_points()*o,c=a*i.BYTES_PER_ELEMENT,u=Er._malloc(c);t.GetAttributeDataArrayForAllPoints(e,r,s,c,u);const p=new i(Er.HEAPF32.buffer,u,a).slice();return Er._free(u),p}var vr,Nr;!function(t){t[t.EDGEBREAKER=1]="EDGEBREAKER",t[t.SEQUENTIAL=0]="SEQUENTIAL"}(vr||(vr={})),function(t){t.POSITION="POSITION",t.NORMAL="NORMAL",t.COLOR="COLOR",t.TEX_COORD="TEX_COORD",t.GENERIC="GENERIC"}(Nr||(Nr={}));const wr={[Nr.POSITION]:14,[Nr.NORMAL]:10,[Nr.COLOR]:8,[Nr.TEX_COORD]:12,[Nr.GENERIC]:12},Or={decodeSpeed:5,encodeSpeed:5,method:vr.EDGEBREAKER,quantizationBits:wr,quantizationVolume:"mesh"};function Dr(t,e=Or){const r=er({},Or,e);r.quantizationBits=er({},wr,e.quantizationBits);const n=new Ir.Encoder,s=new Ir.MeshBuilder,i=new Ir.Mesh,o={},a=new Ir.DracoInt8Array;for(const e of t.listSemantics()){const a=t.getAttribute(e),c=Cr(e),u=jr(s,a.getComponentType(),i,Ir[c],a.getCount(),a.getElementSize(),a.getArray());if(-1===u)throw new Error(`Error compressing "${e}" attribute.`);if(o[e]=u,"mesh"===r.quantizationVolume||"POSITION"!==e)n.SetAttributeQuantization(Ir[c],r.quantizationBits[c]);else{if("object"!=typeof r.quantizationVolume)throw new Error("Invalid quantization volume state.");{const{quantizationVolume:t}=r,e=Math.max(t.max[0]-t.min[0],t.max[1]-t.min[1],t.max[2]-t.min[2]);n.SetAttributeExplicitQuantization(Ir[c],r.quantizationBits[c],a.getElementSize(),t.min,e)}}}const c=t.getIndices();if(!c)throw new Fr("Primitive must have indices.");s.AddFacesToMesh(i,c.getCount()/3,c.getArray()),n.SetSpeedOptions(r.encodeSpeed,r.decodeSpeed),n.SetTrackEncodedProperties(!0),r.method===vr.SEQUENTIAL||t.listTargets().length>0?n.SetEncodingMethod(Ir.MESH_SEQUENTIAL_ENCODING):n.SetEncodingMethod(Ir.MESH_EDGEBREAKER_ENCODING);const u=n.EncodeMeshToDracoBuffer(i,a);if(u<=0)throw new Fr("Error applying Draco compression.");const p=new Uint8Array(u);for(let t=0;t<u;++t)p[t]=a.GetValue(t);const l=t.getAttribute("POSITION").getCount(),_=n.GetNumberOfEncodedPoints(),f=3*n.GetNumberOfEncodedFaces();if(t.listTargets().length>0&&_!==l)throw new Fr('Compression reduced vertex count unexpectedly, corrupting morph targets. Applying the "weld" function before compression may resolve the issue.');return Ir.destroy(a),Ir.destroy(i),Ir.destroy(s),Ir.destroy(n),{numVertices:_,numIndices:f,data:p,attributeIDs:o}}function Cr(t){return"POSITION"===t?Nr.POSITION:"NORMAL"===t?Nr.NORMAL:t.startsWith("COLOR_")?Nr.COLOR:t.startsWith("TEXCOORD_")?Nr.TEX_COORD:Nr.GENERIC}function jr(t,e,r,n,s,i,o){switch(e){case Te.ComponentType.UNSIGNED_BYTE:return t.AddUInt8Attribute(r,n,s,i,o);case Te.ComponentType.BYTE:return t.AddInt8Attribute(r,n,s,i,o);case Te.ComponentType.UNSIGNED_SHORT:return t.AddUInt16Attribute(r,n,s,i,o);case Te.ComponentType.SHORT:return t.AddInt16Attribute(r,n,s,i,o);case Te.ComponentType.UNSIGNED_INT:return t.AddUInt32Attribute(r,n,s,i,o);case Te.ComponentType.FLOAT:return t.AddFloatAttribute(r,n,s,i,o);default:throw new Error(`Unexpected component type, "${e}".`)}}class Fr extends Error{}const Ur="KHR_draco_mesh_compression";class Pr extends Ve{constructor(...t){super(...t),this.extensionName=Ur,this.prereadTypes=[Wt.PRIMITIVE],this.prewriteTypes=[Wt.ACCESSOR],this.readDependencies=["draco3d.decoder"],this.writeDependencies=["draco3d.encoder"],this._decoderModule=null,this._encoderModule=null,this._encoderOptions={}}install(t,e){return"draco3d.decoder"===t&&(this._decoderModule=e,Er=this._decoderModule,Ar={[Te.ComponentType.FLOAT]:Float32Array,[Te.ComponentType.UNSIGNED_INT]:Uint32Array,[Te.ComponentType.UNSIGNED_SHORT]:Uint16Array,[Te.ComponentType.UNSIGNED_BYTE]:Uint8Array,[Te.ComponentType.SHORT]:Int16Array,[Te.ComponentType.BYTE]:Int8Array},xr={[Te.ComponentType.FLOAT]:Er.DT_FLOAT32,[Te.ComponentType.UNSIGNED_INT]:Er.DT_UINT32,[Te.ComponentType.UNSIGNED_SHORT]:Er.DT_UINT16,[Te.ComponentType.UNSIGNED_BYTE]:Er.DT_UINT8,[Te.ComponentType.SHORT]:Er.DT_INT16,[Te.ComponentType.BYTE]:Er.DT_INT8}),"draco3d.encoder"===t&&(this._encoderModule=e,Ir=this._encoderModule),this}setEncoderOptions(t){return this._encoderOptions=t,this}preread(t){if(!this._decoderModule)throw new Error(`[${Ur}] Please install extension dependency, "draco3d.decoder".`);const e=this.document.getLogger(),r=t.jsonDoc,n=new Map;try{const s=r.json.meshes||[];for(const i of s)for(const s of i.primitives){if(!s.extensions||!s.extensions[Ur])continue;const i=s.extensions[Ur];let[o,a]=n.get(i.bufferView)||[];if(!a||!o){const t=r.json.bufferViews[i.bufferView],s=r.json.buffers[t.buffer],c=Zt.toView(s.uri?r.resources[s.uri]:r.resources[Ht],t.byteOffset||0,t.byteLength);o=new this._decoderModule.Decoder,a=Rr(o,c),n.set(i.bufferView,[o,a]),e.debug(`[${Ur}] Decompressed ${c.byteLength} bytes.`)}for(const e in s.attributes){const r=t.jsonDoc.json.accessors[s.attributes[e]],n=o.GetAttributeByUniqueId(a,i.attributes[e]),c=Sr(o,a,n,r);t.accessors[s.attributes[e]].setArray(c)}void 0!==s.indices&&t.accessors[s.indices].setArray(Mr(o,a))}}finally{for(const[t,e]of Array.from(n.values()))this._decoderModule.destroy(t),this._decoderModule.destroy(e)}return this}read(t){return this}prewrite(t,e){if(!this._encoderModule)throw new Error(`[${Ur}] Please install extension dependency, "draco3d.encoder".`);const r=this.document.getLogger();r.debug(`[${Ur}] Compression options: ${JSON.stringify(this._encoderOptions)}`);const n=function(t){const e=t.getLogger(),r=new Set,n=new Set;for(const s of t.getRoot().listMeshes())for(const t of s.listPrimitives())t.getIndices()?t.getMode()!==Fe.Mode.TRIANGLES?(n.add(t),e.warn(`[${Ur}] Skipping Draco compression on non-TRIANGLES primitive.`)):r.add(t):(n.add(t),e.warn(`[${Ur}] Skipping Draco compression on non-indexed primitive.`));const s=t.getRoot().listAccessors(),i=new Map;for(let t=0;t<s.length;t++)i.set(s[t],t);const o=new Map,a=new Set,c=new Map;for(const e of Array.from(r)){let r=Lr(e,i);if(a.has(r))c.set(e,r);else{if(o.has(e.getIndices())){const r=e.getIndices(),n=r.clone();i.set(n,t.getRoot().listAccessors().length-1),e.swap(r,n)}for(const r of e.listAttributes())if(o.has(r)){const n=r.clone();i.set(n,t.getRoot().listAccessors().length-1),e.swap(r,n)}r=Lr(e,i),a.add(r),c.set(e,r),o.set(e.getIndices(),r);for(const t of e.listAttributes())o.set(t,r)}}for(const t of Array.from(o.keys())){const e=new Set(t.listParents().map((t=>t.propertyType)));if(2!==e.size||!e.has(Wt.PRIMITIVE)||!e.has(Wt.ROOT))throw new Error(`[${Ur}] Compressed accessors must only be used as indices or vertex attributes.`)}for(const t of Array.from(r)){const e=c.get(t),r=t.getIndices();if(o.get(r)!==e||t.listAttributes().some((t=>o.get(t)!==e)))throw new Error(`[${Ur}] Draco primitives must share all, or no, accessors.`)}for(const t of Array.from(n)){const e=t.getIndices();if(o.has(e)||t.listAttributes().some((t=>o.has(t))))throw new Error(`[${Ur}] Accessor cannot be shared by compressed and uncompressed primitives.`)}return c}(this.document),s=new Map;let i="mesh";"scene"===this._encoderOptions.quantizationVolume&&(1!==this.document.getRoot().listScenes().length?r.warn(`[${Ur}]: quantizationVolume=scene requires exactly 1 scene.`):i=function(t){const e={min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]},r=t.propertyType===Wt.NODE?[t]:t.listChildren();for(const t of r)t.traverse((t=>{const r=t.getMesh();if(!r)return;const n=$t(r,t.getWorldMatrix());Jt(n.min,e),Jt(n.max,e)}));return e}(this.document.getRoot().listScenes().pop()));for(const e of Array.from(n.keys())){const o=n.get(e);if(!o)throw new Error("Unexpected primitive.");if(s.has(o)){s.set(o,s.get(o));continue}const a=e.getIndices(),c=t.jsonDoc.json.accessors;let u;try{u=Dr(e,er({},this._encoderOptions,{quantizationVolume:i}))}catch(t){if(t instanceof Fr){r.warn(`[${Ur}]: ${t.message} Skipping primitive compression.`);continue}throw t}s.set(o,u);const p=t.createAccessorDef(a);p.count=u.numIndices,t.accessorIndexMap.set(a,c.length),c.push(p);for(const r of e.listSemantics()){const n=e.getAttribute(r),s=t.createAccessorDef(n);s.count=u.numVertices,t.accessorIndexMap.set(n,c.length),c.push(s)}const l=e.getAttribute("POSITION").getBuffer()||this.document.getRoot().listBuffers()[0];t.otherBufferViews.has(l)||t.otherBufferViews.set(l,[]),t.otherBufferViews.get(l).push(u.data)}return r.debug(`[${Ur}] Compressed ${n.size} primitives.`),t.extensionData[Ur]={primitiveHashMap:n,primitiveEncodingMap:s},this}write(t){const e=t.extensionData[Ur];for(const r of this.document.getRoot().listMeshes()){const n=t.jsonDoc.json.meshes[t.meshIndexMap.get(r)];for(let s=0;s<r.listPrimitives().length;s++){const i=r.listPrimitives()[s],o=n.primitives[s],a=e.primitiveHashMap.get(i);if(!a)continue;const c=e.primitiveEncodingMap.get(a);c&&(o.extensions=o.extensions||{},o.extensions[Ur]={bufferView:t.otherBufferViewsIndexMap.get(c.data),attributes:c.attributeIDs})}}if(!e.primitiveHashMap.size){const e=t.jsonDoc.json;e.extensionsUsed=(e.extensionsUsed||[]).filter((t=>t!==Ur)),e.extensionsRequired=(e.extensionsRequired||[]).filter((t=>t!==Ur))}return this}}function Lr(t,e){const r=[],n=t.getIndices();r.push(e.get(n));for(const n of t.listAttributes())r.push(e.get(n));return r.sort().join("|")}Pr.EXTENSION_NAME=Ur,Pr.EncoderMethod=vr;class Br extends Me{init(){this.extensionName="KHR_lights_punctual",this.propertyType="Light",this.parentTypes=[Wt.NODE]}getDefaults(){return Object.assign(super.getDefaults(),{color:[1,1,1],intensity:1,type:Br.Type.POINT,range:null,innerConeAngle:0,outerConeAngle:Math.PI/4})}getColor(){return this.get("color")}setColor(t){return this.set("color",t)}getColorHex(){return te.factorToHex(this.getColor())}setColorHex(t){const e=this.getColor().slice();return te.hexToFactor(t,e),this.setColor(e)}getIntensity(){return this.get("intensity")}setIntensity(t){return this.set("intensity",t)}getType(){return this.get("type")}setType(t){return this.set("type",t)}getRange(){return this.get("range")}setRange(t){return this.set("range",t)}getInnerConeAngle(){return this.get("innerConeAngle")}setInnerConeAngle(t){return this.set("innerConeAngle",t)}getOuterConeAngle(){return this.get("outerConeAngle")}setOuterConeAngle(t){return this.set("outerConeAngle",t)}}Br.EXTENSION_NAME="KHR_lights_punctual",Br.Type={POINT:"point",SPOT:"spot",DIRECTIONAL:"directional"};const Gr="KHR_lights_punctual";class Vr extends Ve{constructor(...t){super(...t),this.extensionName=Gr}createLight(t=""){return new Br(this.document.getGraph(),t)}read(t){const e=t.jsonDoc;if(!e.json.extensions||!e.json.extensions[Gr])return this;const r=(e.json.extensions[Gr].lights||[]).map((t=>{var e,r;const n=this.createLight().setName(t.name||"").setType(t.type);return void 0!==t.color&&n.setColor(t.color),void 0!==t.intensity&&n.setIntensity(t.intensity),void 0!==t.range&&n.setRange(t.range),void 0!==(null==(e=t.spot)?void 0:e.innerConeAngle)&&n.setInnerConeAngle(t.spot.innerConeAngle),void 0!==(null==(r=t.spot)?void 0:r.outerConeAngle)&&n.setOuterConeAngle(t.spot.outerConeAngle),n}));return e.json.nodes.forEach(((e,n)=>{e.extensions&&e.extensions[Gr]&&t.nodes[n].setExtension(Gr,r[e.extensions[Gr].light])})),this}write(t){const e=t.jsonDoc;if(0===this.properties.size)return this;const r=[],n=new Map;for(const t of this.properties){const e=t,s={type:e.getType()};ce.eq(e.getColor(),[1,1,1])||(s.color=e.getColor()),1!==e.getIntensity()&&(s.intensity=e.getIntensity()),null!=e.getRange()&&(s.range=e.getRange()),e.getName()&&(s.name=e.getName()),e.getType()===Br.Type.SPOT&&(s.spot={innerConeAngle:e.getInnerConeAngle(),outerConeAngle:e.getOuterConeAngle()}),r.push(s),n.set(e,r.length-1)}return this.document.getRoot().listNodes().forEach((r=>{const s=r.getExtension(Gr);if(s){const i=t.nodeIndexMap.get(r),o=e.json.nodes[i];o.extensions=o.extensions||{},o.extensions[Gr]={light:n.get(s)}}})),e.json.extensions=e.json.extensions||{},e.json.extensions[Gr]={lights:r},this}}Vr.EXTENSION_NAME=Gr;const{R:kr,G:zr,B:Hr}=qt;class Wr extends Me{init(){this.extensionName="KHR_materials_clearcoat",this.propertyType="Clearcoat",this.parentTypes=[Wt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{clearcoatFactor:0,clearcoatTexture:null,clearcoatTextureInfo:new Se(this.graph,"clearcoatTextureInfo"),clearcoatRoughnessFactor:0,clearcoatRoughnessTexture:null,clearcoatRoughnessTextureInfo:new Se(this.graph,"clearcoatRoughnessTextureInfo"),clearcoatNormalScale:1,clearcoatNormalTexture:null,clearcoatNormalTextureInfo:new Se(this.graph,"clearcoatNormalTextureInfo")})}getClearcoatFactor(){return this.get("clearcoatFactor")}setClearcoatFactor(t){return this.set("clearcoatFactor",t)}getClearcoatTexture(){return this.getRef("clearcoatTexture")}getClearcoatTextureInfo(){return this.getRef("clearcoatTexture")?this.getRef("clearcoatTextureInfo"):null}setClearcoatTexture(t){return this.setRef("clearcoatTexture",t,{channels:kr})}getClearcoatRoughnessFactor(){return this.get("clearcoatRoughnessFactor")}setClearcoatRoughnessFactor(t){return this.set("clearcoatRoughnessFactor",t)}getClearcoatRoughnessTexture(){return this.getRef("clearcoatRoughnessTexture")}getClearcoatRoughnessTextureInfo(){return this.getRef("clearcoatRoughnessTexture")?this.getRef("clearcoatRoughnessTextureInfo"):null}setClearcoatRoughnessTexture(t){return this.setRef("clearcoatRoughnessTexture",t,{channels:zr})}getClearcoatNormalScale(){return this.get("clearcoatNormalScale")}setClearcoatNormalScale(t){return this.set("clearcoatNormalScale",t)}getClearcoatNormalTexture(){return this.getRef("clearcoatNormalTexture")}getClearcoatNormalTextureInfo(){return this.getRef("clearcoatNormalTexture")?this.getRef("clearcoatNormalTextureInfo"):null}setClearcoatNormalTexture(t){return this.setRef("clearcoatNormalTexture",t,{channels:kr|zr|Hr})}}Wr.EXTENSION_NAME="KHR_materials_clearcoat";const Yr="KHR_materials_clearcoat";class Xr extends Ve{constructor(...t){super(...t),this.extensionName=Yr}createClearcoat(){return new Wr(this.document.getGraph())}read(t){const e=t.jsonDoc,r=e.json.textures||[];return(e.json.materials||[]).forEach(((e,n)=>{if(e.extensions&&e.extensions[Yr]){const s=this.createClearcoat();t.materials[n].setExtension(Yr,s);const i=e.extensions[Yr];if(void 0!==i.clearcoatFactor&&s.setClearcoatFactor(i.clearcoatFactor),void 0!==i.clearcoatRoughnessFactor&&s.setClearcoatRoughnessFactor(i.clearcoatRoughnessFactor),void 0!==i.clearcoatTexture){const e=i.clearcoatTexture;s.setClearcoatTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getClearcoatTextureInfo(),e)}if(void 0!==i.clearcoatRoughnessTexture){const e=i.clearcoatRoughnessTexture;s.setClearcoatRoughnessTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getClearcoatRoughnessTextureInfo(),e)}if(void 0!==i.clearcoatNormalTexture){const e=i.clearcoatNormalTexture;s.setClearcoatNormalTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getClearcoatNormalTextureInfo(),e),void 0!==e.scale&&s.setClearcoatNormalScale(e.scale)}}})),this}write(t){const e=t.jsonDoc;return this.document.getRoot().listMaterials().forEach((r=>{const n=r.getExtension(Yr);if(n){const s=t.materialIndexMap.get(r),i=e.json.materials[s];i.extensions=i.extensions||{};const o=i.extensions[Yr]={clearcoatFactor:n.getClearcoatFactor(),clearcoatRoughnessFactor:n.getClearcoatRoughnessFactor()};if(n.getClearcoatTexture()){const e=n.getClearcoatTexture(),r=n.getClearcoatTextureInfo();o.clearcoatTexture=t.createTextureInfoDef(e,r)}if(n.getClearcoatRoughnessTexture()){const e=n.getClearcoatRoughnessTexture(),r=n.getClearcoatRoughnessTextureInfo();o.clearcoatRoughnessTexture=t.createTextureInfoDef(e,r)}if(n.getClearcoatNormalTexture()){const e=n.getClearcoatNormalTexture(),r=n.getClearcoatNormalTextureInfo();o.clearcoatNormalTexture=t.createTextureInfoDef(e,r),1!==n.getClearcoatNormalScale()&&(o.clearcoatNormalTexture.scale=n.getClearcoatNormalScale())}}})),this}}Xr.EXTENSION_NAME=Yr;class qr extends Me{init(){this.extensionName="KHR_materials_emissive_strength",this.propertyType="EmissiveStrength",this.parentTypes=[Wt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{emissiveStrength:1})}getEmissiveStrength(){return this.get("emissiveStrength")}setEmissiveStrength(t){return this.set("emissiveStrength",t)}}qr.EXTENSION_NAME="KHR_materials_emissive_strength";const Kr="KHR_materials_emissive_strength";class Qr extends Ve{constructor(...t){super(...t),this.extensionName=Kr}createEmissiveStrength(){return new qr(this.document.getGraph())}read(t){return(t.jsonDoc.json.materials||[]).forEach(((e,r)=>{if(e.extensions&&e.extensions[Kr]){const n=this.createEmissiveStrength();t.materials[r].setExtension(Kr,n);const s=e.extensions[Kr];void 0!==s.emissiveStrength&&n.setEmissiveStrength(s.emissiveStrength)}})),this}write(t){const e=t.jsonDoc;return this.document.getRoot().listMaterials().forEach((r=>{const n=r.getExtension(Kr);if(n){const s=t.materialIndexMap.get(r),i=e.json.materials[s];i.extensions=i.extensions||{},i.extensions[Kr]={emissiveStrength:n.getEmissiveStrength()}}})),this}}Qr.EXTENSION_NAME=Kr;class $r extends Me{init(){this.extensionName="KHR_materials_ior",this.propertyType="IOR",this.parentTypes=[Wt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{ior:0})}getIOR(){return this.get("ior")}setIOR(t){return this.set("ior",t)}}$r.EXTENSION_NAME="KHR_materials_ior";const Jr="KHR_materials_ior";class Zr extends Ve{constructor(...t){super(...t),this.extensionName=Jr}createIOR(){return new $r(this.document.getGraph())}read(t){return(t.jsonDoc.json.materials||[]).forEach(((e,r)=>{if(e.extensions&&e.extensions[Jr]){const n=this.createIOR();t.materials[r].setExtension(Jr,n);const s=e.extensions[Jr];void 0!==s.ior&&n.setIOR(s.ior)}})),this}write(t){const e=t.jsonDoc;return this.document.getRoot().listMaterials().forEach((r=>{const n=r.getExtension(Jr);if(n){const s=t.materialIndexMap.get(r),i=e.json.materials[s];i.extensions=i.extensions||{},i.extensions[Jr]={ior:n.getIOR()}}})),this}}Zr.EXTENSION_NAME=Jr;const{R:tn,G:en}=qt;class rn extends Me{init(){this.extensionName="KHR_materials_iridescence",this.propertyType="Iridescence",this.parentTypes=[Wt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{iridescenceFactor:0,iridescenceTexture:null,iridescenceTextureInfo:new Se(this.graph,"iridescenceTextureInfo"),iridescenceIOR:1.3,iridescenceThicknessMinimum:100,iridescenceThicknessMaximum:400,iridescenceThicknessTexture:null,iridescenceThicknessTextureInfo:new Se(this.graph,"iridescenceThicknessTextureInfo")})}getIridescenceFactor(){return this.get("iridescenceFactor")}setIridescenceFactor(t){return this.set("iridescenceFactor",t)}getIridescenceTexture(){return this.getRef("iridescenceTexture")}getIridescenceTextureInfo(){return this.getRef("iridescenceTexture")?this.getRef("iridescenceTextureInfo"):null}setIridescenceTexture(t){return this.setRef("iridescenceTexture",t,{channels:tn})}getIridescenceIOR(){return this.get("iridescenceIOR")}setIridescenceIOR(t){return this.set("iridescenceIOR",t)}getIridescenceThicknessMinimum(){return this.get("iridescenceThicknessMinimum")}setIridescenceThicknessMinimum(t){return this.set("iridescenceThicknessMinimum",t)}getIridescenceThicknessMaximum(){return this.get("iridescenceThicknessMaximum")}setIridescenceThicknessMaximum(t){return this.set("iridescenceThicknessMaximum",t)}getIridescenceThicknessTexture(){return this.getRef("iridescenceThicknessTexture")}getIridescenceThicknessTextureInfo(){return this.getRef("iridescenceThicknessTexture")?this.getRef("iridescenceThicknessTextureInfo"):null}setIridescenceThicknessTexture(t){return this.setRef("iridescenceThicknessTexture",t,{channels:en})}}rn.EXTENSION_NAME="KHR_materials_iridescence";const nn="KHR_materials_iridescence";class sn extends Ve{constructor(...t){super(...t),this.extensionName=nn}createIridescence(){return new rn(this.document.getGraph())}read(t){const e=t.jsonDoc,r=e.json.textures||[];return(e.json.materials||[]).forEach(((e,n)=>{if(e.extensions&&e.extensions[nn]){const s=this.createIridescence();t.materials[n].setExtension(nn,s);const i=e.extensions[nn];if(void 0!==i.iridescenceFactor&&s.setIridescenceFactor(i.iridescenceFactor),void 0!==i.iridescenceIor&&s.setIridescenceIOR(i.iridescenceIor),void 0!==i.iridescenceThicknessMinimum&&s.setIridescenceThicknessMinimum(i.iridescenceThicknessMinimum),void 0!==i.iridescenceThicknessMaximum&&s.setIridescenceThicknessMaximum(i.iridescenceThicknessMaximum),void 0!==i.iridescenceTexture){const e=i.iridescenceTexture;s.setIridescenceTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getIridescenceTextureInfo(),e)}if(void 0!==i.iridescenceThicknessTexture){const e=i.iridescenceThicknessTexture;s.setIridescenceThicknessTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getIridescenceThicknessTextureInfo(),e)}}})),this}write(t){const e=t.jsonDoc;return this.document.getRoot().listMaterials().forEach((r=>{const n=r.getExtension(nn);if(n){const s=t.materialIndexMap.get(r),i=e.json.materials[s];i.extensions=i.extensions||{};const o=i.extensions[nn]={};if(n.getIridescenceFactor()>0&&(o.iridescenceFactor=n.getIridescenceFactor()),1.3!==n.getIridescenceIOR()&&(o.iridescenceIor=n.getIridescenceIOR()),100!==n.getIridescenceThicknessMinimum()&&(o.iridescenceThicknessMinimum=n.getIridescenceThicknessMinimum()),400!==n.getIridescenceThicknessMaximum()&&(o.iridescenceThicknessMaximum=n.getIridescenceThicknessMaximum()),n.getIridescenceTexture()){const e=n.getIridescenceTexture(),r=n.getIridescenceTextureInfo();o.iridescenceTexture=t.createTextureInfoDef(e,r)}if(n.getIridescenceThicknessTexture()){const e=n.getIridescenceThicknessTexture(),r=n.getIridescenceThicknessTextureInfo();o.iridescenceThicknessTexture=t.createTextureInfoDef(e,r)}}})),this}}sn.EXTENSION_NAME=nn;const{R:on,G:an,B:cn,A:un}=qt;class pn extends Me{init(){this.extensionName="KHR_materials_pbrSpecularGlossiness",this.propertyType="PBRSpecularGlossiness",this.parentTypes=[Wt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{diffuseFactor:[1,1,1,1],diffuseTexture:null,diffuseTextureInfo:new Se(this.graph,"diffuseTextureInfo"),specularFactor:[1,1,1],glossinessFactor:1,specularGlossinessTexture:null,specularGlossinessTextureInfo:new Se(this.graph,"specularGlossinessTextureInfo")})}getDiffuseFactor(){return this.get("diffuseFactor")}setDiffuseFactor(t){return this.set("diffuseFactor",t)}getDiffuseHex(){return te.factorToHex(this.getDiffuseFactor())}setDiffuseHex(t){const e=this.getDiffuseFactor().slice();return this.setDiffuseFactor(te.hexToFactor(t,e))}getDiffuseTexture(){return this.getRef("diffuseTexture")}getDiffuseTextureInfo(){return this.getRef("diffuseTexture")?this.getRef("diffuseTextureInfo"):null}setDiffuseTexture(t){return this.setRef("diffuseTexture",t,{channels:on|an|cn|un})}getSpecularFactor(){return this.get("specularFactor")}setSpecularFactor(t){return this.set("specularFactor",t)}getGlossinessFactor(){return this.get("glossinessFactor")}setGlossinessFactor(t){return this.set("glossinessFactor",t)}getSpecularGlossinessTexture(){return this.getRef("specularGlossinessTexture")}getSpecularGlossinessTextureInfo(){return this.getRef("specularGlossinessTexture")?this.getRef("specularGlossinessTextureInfo"):null}setSpecularGlossinessTexture(t){return this.setRef("specularGlossinessTexture",t,{channels:on|an|cn|un})}}pn.EXTENSION_NAME="KHR_materials_pbrSpecularGlossiness";const ln="KHR_materials_pbrSpecularGlossiness";class _n extends Ve{constructor(...t){super(...t),this.extensionName=ln}createPBRSpecularGlossiness(){return new pn(this.document.getGraph())}read(t){const e=t.jsonDoc,r=e.json.textures||[];return(e.json.materials||[]).forEach(((e,n)=>{if(e.extensions&&e.extensions[ln]){const s=this.createPBRSpecularGlossiness();t.materials[n].setExtension(ln,s);const i=e.extensions[ln];if(void 0!==i.diffuseFactor&&s.setDiffuseFactor(i.diffuseFactor),void 0!==i.specularFactor&&s.setSpecularFactor(i.specularFactor),void 0!==i.glossinessFactor&&s.setGlossinessFactor(i.glossinessFactor),void 0!==i.diffuseTexture){const e=i.diffuseTexture;s.setDiffuseTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getDiffuseTextureInfo(),e)}if(void 0!==i.specularGlossinessTexture){const e=i.specularGlossinessTexture;s.setSpecularGlossinessTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getSpecularGlossinessTextureInfo(),e)}}})),this}write(t){const e=t.jsonDoc;return this.document.getRoot().listMaterials().forEach((r=>{const n=r.getExtension(ln);if(n){const s=t.materialIndexMap.get(r),i=e.json.materials[s];i.extensions=i.extensions||{};const o=i.extensions[ln]={diffuseFactor:n.getDiffuseFactor(),specularFactor:n.getSpecularFactor(),glossinessFactor:n.getGlossinessFactor()};if(n.getDiffuseTexture()){const e=n.getDiffuseTexture(),r=n.getDiffuseTextureInfo();o.diffuseTexture=t.createTextureInfoDef(e,r)}if(n.getSpecularGlossinessTexture()){const e=n.getSpecularGlossinessTexture(),r=n.getSpecularGlossinessTextureInfo();o.specularGlossinessTexture=t.createTextureInfoDef(e,r)}}})),this}}_n.EXTENSION_NAME=ln;const{R:fn,G:hn,B:dn,A:yn}=qt;class mn extends Me{init(){this.extensionName="KHR_materials_sheen",this.propertyType="Sheen",this.parentTypes=[Wt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{sheenColorFactor:[0,0,0],sheenColorTexture:null,sheenColorTextureInfo:new Se(this.graph,"sheenColorTextureInfo"),sheenRoughnessFactor:0,sheenRoughnessTexture:null,sheenRoughnessTextureInfo:new Se(this.graph,"sheenRoughnessTextureInfo")})}getSheenColorFactor(){return this.get("sheenColorFactor")}getSheenColorHex(){return te.factorToHex(this.getSheenColorFactor())}setSheenColorFactor(t){return this.set("sheenColorFactor",t)}setSheenColorHex(t){const e=this.getSheenColorFactor().slice();return this.set("sheenColorFactor",te.hexToFactor(t,e))}getSheenColorTexture(){return this.getRef("sheenColorTexture")}getSheenColorTextureInfo(){return this.getRef("sheenColorTexture")?this.getRef("sheenColorTextureInfo"):null}setSheenColorTexture(t){return this.setRef("sheenColorTexture",t,{channels:fn|hn|dn})}getSheenRoughnessFactor(){return this.get("sheenRoughnessFactor")}setSheenRoughnessFactor(t){return this.set("sheenRoughnessFactor",t)}getSheenRoughnessTexture(){return this.getRef("sheenRoughnessTexture")}getSheenRoughnessTextureInfo(){return this.getRef("sheenRoughnessTexture")?this.getRef("sheenRoughnessTextureInfo"):null}setSheenRoughnessTexture(t){return this.setRef("sheenRoughnessTexture",t,{channels:yn})}}mn.EXTENSION_NAME="KHR_materials_sheen";const gn="KHR_materials_sheen";class bn extends Ve{constructor(...t){super(...t),this.extensionName=gn}createSheen(){return new mn(this.document.getGraph())}read(t){const e=t.jsonDoc,r=e.json.textures||[];return(e.json.materials||[]).forEach(((e,n)=>{if(e.extensions&&e.extensions[gn]){const s=this.createSheen();t.materials[n].setExtension(gn,s);const i=e.extensions[gn];if(void 0!==i.sheenColorFactor&&s.setSheenColorFactor(i.sheenColorFactor),void 0!==i.sheenRoughnessFactor&&s.setSheenRoughnessFactor(i.sheenRoughnessFactor),void 0!==i.sheenColorTexture){const e=i.sheenColorTexture;s.setSheenColorTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getSheenColorTextureInfo(),e)}if(void 0!==i.sheenRoughnessTexture){const e=i.sheenRoughnessTexture;s.setSheenRoughnessTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getSheenRoughnessTextureInfo(),e)}}})),this}write(t){const e=t.jsonDoc;return this.document.getRoot().listMaterials().forEach((r=>{const n=r.getExtension(gn);if(n){const s=t.materialIndexMap.get(r),i=e.json.materials[s];i.extensions=i.extensions||{};const o=i.extensions[gn]={sheenColorFactor:n.getSheenColorFactor(),sheenRoughnessFactor:n.getSheenRoughnessFactor()};if(n.getSheenColorTexture()){const e=n.getSheenColorTexture(),r=n.getSheenColorTextureInfo();o.sheenColorTexture=t.createTextureInfoDef(e,r)}if(n.getSheenRoughnessTexture()){const e=n.getSheenRoughnessTexture(),r=n.getSheenRoughnessTextureInfo();o.sheenRoughnessTexture=t.createTextureInfoDef(e,r)}}})),this}}bn.EXTENSION_NAME=gn;const{R:Tn,G:En,B:An,A:xn}=qt;class In extends Me{init(){this.extensionName="KHR_materials_specular",this.propertyType="Specular",this.parentTypes=[Wt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{specularFactor:1,specularTexture:null,specularTextureInfo:new Se(this.graph,"specularTextureInfo"),specularColorFactor:[1,1,1],specularColorTexture:null,specularColorTextureInfo:new Se(this.graph,"specularColorTextureInfo")})}getSpecularFactor(){return this.get("specularFactor")}setSpecularFactor(t){return this.set("specularFactor",t)}getSpecularColorFactor(){return this.get("specularColorFactor")}setSpecularColorFactor(t){return this.set("specularColorFactor",t)}getSpecularColorHex(){return te.factorToHex(this.getSpecularColorFactor())}setSpecularColorHex(t){const e=this.getSpecularColorFactor().slice();return this.set("specularColorFactor",te.hexToFactor(t,e))}getSpecularTexture(){return this.getRef("specularTexture")}getSpecularTextureInfo(){return this.getRef("specularTexture")?this.getRef("specularTextureInfo"):null}setSpecularTexture(t){return this.setRef("specularTexture",t,{channels:xn})}getSpecularColorTexture(){return this.getRef("specularColorTexture")}getSpecularColorTextureInfo(){return this.getRef("specularColorTexture")?this.getRef("specularColorTextureInfo"):null}setSpecularColorTexture(t){return this.setRef("specularColorTexture",t,{channels:Tn|En|An})}}In.EXTENSION_NAME="KHR_materials_specular";const Rn="KHR_materials_specular";class Mn extends Ve{constructor(...t){super(...t),this.extensionName=Rn}createSpecular(){return new In(this.document.getGraph())}read(t){const e=t.jsonDoc,r=e.json.textures||[];return(e.json.materials||[]).forEach(((e,n)=>{if(e.extensions&&e.extensions[Rn]){const s=this.createSpecular();t.materials[n].setExtension(Rn,s);const i=e.extensions[Rn];if(void 0!==i.specularFactor&&s.setSpecularFactor(i.specularFactor),void 0!==i.specularColorFactor&&s.setSpecularColorFactor(i.specularColorFactor),void 0!==i.specularTexture){const e=i.specularTexture;s.setSpecularTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getSpecularTextureInfo(),e)}if(void 0!==i.specularColorTexture){const e=i.specularColorTexture;s.setSpecularColorTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getSpecularColorTextureInfo(),e)}}})),this}write(t){const e=t.jsonDoc;return this.document.getRoot().listMaterials().forEach((r=>{const n=r.getExtension(Rn);if(n){const s=t.materialIndexMap.get(r),i=e.json.materials[s];i.extensions=i.extensions||{};const o=i.extensions[Rn]={};if(1!==n.getSpecularFactor()&&(o.specularFactor=n.getSpecularFactor()),ce.eq(n.getSpecularColorFactor(),[1,1,1])||(o.specularColorFactor=n.getSpecularColorFactor()),n.getSpecularTexture()){const e=n.getSpecularTexture(),r=n.getSpecularTextureInfo();o.specularTexture=t.createTextureInfoDef(e,r)}if(n.getSpecularColorTexture()){const e=n.getSpecularColorTexture(),r=n.getSpecularColorTextureInfo();o.specularColorTexture=t.createTextureInfoDef(e,r)}}})),this}}Mn.EXTENSION_NAME=Rn;const{R:Sn}=qt;class vn extends Me{init(){this.extensionName="KHR_materials_transmission",this.propertyType="Transmission",this.parentTypes=[Wt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{transmissionFactor:0,transmissionTexture:null,transmissionTextureInfo:new Se(this.graph,"transmissionTextureInfo")})}getTransmissionFactor(){return this.get("transmissionFactor")}setTransmissionFactor(t){return this.set("transmissionFactor",t)}getTransmissionTexture(){return this.getRef("transmissionTexture")}getTransmissionTextureInfo(){return this.getRef("transmissionTexture")?this.getRef("transmissionTextureInfo"):null}setTransmissionTexture(t){return this.setRef("transmissionTexture",t,{channels:Sn})}}vn.EXTENSION_NAME="KHR_materials_transmission";const Nn="KHR_materials_transmission";class wn extends Ve{constructor(...t){super(...t),this.extensionName=Nn}createTransmission(){return new vn(this.document.getGraph())}read(t){const e=t.jsonDoc,r=e.json.textures||[];return(e.json.materials||[]).forEach(((e,n)=>{if(e.extensions&&e.extensions[Nn]){const s=this.createTransmission();t.materials[n].setExtension(Nn,s);const i=e.extensions[Nn];if(void 0!==i.transmissionFactor&&s.setTransmissionFactor(i.transmissionFactor),void 0!==i.transmissionTexture){const e=i.transmissionTexture;s.setTransmissionTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getTransmissionTextureInfo(),e)}}})),this}write(t){const e=t.jsonDoc;return this.document.getRoot().listMaterials().forEach((r=>{const n=r.getExtension(Nn);if(n){const s=t.materialIndexMap.get(r),i=e.json.materials[s];i.extensions=i.extensions||{};const o=i.extensions[Nn]={transmissionFactor:n.getTransmissionFactor()};if(n.getTransmissionTexture()){const e=n.getTransmissionTexture(),r=n.getTransmissionTextureInfo();o.transmissionTexture=t.createTextureInfoDef(e,r)}}})),this}}wn.EXTENSION_NAME=Nn;class On extends Me{init(){this.extensionName="KHR_materials_unlit",this.propertyType="Unlit",this.parentTypes=[Wt.MATERIAL]}}On.EXTENSION_NAME="KHR_materials_unlit";const Dn="KHR_materials_unlit";class Cn extends Ve{constructor(...t){super(...t),this.extensionName=Dn}createUnlit(){return new On(this.document.getGraph())}read(t){return(t.jsonDoc.json.materials||[]).forEach(((e,r)=>{e.extensions&&e.extensions[Dn]&&t.materials[r].setExtension(Dn,this.createUnlit())})),this}write(t){const e=t.jsonDoc;return this.document.getRoot().listMaterials().forEach((r=>{if(r.getExtension(Dn)){const n=t.materialIndexMap.get(r),s=e.json.materials[n];s.extensions=s.extensions||{},s.extensions[Dn]={}}})),this}}Cn.EXTENSION_NAME=Dn;class jn extends Me{init(){this.extensionName="KHR_materials_variants",this.propertyType="Mapping",this.parentTypes=["MappingList"]}getDefaults(){return Object.assign(super.getDefaults(),{material:null,variants:[]})}getMaterial(){return this.getRef("material")}setMaterial(t){return this.setRef("material",t)}addVariant(t){return this.addRef("variants",t)}removeVariant(t){return this.removeRef("variants",t)}listVariants(){return this.listRefs("variants")}}jn.EXTENSION_NAME="KHR_materials_variants";class Fn extends Me{init(){this.extensionName="KHR_materials_variants",this.propertyType="MappingList",this.parentTypes=[Wt.PRIMITIVE]}getDefaults(){return Object.assign(super.getDefaults(),{mappings:[]})}addMapping(t){return this.addRef("mappings",t)}removeMapping(t){return this.removeRef("mappings",t)}listMappings(){return this.listRefs("mappings")}}Fn.EXTENSION_NAME="KHR_materials_variants";class Un extends Me{init(){this.extensionName="KHR_materials_variants",this.propertyType="Variant",this.parentTypes=["MappingList"]}}Un.EXTENSION_NAME="KHR_materials_variants";const Pn="KHR_materials_variants";class Ln extends Ve{constructor(...t){super(...t),this.extensionName=Pn}createMappingList(){return new Fn(this.document.getGraph())}createVariant(t=""){return new Un(this.document.getGraph(),t)}createMapping(){return new jn(this.document.getGraph())}listVariants(){return Array.from(this.properties).filter((t=>t instanceof Un))}read(t){const e=t.jsonDoc;if(!e.json.extensions||!e.json.extensions[Pn])return this;const r=(e.json.extensions[Pn].variants||[]).map((t=>this.createVariant().setName(t.name||"")));return(e.json.meshes||[]).forEach(((e,n)=>{const s=t.meshes[n];(e.primitives||[]).forEach(((e,n)=>{if(!e.extensions||!e.extensions[Pn])return;const i=this.createMappingList(),o=e.extensions[Pn];for(const e of o.mappings){const n=this.createMapping();void 0!==e.material&&n.setMaterial(t.materials[e.material]);for(const t of e.variants||[])n.addVariant(r[t]);i.addMapping(n)}s.listPrimitives()[n].setExtension(Pn,i)}))})),this}write(t){const e=t.jsonDoc,r=this.listVariants();if(!r.length)return this;const n=[],s=new Map;for(const e of r)s.set(e,n.length),n.push(t.createPropertyDef(e));for(const e of this.document.getRoot().listMeshes()){const r=t.meshIndexMap.get(e);e.listPrimitives().forEach(((e,n)=>{const i=e.getExtension(Pn);if(!i)return;const o=t.jsonDoc.json.meshes[r].primitives[n],a=i.listMappings().map((e=>{const r=t.createPropertyDef(e),n=e.getMaterial();return n&&(r.material=t.materialIndexMap.get(n)),r.variants=e.listVariants().map((t=>s.get(t))),r}));o.extensions=o.extensions||{},o.extensions[Pn]={mappings:a}}))}return e.json.extensions=e.json.extensions||{},e.json.extensions[Pn]={variants:n},this}}Ln.EXTENSION_NAME=Pn;const{G:Bn}=qt;class Gn extends Me{init(){this.extensionName="KHR_materials_volume",this.propertyType="Volume",this.parentTypes=[Wt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{thicknessFactor:0,thicknessTexture:null,thicknessTextureInfo:new Se(this.graph,"thicknessTexture"),attenuationDistance:1/0,attenuationColor:[1,1,1]})}getThicknessFactor(){return this.get("thicknessFactor")}setThicknessFactor(t){return this.set("thicknessFactor",t)}getThicknessTexture(){return this.getRef("thicknessTexture")}getThicknessTextureInfo(){return this.getRef("thicknessTexture")?this.getRef("thicknessTextureInfo"):null}setThicknessTexture(t){return this.setRef("thicknessTexture",t,{channels:Bn})}getAttenuationDistance(){return this.get("attenuationDistance")}setAttenuationDistance(t){return this.set("attenuationDistance",t)}getAttenuationColor(){return this.get("attenuationColor")}setAttenuationColor(t){return this.set("attenuationColor",t)}getAttenuationColorHex(){return te.factorToHex(this.getAttenuationColor())}setAttenuationColorHex(t){const e=this.getAttenuationColor().slice();return this.set("attenuationColor",te.hexToFactor(t,e))}}Gn.EXTENSION_NAME="KHR_materials_volume";const Vn="KHR_materials_volume";class kn extends Ve{constructor(...t){super(...t),this.extensionName=Vn}createVolume(){return new Gn(this.document.getGraph())}read(t){const e=t.jsonDoc,r=e.json.textures||[];return(e.json.materials||[]).forEach(((e,n)=>{if(e.extensions&&e.extensions[Vn]){const s=this.createVolume();t.materials[n].setExtension(Vn,s);const i=e.extensions[Vn];if(void 0!==i.thicknessFactor&&s.setThicknessFactor(i.thicknessFactor),void 0!==i.attenuationDistance&&s.setAttenuationDistance(i.attenuationDistance),void 0!==i.attenuationColor&&s.setAttenuationColor(i.attenuationColor),void 0!==i.thicknessTexture){const e=i.thicknessTexture;s.setThicknessTexture(t.textures[r[e.index].source]),t.setTextureInfo(s.getThicknessTextureInfo(),e)}}})),this}write(t){const e=t.jsonDoc;return this.document.getRoot().listMaterials().forEach((r=>{const n=r.getExtension(Vn);if(n){const s=t.materialIndexMap.get(r),i=e.json.materials[s];i.extensions=i.extensions||{};const o=i.extensions[Vn]={};if(n.getThicknessFactor()>0&&(o.thicknessFactor=n.getThicknessFactor()),Number.isFinite(n.getAttenuationDistance())&&(o.attenuationDistance=n.getAttenuationDistance()),ce.eq(n.getAttenuationColor(),[1,1,1])||(o.attenuationColor=n.getAttenuationColor()),n.getThicknessTexture()){const e=n.getThicknessTexture(),r=n.getThicknessTextureInfo();o.thicknessTexture=t.createTextureInfoDef(e,r)}}})),this}}kn.EXTENSION_NAME=Vn;const zn="KHR_mesh_quantization";class Hn extends Ve{constructor(...t){super(...t),this.extensionName=zn}read(t){return this}write(t){return this}}Hn.EXTENSION_NAME=zn;const Wn="KHR_texture_basisu";class Yn{match(t){return 171===t[0]&&75===t[1]&&84===t[2]&&88===t[3]&&32===t[4]&&50===t[5]&&48===t[6]&&187===t[7]&&13===t[8]&&10===t[9]&&26===t[10]&&10===t[11]}getSize(t){const e=$e(t);return[e.pixelWidth,e.pixelHeight]}getChannels(t){const e=$e(t).dataFormatDescriptor[0];if(163===e.colorModel)return 2===e.samples.length&&15==(15&e.samples[1].channelType)?4:3;if(166===e.colorModel)return 3==(15&e.samples[0].channelType)?4:3;throw new Error(`Unexpected KTX2 colorModel, "${e.colorModel}".`)}getGPUByteLength(t){const e=$e(t),r=this.getChannels(t)>3;let n=0;for(let t=0;t<e.levels.length;t++){const s=e.levels[t];n+=s.uncompressedByteLength?s.uncompressedByteLength:Math.max(1,Math.floor(e.pixelWidth/Math.pow(2,t)))/4*(Math.max(1,Math.floor(e.pixelHeight/Math.pow(2,t)))/4)*(r?16:8)}return n}}class Xn extends Ve{constructor(...t){super(...t),this.extensionName=Wn,this.prereadTypes=[Wt.TEXTURE]}static register(){re.registerFormat("image/ktx2",new Yn)}preread(t){return t.jsonDoc.json.textures.forEach((t=>{t.extensions&&t.extensions[Wn]&&(t.source=t.extensions[Wn].source)})),this}read(t){return this}write(t){const e=t.jsonDoc;return this.document.getRoot().listTextures().forEach((r=>{if("image/ktx2"===r.getMimeType()){const n=t.imageIndexMap.get(r);e.json.textures.forEach((t=>{t.source===n&&(t.extensions=t.extensions||{},t.extensions[Wn]={source:t.source},delete t.source)}))}})),this}}Xn.EXTENSION_NAME=Wn;class qn extends Me{init(){this.extensionName="KHR_texture_transform",this.propertyType="Transform",this.parentTypes=[Wt.TEXTURE_INFO]}getDefaults(){return Object.assign(super.getDefaults(),{offset:[0,0],rotation:0,scale:[1,1],texCoord:null})}getOffset(){return this.get("offset")}setOffset(t){return this.set("offset",t)}getRotation(){return this.get("rotation")}setRotation(t){return this.set("rotation",t)}getScale(){return this.get("scale")}setScale(t){return this.set("scale",t)}getTexCoord(){return this.get("texCoord")}setTexCoord(t){return this.set("texCoord",t)}}qn.EXTENSION_NAME="KHR_texture_transform";const Kn="KHR_texture_transform";class Qn extends Ve{constructor(...t){super(...t),this.extensionName=Kn}createTransform(){return new qn(this.document.getGraph())}read(t){for(const[e,r]of Array.from(t.textureInfos.entries())){if(!r.extensions||!r.extensions[Kn])continue;const t=this.createTransform(),n=r.extensions[Kn];void 0!==n.offset&&t.setOffset(n.offset),void 0!==n.rotation&&t.setRotation(n.rotation),void 0!==n.scale&&t.setScale(n.scale),void 0!==n.texCoord&&t.setTexCoord(n.texCoord),e.setExtension(Kn,t)}return this}write(t){const e=Array.from(t.textureInfoDefMap.entries());for(const[t,r]of e){const e=t.getExtension(Kn);if(!e)continue;r.extensions=r.extensions||{};const n={},s=ce.eq;s(e.getOffset(),[0,0])||(n.offset=e.getOffset()),0!==e.getRotation()&&(n.rotation=e.getRotation()),s(e.getScale(),[1,1])||(n.scale=e.getScale()),null!=e.getTexCoord()&&(n.texCoord=e.getTexCoord()),r.extensions[Kn]=n}return this}}Qn.EXTENSION_NAME=Kn;const $n=[Wt.ROOT,Wt.SCENE,Wt.NODE,Wt.MESH,Wt.MATERIAL,Wt.TEXTURE,Wt.ANIMATION];class Jn extends Me{init(){this.extensionName="KHR_xmp_json_ld",this.propertyType="Packet",this.parentTypes=$n}getDefaults(){return Object.assign(super.getDefaults(),{context:{},properties:{}})}getContext(){return this.get("context")}setContext(t){return this.set("context",er({},t))}listProperties(){return Object.keys(this.get("properties"))}getProperty(t){const e=this.get("properties");return t in e?e[t]:null}setProperty(t,e){this._assertContext(t);const r=er({},this.get("properties"));return e?r[t]=e:delete r[t],this.set("properties",r)}toJSONLD(){return er({"@context":Zn(this.get("context"))},Zn(this.get("properties")))}fromJSONLD(t){const e=(t=Zn(t))["@context"];return e&&this.set("context",e),delete t["@context"],this.set("properties",t)}_assertContext(t){if(!(t.split(":")[0]in this.get("context")))throw new Error(`KHR_xmp_json_ld: Missing context for term, "${t}".`)}}function Zn(t){return JSON.parse(JSON.stringify(t))}Jn.EXTENSION_NAME="KHR_xmp_json_ld";const ts="KHR_xmp_json_ld";class es extends Ve{constructor(...t){super(...t),this.extensionName=ts}createPacket(){return new Jn(this.document.getGraph())}listPackets(){return Array.from(this.properties)}read(t){var e;const r=null==(e=t.jsonDoc.json.extensions)?void 0:e[ts];if(!r||!r.packets)return this;const n=t.jsonDoc.json,s=this.document.getRoot(),i=r.packets.map((t=>this.createPacket().fromJSONLD(t))),o=[[n.asset],n.scenes,n.nodes,n.meshes,n.materials,n.images,n.animations],a=[[s],s.listScenes(),s.listNodes(),s.listMeshes(),s.listMaterials(),s.listTextures(),s.listAnimations()];for(let t=0;t<o.length;t++){const e=o[t]||[];for(let r=0;r<e.length;r++){const n=e[r];n.extensions&&n.extensions[ts]&&a[t][r].setExtension(ts,i[n.extensions[ts].packet])}}return this}write(t){const{json:e}=t.jsonDoc,r=[];for(const n of this.properties){r.push(n.toJSONLD());for(const s of n.listParents()){let n;switch(s.propertyType){case Wt.ROOT:n=e.asset;break;case Wt.SCENE:n=e.scenes[t.sceneIndexMap.get(s)];break;case Wt.NODE:n=e.nodes[t.nodeIndexMap.get(s)];break;case Wt.MESH:n=e.meshes[t.meshIndexMap.get(s)];break;case Wt.MATERIAL:n=e.materials[t.materialIndexMap.get(s)];break;case Wt.TEXTURE:n=e.images[t.imageIndexMap.get(s)];break;case Wt.ANIMATION:n=e.animations[t.animationIndexMap.get(s)];break;default:n=null,this.document.getLogger().warn(`[${ts}]: Unsupported parent property, "${s.propertyType}"`)}n&&(n.extensions=n.extensions||{},n.extensions[ts]={packet:r.length-1})}}return r.length>0&&(e.extensions=e.extensions||{},e.extensions[ts]={packets:r}),this}}es.EXTENSION_NAME=ts;var rs=o(339),ns=o.n(rs);function ss(t){return ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ss(t)}function is(){is=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",a=s.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,s){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),a=new R(s||[]);return n(o,"_invoke",{value:E(t,r,a)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function _(){}function f(){}function h(){}var d={};c(d,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(M([])));m&&m!==e&&r.call(m,i)&&(d=m);var g=h.prototype=_.prototype=Object.create(d);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function s(n,i,o,a){var c=p(t[n],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ss(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){s("next",t,o,a)}),(function(t){s("throw",t,o,a)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return s("throw",t,o,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){s(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(s,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===s)throw i;return S()}for(r.method=s,r.arg=i;;){var o=r.delegate;if(o){var a=A(o,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function A(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var s=p(n,t.iterator,e.arg);if("throw"===s.type)return e.method="throw",e.arg=s.arg,e.delegate=null,l;var i=s.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(T.prototype),c(T.prototype,o,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,s,i){void 0===i&&(i=Promise);var o=new T(u(e,r,n,s),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},b(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=M,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var s=n.arg;I(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function os(t,e,r,n,s,i,o){try{var a=t[i](o),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,s)}window.gltfCompress=function(){var t,e=(t=is().mark((function t(e){var r,n,s;return is().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=new St({credentials:"include"}).registerExtensions([Pr]),t.next=3,ns().createDecoderModule();case 3:return t.t1=t.sent,t.next=6,ns().createEncoderModule();case 6:return t.t2=t.sent,t.t3={"draco3d.decoder":t.t1,"draco3d.encoder":t.t2},r=t.t0.registerDependencies.call(t.t0,t.t3),t.next=11,r.readBinary(e);case 11:return(n=t.sent).createExtension(Pr).setRequired(!0).setEncoderOptions({method:Pr.EncoderMethod.SEQUENTIAL,encodeSpeed:5,decodeSpeed:5}),t.next=15,r.writeBinary(n);case 15:return s=t.sent,t.abrupt("return",s);case 17:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,s){var i=t.apply(e,r);function o(t){os(i,n,s,o,a,"next",t)}function a(t){os(i,n,s,o,a,"throw",t)}o(void 0)}))});return function(t){return e.apply(this,arguments)}}()})()})();
//# sourceMappingURL=glbCompress.js.map